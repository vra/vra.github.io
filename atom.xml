<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Yunfeng&#39;s Simple Blog</title>
  
  <subtitle>Love, Life, Linux</subtitle>
  <link href="http://vra.github.io/atom.xml" rel="self"/>
  
  <link href="http://vra.github.io/"/>
  <updated>2023-06-08T14:13:49.420Z</updated>
  <id>http://vra.github.io/</id>
  
  <author>
    <name>Yunfeng Wang</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>homebrewç¦æ­¢æ‰§è¡Œinstallå‘½ä»¤æ—¶è‡ªåŠ¨æ›´æ–°</title>
    <link href="http://vra.github.io/2023/06/08/homebrew-disable-auto-update/"/>
    <id>http://vra.github.io/2023/06/08/homebrew-disable-auto-update/</id>
    <published>2023-06-08T14:02:49.000Z</published>
    <updated>2023-06-08T14:13:49.420Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://brew.sh/">Homebrew</a> æ˜¯ macOS ä¸‹çš„é»˜è®¤çš„åŒ…ç®¡ç†å™¨ï¼Œä¸éœ€è¦sudoæƒé™å°±å¯ä»¥å®‰è£…åŒ…ï¼Œæ¯”è¾ƒå¥½ç”¨ã€‚</p><p>ä¸è¿‡ç”¨<code>brew install</code>å®‰è£…åŒ…æ—¶æœ‰ä¸ªé—®é¢˜ï¼Œå®ƒé»˜è®¤ä¼šå…ˆæ‰§è¡Œ<code>brew update</code>æ¥æ›´æ–°brewçš„ç‰ˆæœ¬ã€‚ä½†ç”±äºbrew çš„æºå›½å†…è®¿é—®æ¯”è¾ƒæ…¢ï¼Œå¸¸å¸¸<code>brew update</code>æ‰§è¡Œè€—æ—¶æ¯”è¾ƒä¹…ï¼Œå½±å“æ¯æ¬¡å®‰è£…åŒ…çš„ä½“éªŒã€‚</p><p>è§£å†³åŠæ³•æ˜¯è®¾ç½®<code>HOMEBREW_NO_AUTO_UPDATE</code>ç¯å¢ƒå˜é‡ä¸º1ï¼Œè¿™æ ·æ¯æ¬¡<code>brew install</code>æ—¶è·³è¿‡æ›´æ–°brewçš„æ­¥éª¤ï¼Œå®é™…ä½“éªŒå®‰è£…åŒ…é€Ÿåº¦æå‡æ˜æ˜¾ã€‚</p><p>å¯ä»¥æ·»åŠ ä¸‹é¢çš„è¯­å¥åˆ°ä½ çš„.bashrcæˆ–.zshrcä¸­ï¼Œé‡å¯shellå³ç”Ÿæ•ˆ:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> HOMEBREW_NO_AUTO_UPDATE=1</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://brew.sh/&quot;&gt;Homebrew&lt;/a&gt; æ˜¯ macOS ä¸‹çš„é»˜è®¤çš„åŒ…ç®¡ç†å™¨ï¼Œä¸éœ€è¦sudoæƒé™å°±å¯ä»¥å®‰è£…åŒ…ï¼Œæ¯”è¾ƒå¥½ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡ç”¨&lt;code&gt;brew install&lt;/code&gt;å®‰è£…åŒ…æ—¶æœ‰ä¸ªé—®é¢˜ï¼Œå®ƒé»˜è®¤ä¼šå…ˆæ‰§è¡Œ&lt;code&gt;</summary>
      
    
    
    
    
    <category term="Homebrew" scheme="http://vra.github.io/tags/Homebrew/"/>
    
    <category term="macOS" scheme="http://vra.github.io/tags/macOS/"/>
    
  </entry>
  
  <entry>
    <title>Python å‘½ä»¤è¡¥å…¨ç¥å™¨ argcomplete</title>
    <link href="http://vra.github.io/2023/05/28/python-autocomplete-with-argcomplete/"/>
    <id>http://vra.github.io/2023/05/28/python-autocomplete-with-argcomplete/</id>
    <published>2023-05-28T02:33:12.000Z</published>
    <updated>2023-06-09T15:44:59.896Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1. æ¦‚è¿°"></a>1. æ¦‚è¿°</h2><p>åœ¨ä½¿ç”¨Python å‘½ä»¤æˆ–è€… Pythonçš„å‘½ä»¤è¡Œå·¥å…·çš„æ—¶å€™ï¼Œä¸€ä¸ªç—›ç‚¹æ˜¯æ²¡æœ‰è¡¥å…¨ã€‚æ¯”å¦‚<code>python -m</code>åé¢è¾“å…¥åŒ…åå­—ï¼Œå°±æ²¡æœ‰æç¤ºï¼Œæ¯æ¬¡æƒ³è¿è¡Œä¸€ä¸ªhttp serverçš„æ—¶å€™ï¼Œéƒ½éœ€è¦æœç´¢ä¸€ä¸‹httpæœåŠ¡çš„åŒ…åã€‚å¦å¤–ï¼Œåƒpipï¼Œpipxç­‰å‘½ä»¤ä¹Ÿæ²¡æœ‰æç¤ºï¼Œä½¿ç”¨ä¸å¤ªæ–¹ä¾¿ã€‚</p><p>å¶ç„¶çœ‹åˆ°<a href="https://github.com/kislyuk/argcomplete">argcomplete</a>è¿™ä¸ªåº“ï¼ŒæŒ‰tabé”®å°±å¯ä»¥ç»™Pythonçš„å‘½ä»¤è¡Œæ·»åŠ è‡ªåŠ¨è¡¥å…¨ï¼Œç®€ç›´æ˜¯ä½¿ç”¨Pythonçš„ä¸€ä¸ªç¥å™¨ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œargcompleteæœ‰ä¸‹é¢çš„ç‰¹ç‚¹</p><ul><li>å®˜æ–¹æ”¯æŒæ”¯æŒbashå’Œzshä¸¤ç§shellï¼Œå¯¹tcshå’Œfishæœ‰ç¬¬ä¸‰æ–¹è´¡çŒ®è€…æä¾›çš„æ”¯æŒï¼ˆä¸å¥½æ„æ€Windowsç”¨æˆ·è¿™é‡Œåˆè¢«å½“åšäºŒç­‰å…¬æ°‘äº†ğŸ˜‚ï¼‰</li><li>å¯ä»¥å¯¹pythonå‘½ä»¤å’Œpipå‘½ä»¤è¿›è¡Œè¡¥å…¨</li><li>å…¶ä»–ä»»ä½•ä»¥argparseè§£æçš„ç¬¬ä¸‰æ–¹åŒ…çš„å‘½ä»¤éƒ½å¯ä»¥ç”¨è‡ªåŠ¨è¡¥å…¨ï¼Œæ·»åŠ argcompleteçš„å‡ è¡Œä»£ç å°±è¡Œ</li></ul><p>ä¸‹é¢å…·ä½“å±•å¼€æ€ä¹ˆå¯¹å·²æœ‰çš„å·¥å…·å¯ç”¨è‡ªåŠ¨è¡¥å…¨ï¼Œä»¥åŠå¦‚ä½•è®©è‡ªå·±çš„PythonåŒ…æ”¯æŒargcompleteã€‚</p><span id="more"></span><h2 id="2-å¯¹Pythonå’Œpipå¯ç”¨è‡ªåŠ¨è¡¥å…¨"><a href="#2-å¯¹Pythonå’Œpipå¯ç”¨è‡ªåŠ¨è¡¥å…¨" class="headerlink" title="2. å¯¹Pythonå’Œpipå¯ç”¨è‡ªåŠ¨è¡¥å…¨"></a>2. å¯¹Pythonå’Œpipå¯ç”¨è‡ªåŠ¨è¡¥å…¨</h2><p>é¦–å…ˆé€šè¿‡<code>pip</code>å‘½ä»¤æ¥å®‰è£…argcomplete:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install argcomplete</span><br></pre></td></tr></table></figure><p>ç„¶åæ‰§è¡Œä¸‹é¢çš„è¯­å¥æ¥å¯ç”¨å¯¹Pythonå’Œpipçš„è‡ªåŠ¨è¡¥å…¨:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">activate-global-python-argcomplete</span><br></pre></td></tr></table></figure><p>é‡å¯Shellï¼Œè¯•è¯•è¾“å…¥<code>pip</code>ç„¶åæŒ‰tabï¼Œå‘ç°å°±ä¼šåˆ—å‡ºæ‰€æœ‰çš„å‘½ä»¤é€‰é¡¹ã€‚</p><h2 id="3-å¦‚ä½•å¯¹åˆ«çš„ç¬¬ä¸‰æ–¹åº“å¯ç”¨è‡ªåŠ¨è¡¥å…¨"><a href="#3-å¦‚ä½•å¯¹åˆ«çš„ç¬¬ä¸‰æ–¹åº“å¯ç”¨è‡ªåŠ¨è¡¥å…¨" class="headerlink" title="3. å¦‚ä½•å¯¹åˆ«çš„ç¬¬ä¸‰æ–¹åº“å¯ç”¨è‡ªåŠ¨è¡¥å…¨"></a>3. å¦‚ä½•å¯¹åˆ«çš„ç¬¬ä¸‰æ–¹åº“å¯ç”¨è‡ªåŠ¨è¡¥å…¨</h2><p>æœ‰äº›åº“çš„å‘½ä»¤è¡Œç¨‹åºæ˜¯å·²ç»æ”¯æŒargcompleteè¡¥å…¨ï¼Œåªéœ€è¦ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥æ¿€æ´»ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">eval</span> <span class="string">&quot;<span class="subst">$(register-python-argcomplete &lt;python-app-name&gt;)</span>&quot;</span></span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ pipx åŒ…å®‰è£…åä¼šåœ¨ç³»ç»Ÿå®‰è£…ä¸€ä¸ªå‘½ä»¤è¡Œç¨‹åºpipxï¼Œä¸”pipxå·²ç»æ”¯æŒargcompleteï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥æ¿€æ´»è‡ªåŠ¨è¡¥å…¨:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">eval</span> <span class="string">&quot;<span class="subst">$(register-python-argcomplete pipx)</span>&quot;</span></span><br></pre></td></tr></table></figure><p>æ¿€æ´»åè¾“å…¥<code>pipx in</code> æŒ‰tabé”®ï¼Œå°±å¯ä»¥åˆ—å‡ºpipxæ‰€æœ‰ä»¥<code>in</code>å¼€å¤´çš„å‘½ä»¤ï¼Œå†æŒ‰tabé”®ä¼šåœ¨å„ä¸ªå€™é€‰å‘½ä»¤ä¹‹é—´åˆ‡æ¢ã€‚</p><p>âš ï¸æ³¨æ„ï¼šè¿™ä¸ªæ¿€æ´»å‘½ä»¤æ˜¯åªå¯¹å“ªäº›ä»£ç ä¸­å·²ç»æ”¯æŒäº†argcompleteè¯­å¥çš„ç¨‹åºæ‰ç”Ÿæ•ˆï¼Œå¦‚æœä»£ç ä¸­æ— è¿™äº›è¯­å¥ï¼Œé‚£æ˜¯ä¸ç”Ÿæ•ˆçš„ã€‚</p><h2 id="4-å¦‚ä½•è®©è‡ªå·±çš„Pythonåº“æ”¯æŒè‡ªåŠ¨è¡¥å…¨"><a href="#4-å¦‚ä½•è®©è‡ªå·±çš„Pythonåº“æ”¯æŒè‡ªåŠ¨è¡¥å…¨" class="headerlink" title="4. å¦‚ä½•è®©è‡ªå·±çš„Pythonåº“æ”¯æŒè‡ªåŠ¨è¡¥å…¨"></a>4. å¦‚ä½•è®©è‡ªå·±çš„Pythonåº“æ”¯æŒè‡ªåŠ¨è¡¥å…¨</h2><p>åªéœ€è¦å¢åŠ ä¸‹é¢å‡ è¡Œä»£ç ï¼Œå°±èƒ½è®©ä½ çš„åº“çš„å‘½ä»¤è¡Œæ”¯æŒè‡ªåŠ¨è¡¥å…¨:</p><pre><code class="python"># åœ¨ArgumentParserå¯¹è±¡åˆå§‹åŒ–å‰å¢åŠ è¿™ä¸¤è¡Œ# PYTHON_ARGCOMPLETE_OKimport argcomplete, argparse# åŸæœ‰ä»£ç parser = argparse.ArgumentParser()...# åœ¨è°ƒç”¨parse_args()å‡½æ•°å‰å¢åŠ è¿™ä¸€è¡Œargcomplete.autocomplete(parser)# åŸæœ‰ä»£ç args = parser.parse_args()...</code></pre><p>ç„¶åä½ çš„åŒ…å®‰è£…åï¼Œå¯¹åº”çš„å‘½ä»¤è¡Œç¨‹åºå°±å¯ä»¥ç”¨<code>eval &quot;$(register-python-argcomplete &lt;app-name&gt;)&quot;</code>æ¥è¡¥å…¨äº†ã€‚</p><p>âš ï¸æ³¨æ„ï¼šå¦‚æœç¨‹åºæ‰§è¡Œåˆ°<code>argcomplete.autocomplete()</code> è¢«è°ƒç”¨çš„åœ°æ–¹è€—æ—¶å¾ˆä¹…çš„è¯ï¼Œç”¨æˆ·æŒ‰tabå°±ä¼šæœ‰æ˜æ˜¾çš„å»¶è¿Ÿæ„Ÿã€‚æ‰€ä»¥å°½é‡å°†ä¸€äº›æ¯”è¾ƒè€—æ—¶çš„æ“ä½œæ”¾åœ¨<code>argcomplete.autocomplete()</code> è¯­å¥åé¢ï¼Œæ¯”å¦‚ä¸€äº›<code>import</code>è¯­å¥ï¼Œå¸¸å¸¸æ¯”è¾ƒè€—æ—¶ï¼Œå¯ä»¥å¾€åæ”¾ã€‚</p><p>å¸Œæœ›è¿™ä¸ªç¨‹åºèƒ½è®©ä½ çš„Pythonå¼€å‘å˜å¾—èˆ’æœä¸€äº›ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;1-æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#1-æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;1. æ¦‚è¿°&quot;&gt;&lt;/a&gt;1. æ¦‚è¿°&lt;/h2&gt;&lt;p&gt;åœ¨ä½¿ç”¨Python å‘½ä»¤æˆ–è€… Pythonçš„å‘½ä»¤è¡Œå·¥å…·çš„æ—¶å€™ï¼Œä¸€ä¸ªç—›ç‚¹æ˜¯æ²¡æœ‰è¡¥å…¨ã€‚æ¯”å¦‚&lt;code&gt;python -m&lt;/code&gt;åé¢è¾“å…¥åŒ…åå­—ï¼Œå°±æ²¡æœ‰æç¤ºï¼Œæ¯æ¬¡æƒ³è¿è¡Œä¸€ä¸ªhttp serverçš„æ—¶å€™ï¼Œéƒ½éœ€è¦æœç´¢ä¸€ä¸‹httpæœåŠ¡çš„åŒ…åã€‚å¦å¤–ï¼Œåƒpipï¼Œpipxç­‰å‘½ä»¤ä¹Ÿæ²¡æœ‰æç¤ºï¼Œä½¿ç”¨ä¸å¤ªæ–¹ä¾¿ã€‚&lt;/p&gt;
&lt;p&gt;å¶ç„¶çœ‹åˆ°&lt;a href=&quot;https://github.com/kislyuk/argcomplete&quot;&gt;argcomplete&lt;/a&gt;è¿™ä¸ªåº“ï¼ŒæŒ‰tabé”®å°±å¯ä»¥ç»™Pythonçš„å‘½ä»¤è¡Œæ·»åŠ è‡ªåŠ¨è¡¥å…¨ï¼Œç®€ç›´æ˜¯ä½¿ç”¨Pythonçš„ä¸€ä¸ªç¥å™¨ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“æ¥è¯´ï¼Œargcompleteæœ‰ä¸‹é¢çš„ç‰¹ç‚¹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®˜æ–¹æ”¯æŒæ”¯æŒbashå’Œzshä¸¤ç§shellï¼Œå¯¹tcshå’Œfishæœ‰ç¬¬ä¸‰æ–¹è´¡çŒ®è€…æä¾›çš„æ”¯æŒï¼ˆä¸å¥½æ„æ€Windowsç”¨æˆ·è¿™é‡Œåˆè¢«å½“åšäºŒç­‰å…¬æ°‘äº†ğŸ˜‚ï¼‰&lt;/li&gt;
&lt;li&gt;å¯ä»¥å¯¹pythonå‘½ä»¤å’Œpipå‘½ä»¤è¿›è¡Œè¡¥å…¨&lt;/li&gt;
&lt;li&gt;å…¶ä»–ä»»ä½•ä»¥argparseè§£æçš„ç¬¬ä¸‰æ–¹åŒ…çš„å‘½ä»¤éƒ½å¯ä»¥ç”¨è‡ªåŠ¨è¡¥å…¨ï¼Œæ·»åŠ argcompleteçš„å‡ è¡Œä»£ç å°±è¡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹é¢å…·ä½“å±•å¼€æ€ä¹ˆå¯¹å·²æœ‰çš„å·¥å…·å¯ç”¨è‡ªåŠ¨è¡¥å…¨ï¼Œä»¥åŠå¦‚ä½•è®©è‡ªå·±çš„PythonåŒ…æ”¯æŒargcompleteã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="Python" scheme="http://vra.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>talkGPT4All 2.0</title>
    <link href="http://vra.github.io/2023/05/27/talkgpt4all-2-0/"/>
    <id>http://vra.github.io/2023/05/27/talkgpt4all-2-0/</id>
    <published>2023-05-27T06:49:45.000Z</published>
    <updated>2023-05-27T06:58:57.916Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1. æ¦‚è¿°"></a>1. æ¦‚è¿°</h3><p><a href="https://github.com/vra/talkGPT4All">talkGPT4All</a>æ˜¯åŸºäº<a href="https://gpt4all.io/index.html">GPT4All</a>çš„ä¸€ä¸ªè¯­éŸ³èŠå¤©ç¨‹åºï¼Œè¿è¡Œåœ¨æœ¬åœ°CPUä¸Šï¼Œæ”¯æŒLinuxï¼ŒMacå’ŒWindowsã€‚å®ƒåˆ©ç”¨OpenAIçš„Whisperæ¨¡å‹å°†ç”¨æˆ·è¾“å…¥çš„è¯­éŸ³è½¬æ¢ä¸ºæ–‡æœ¬ï¼Œå†è°ƒç”¨GPT4Allçš„è¯­è¨€æ¨¡å‹å¾—åˆ°å›ç­”æ–‡æœ¬ï¼Œæœ€ååˆ©ç”¨æ–‡æœ¬è½¬è¯­éŸ³(TTS)çš„ç¨‹åºå°†å›ç­”æ–‡æœ¬æœ—è¯»å‡ºæ¥ã€‚</p><p>å…³äº talkGPT4All 1.0çš„ä»‹ç»åœ¨<a href="https://juejin.cn/post/7217112585802498107">è¿™ç¯‡æ–‡ç« </a>ã€‚</p><p>talkGPT4All 1.0çš„<a href="https://www.zhihu.com/zvideo/1625779747656515584">è§†é¢‘æ•ˆæœ</a>ã€‚</p><p>ç”±äºGPT4Allä¸€ç›´åœ¨è¿­ä»£ï¼Œç›¸æ¯”ä¸Šä¸€ç¯‡æ–‡ç« å‘å¸ƒæ—¶(2023-04-10)å·²ç»æœ‰è¾ƒå¤§çš„æ›´æ–°ï¼Œä»Šå¤©å°†GPT4Allçš„ä¸€äº›æ›´æ–°åŒæ­¥åˆ°talkGPT4Allï¼Œç”±äºæ”¯æŒçš„æ¨¡å‹å’Œè¿è¡Œæ¨¡å¼éƒ½æœ‰è¾ƒå¤§çš„å˜åŒ–ï¼Œå› æ­¤å‘å¸ƒ talkGPT4All 2.0ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œ2.0ç‰ˆæœ¬ç›¸æ¯”1.0æœ‰ä¸‹é¢çš„æ›´æ–°ã€‚</p><p>é¦–å…ˆæ˜¯GPT4Allæ¡†æ¶æ”¯æŒçš„è¯­è¨€æ¨¡å‹ä»1ä¸ªå¢åŠ åˆ°8ä¸ªï¼Œå¹¶ä¸”å¯ä»¥ä¸€é”®åˆ‡æ¢æ¨¡å‹ã€‚å…·ä½“çš„æ¨¡å‹æ˜¯</p><ul><li>  Vicuna-7B-1.1-q4_2</li><li>  Vicuna-7B-1.2-q4_2</li><li>  wizardLM-7B.q4_2</li><li>  GPT4All</li><li>  GPT4All-J</li><li>  GPT4All-J-v1.1</li><li>  GPT4All-J-v1.2</li><li>  GPT4All-J-v1.3</li></ul><p>å¯ä»¥çœ‹åˆ°é™¤äº†GPT4Allç³»åˆ—çš„æ¨¡å‹ï¼Œè¿™ä¸ªæ¡†æ¶ä¹Ÿæ”¯æŒVicunaå’ŒWizardçš„æ¨¡å‹äº†ã€‚æ›´å¤šæ¨¡å‹å› ä¸ºè¯ä¹¦å’Œæ ¼å¼çš„é—®é¢˜ï¼Œè¿˜åœ¨é›†æˆä¸­ã€‚</p><p>æ ¹æ®GPT4Allçš„<a href="https://gpt4all.io/index.html">æ–‡æ¡£</a>ï¼Œä¸åŒæ¨¡å‹åœ¨benchmarkä¸Šçš„ç»“æœï¼š</p><p><img data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/988ae9ef513049d68d790e742f9e2139~tplv-k3u1fbpfcp-zoom-1.image"></p><p>å¯ä»¥çœ‹åˆ°GPT4Allç³»åˆ—çš„æ¨¡å‹çš„æŒ‡æ ‡è¿˜æ˜¯æ¯”è¾ƒé«˜çš„ã€‚</p><p>å¦ä¸€ä¸ªé‡è¦æ›´æ–°æ˜¯GPT4Allå‘å¸ƒäº†æ›´æˆç†Ÿçš„PythonåŒ…ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡pip æ¥å®‰è£…ï¼Œå› æ­¤1.0ä¸­é›†æˆçš„ä¸åŒå¹³å°ä¸åŒçš„GPT4AlläºŒè¿›åˆ¶åŒ…ä¹Ÿä¸éœ€è¦äº†ã€‚é›†æˆPyPIåŒ…çš„å¥½å¤„å¤šå¤šï¼Œæ—¢å¯ä»¥æŸ¥çœ‹æºç å­¦ä¹ å†…éƒ¨çš„å®ç°ï¼Œåˆæ›´æ–¹ä¾¿å®šä½é—®é¢˜ï¼ˆä¹‹å‰çš„äºŒè¿›åˆ¶åŒ…æ²¡æ³•è°ƒè¯•å†…éƒ¨ä»£ç ï¼‰ï¼Œä¸”ä¿è¯äº†ä¸åŒå¹³å°å®‰è£…å‘½ä»¤ä¸€è‡´ï¼ˆä¹‹å‰ä¸åŒå¹³å°äºŒè¿›åˆ¶åŒ…ä¸åŒï¼‰ã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªå˜åŒ–æ˜¯GPT4Allä¼šè‡ªåŠ¨æŒ‰éœ€ä¸‹è½½æ¨¡å‹ï¼Œå› æ­¤ç”¨æˆ·ä¸éœ€è¦æ‰‹åŠ¨ä¸‹è½½å’Œç»´æŠ¤æ¨¡å‹è·¯å¾„ã€‚åŒæ—¶å°†æ¨¡å‹ç»Ÿä¸€æ”¾ç½®åˆ°<a href="https://gpt4all.io/models/">https://gpt4all.io/models/</a> ç›®å½•ä¸‹ï¼Œæµ‹è¯•å›½å†…æ¨¡å‹ä¸‹è½½é€Ÿåº¦ä¹Ÿå¾ˆå¿«ï¼Œå¤§å®¶ç©èµ·æ¥ä¹Ÿä¼šæ›´èˆ’æœã€‚</p><p>æ ¸å¿ƒçš„æ›´æ–°å†…å®¹å°±è¿™äº›ï¼Œä¸‹é¢å¯¹talkGPT4Allçš„å®‰è£…å’Œä½¿ç”¨è¿›è¡Œè¯´æ˜ï¼Œåé¢æœ‰ç©ºä¼šæ·»åŠ ä¸€äº›å¤šä¸ªè¯­è¨€æ¨¡å‹æ•ˆæœçš„å¯¹æ¯”è§†é¢‘ã€‚</p><span id="more"></span><h3 id="2-å®‰è£…ä¸ä½¿ç”¨"><a href="#2-å®‰è£…ä¸ä½¿ç”¨" class="headerlink" title="2. å®‰è£…ä¸ä½¿ç”¨"></a>2. å®‰è£…ä¸ä½¿ç”¨</h3><h3 id="2-1-å®‰è£…"><a href="#2-1-å®‰è£…" class="headerlink" title="2.1 å®‰è£…"></a>2.1 å®‰è£…</h3><p>ç”±äºGPT4All, OpenAI Whisper å’ŒTTSå·¥å…·éƒ½æ˜¯PyPIçš„åŒ…ï¼Œå› æ­¤æ‰€æœ‰çš„ä¾èµ–éƒ½å¯ä»¥ç”¨pip å‘½ä»¤æ¥å®‰è£…ã€‚</p><p>æµç¨‹å¤§è‡´ä¸Šå°±æ˜¯cloneä»£ç ï¼Œåˆ›å»ºPythonè™šæ‹Ÿç¯å¢ƒï¼Œå®‰è£…ä¾èµ–ï¼Œå¼€å§‹èŠå¤©ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/vra/talkGPT4All.git</span><br><span class="line"><span class="built_in">cd</span> talkGPT4All</span><br><span class="line">python -m venv talkgpt4all-env</span><br><span class="line"><span class="built_in">source</span> talkgpt4all-env/bin/activate</span><br><span class="line">pip install -U pip</span><br><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure><p>å¦‚æœåœ¨Linuxç¯å¢ƒä¸‹ä½¿ç”¨ï¼Œè¿˜éœ€è¦å®‰è£… TTS å·¥å…· pyttsx3 çš„ä¸€äº›å‰ç½®ä¾èµ–ï¼Œä¾‹å¦‚åœ¨Ubuntuä¸‹ï¼Œå¯ä»¥è¿™ä¹ˆå®‰è£…ï¼ˆåˆ«çš„å‘è¡Œç‰ˆåˆ‡æ¢apt ä¸ºå¯¹åº”çš„åŒ…ç®¡ç†å‘½ä»¤åº”è¯¥å°±å¯ä»¥ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update &amp;&amp; sudo apt install -y espeak ffmpeg libespeak1</span><br></pre></td></tr></table></figure><p>ä¾èµ–å®‰è£…å®Œåå³åˆ»å¼€å§‹èŠå¤©ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python chat.py</span><br></pre></td></tr></table></figure><p>è¯­éŸ³è¾“å…¥é—®é¢˜ï¼ŒWhisperä¼šè¯†åˆ«è¯­éŸ³åˆ°æ–‡å­—ï¼Œç¬¬ä¸€æ¬¡éœ€è¦ä¸‹è½½æ¨¡å‹Whisperçš„æ¨¡å‹ï¼Œå¯èƒ½è€—æ—¶ä¼šæ¯”è¾ƒä¹…ã€‚Whisper æ¨¡å‹é»˜è®¤å­˜å‚¨åœ°å€æ˜¯<code>~/.cache/whisper/</code>ã€‚</p><p>æ–‡å­—è¯†åˆ«åï¼Œè¾“å…¥åˆ°è¯­è¨€æ¨¡å‹éƒ¨åˆ†åä¼šä¸‹è½½è¯­è¨€æ¨¡å‹æ–‡ä»¶ï¼Œæ–‡ä»¶é»˜è®¤å­˜å‚¨åˆ°<code>~/.cache/gpt4all</code> ç›®å½•ã€‚</p><h3 id="2-2-åˆ‡æ¢ä¸åŒçš„LLM"><a href="#2-2-åˆ‡æ¢ä¸åŒçš„LLM" class="headerlink" title="2.2 åˆ‡æ¢ä¸åŒçš„LLM"></a>2.2 åˆ‡æ¢ä¸åŒçš„LLM</h3><p>é»˜è®¤çš„è¯­è¨€æ¨¡å‹æ˜¯GPT4All-J-v1.3,ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œé€‰é¡¹â€“gpt-model-nameæ¥åˆ‡æ¢æ¨¡å‹ï¼Œæ‰€æœ‰çš„é€‰é¡¹æ˜¯ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;ggml-gpt4all-j-v1.3-groovy&quot;</span></span><br><span class="line"><span class="string">&quot;ggml-gpt4all-j-v1.2-jazzy&quot;</span></span><br><span class="line"><span class="string">&quot;ggml-gpt4all-j-v1.1-breezy&quot;</span></span><br><span class="line"><span class="string">&quot;ggml-gpt4all-j&quot;</span></span><br><span class="line"><span class="string">&quot;ggml-gpt4all-l13b-snoozy&quot;</span></span><br><span class="line"><span class="string">&quot;ggml-vicuna-7b-1.1-q4_2&quot;</span></span><br><span class="line"><span class="string">&quot;ggml-vicuna-13b-1.1-q4_2&quot;</span></span><br><span class="line"><span class="string">&quot;ggml-wizardLM-7B.q4_2&quot;</span></span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python chat.py --gpt-model-name ggml-wizardLM-7B.q4_2</span><br></pre></td></tr></table></figure><p>å¦‚æœæ¨¡å‹æœªä¸‹è½½è¿‡ï¼Œä¼šè¿›è¡Œä¸‹è½½ã€‚</p><p>è¿™é‡Œæœ‰ä¸ªå°é—®é¢˜ï¼ŒGPT4Allå·¥å…·è²Œä¼¼æ²¡æœ‰å¯¹æ¨¡å‹çš„å®Œæ•´æ€§è¿›è¡Œæ ¡éªŒï¼Œæ‰€ä»¥å¦‚æœä¹‹å‰æ¨¡å‹ä¸‹è½½æ²¡å®Œæˆå°±é€€å‡ºï¼Œå†æ¬¡è¿›å…¥åä¼šåŠ è½½ä¸å®Œæ•´çš„æ–‡ä»¶ï¼Œé€ æˆæŠ¥é”™ã€‚æ‰€ä»¥éœ€è¦æ‰‹åŠ¨åˆ é™¤ä¸å®Œæ•´çš„æ–‡ä»¶å†æ¬¡å®Œæ•´ä¸‹è½½åä½¿ç”¨ã€‚</p><h3 id="2-3-åˆ‡æ¢ä¸åŒå¤§å°çš„Whisperæ¨¡å‹"><a href="#2-3-åˆ‡æ¢ä¸åŒå¤§å°çš„Whisperæ¨¡å‹" class="headerlink" title="2.3 åˆ‡æ¢ä¸åŒå¤§å°çš„Whisperæ¨¡å‹"></a>2.3 åˆ‡æ¢ä¸åŒå¤§å°çš„Whisperæ¨¡å‹</h3><p>OpenAI Whisper ä¹Ÿæœ‰ä¸€ç³»åˆ—çš„æ¨¡å‹ï¼Œæ¨¡å‹è¶Šå¤§è¯†åˆ«ç»“æœåº”è¯¥æ˜¯è¶Šå‡†ã€‚talkGPT4Allé»˜è®¤ä½¿ç”¨çš„æ˜¯baseæ¨¡å‹ï¼Œä¹Ÿæä¾›äº†å‘½ä»¤è¡Œå‚æ•°â€“whisper-model-type æ¥ä¿®æ”¹ï¼Œæ‰€æœ‰çš„å¯é€‰é¡¹æ˜¯:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;tiny.en&quot;</span></span><br><span class="line"><span class="string">&quot;tiny&quot;</span></span><br><span class="line"><span class="string">&quot;base.en&quot;</span></span><br><span class="line"><span class="string">&quot;base&quot;</span></span><br><span class="line"><span class="string">&quot;small.en&quot;</span></span><br><span class="line"><span class="string">&quot;small&quot;</span></span><br><span class="line"><span class="string">&quot;medium.en&quot;</span></span><br><span class="line"><span class="string">&quot;medium&quot;</span></span><br><span class="line"><span class="string">&quot;large-v1&quot;</span></span><br><span class="line"><span class="string">&quot;large-v2&quot;</span></span><br><span class="line"><span class="string">&quot;large&quot;</span></span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python chat.py --whisper-model-type large</span><br></pre></td></tr></table></figure><h3 id="2-4-è°ƒæ•´å£°éŸ³è¯­é€Ÿ"><a href="#2-4-è°ƒæ•´å£°éŸ³è¯­é€Ÿ" class="headerlink" title="2.4 è°ƒæ•´å£°éŸ³è¯­é€Ÿ"></a>2.4 è°ƒæ•´å£°éŸ³è¯­é€Ÿ</h3><p>talkGPT4Allä¹Ÿæä¾›äº†ä¸€ä¸ªå‚æ•°â€“voice rate æ¥è°ƒæ•´ TTSå‘éŸ³çš„é€Ÿåº¦ï¼Œé»˜è®¤æ˜¯165ï¼Œè®¾ç½®è¶Šå¤§é€Ÿåº¦è¶Šå¿«:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python chat.py --voice-rate 200</span><br></pre></td></tr></table></figure><h3 id="3-ç¼ºé™·å’Œæ”¹è¿›æ€è€ƒ"><a href="#3-ç¼ºé™·å’Œæ”¹è¿›æ€è€ƒ" class="headerlink" title="3. ç¼ºé™·å’Œæ”¹è¿›æ€è€ƒ"></a>3. ç¼ºé™·å’Œæ”¹è¿›æ€è€ƒ</h3><p>å…¶å®talkGPT4Allä¸€ç›´ä»¥æ¥çš„ç¼ºé™·æ˜¯æ¯”è¾ƒæ˜æ˜¾çš„ï¼š</p><ol><li> å¤§æ¨¡å‹åœ¨CPUä¸Šå‡ºè¯å¤ªæ…¢</li><li> ç¦»çº¿çš„æ–‡æœ¬è½¬è¯­éŸ³çš„ç¨‹åºå¤ªç”Ÿç¡¬</li></ol><p>é’ˆå¯¹ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘çš„æ€è€ƒæ˜¯è¿™æ ·ï¼Œè¦åœ¨éNvidia GPUè®¾å¤‡ä¸Šæµç•…è¿è¡ŒåŸºäºTransformerç»“æ„çš„å¤§è¯­è¨€æ¨¡å‹ï¼Œé™¤äº†4æ¯”ç‰¹é‡åŒ–ã€fp16è¿™ç§ low-hang fruitå¤–ï¼Œå¿…é¡»è¦åšå¾ˆå¤šåº•å±‚çš„AIå·¥ç¨‹çš„ä¼˜åŒ–ï¼Œè¿™ä¸ªæˆ‘è§‰å¾—æˆ‘è‡ªå·±æ˜¯æ²¡æœ‰èƒ½åŠ›æ¥å®Œæˆçš„ï¼Œç”šè‡³æˆ‘çŒœæµ‹ï¼Œå¯èƒ½GPT4AllèƒŒåçš„Nomic AIå›¢é˜Ÿä¹Ÿæ²¡æœ‰è¿™æ–¹é¢çš„ç§¯ç´¯æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>å¯å–œçš„æ˜¯æœ€è¿‘çœ‹åˆ°äº†<a href="https://github.com/mlc-ai/mlc-llm">MLC LLM</a>è¿™ä¸ªå·¥ä½œï¼Œæ˜¯TVM å›¢é˜Ÿåˆ©ç”¨TVM Unityæ¥ä¼˜åŒ–è¯­è¨€æ¨¡å‹ï¼ŒæˆåŠŸåœ°å°†Vicuna-7Bè¿è¡Œåˆ°äº†<a href="https://github.com/mlc-ai/mlc-llm/blob/main/android/README.md">Android</a>å’Œ<a href="https://github.com/mlc-ai/mlc-llm/blob/main/ios/README.md">iOS</a>æ‰‹æœºä¸Šï¼Œæˆ‘è‡ªå·±ç”¨å°ç±³12 Proæµ‹è¯•æ¯ç§’èƒ½è¾“å‡º3ï½4ä¸ªtokenï¼Œä½“éªŒç®—æ˜¯æ¯”è¾ƒå¥½çš„ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ç¬¬ä¸€æ¬¡åœ¨è‡ªå·±æ‰‹æœºä¸Šè¿è¡Œå¤§è¯­è¨€æ¨¡å‹ï¼Œä¹Ÿæ„è¯†åˆ°çœŸæ­£è¦æé«˜å¤§è¯­è¨€æ¨¡å‹çš„è¦†ç›–è®¾å¤‡ï¼Œä¸€ä¸ªæè‡´ä¼˜åŒ–çš„åº•å±‚AIå·¥å…·æ˜¯å¿…ä¸å¯å°‘çš„ã€‚</p><p>æ‰€ä»¥å¯¹talkGPT4Allè¿™ä¸ªé¡¹ç›®æ„Ÿå…´è¶£çš„æœ‹å‹ä¹Ÿå¯ä»¥äº†è§£ä¸€ä¸‹MLC LLMè¿™ä¸ªå·¥ä½œï¼Œæˆ‘è®¤ä¸ºåœ¨æœªæ¥è¿™ä¸ªé¡¹ç›®ä¼šä¿ƒè¿›LLMçš„çœŸæ­£è½åœ°ã€‚</p><p>é’ˆå¯¹ç¬¬äºŒä¸ªé—®é¢˜ï¼Œè¯´å®è¯è¿˜æ²¡æœ‰æ‰¾åˆ°æ¯”è¾ƒè‡ªç„¶çš„ç¦»çº¿ TTS Pythonå·¥å…·ï¼Œå¦‚æœçœ‹åˆ°è¿™ç¯‡æ–‡ç« çš„ä½ æœ‰è¿™æ–¹é¢çš„ç»éªŒï¼Œæ¬¢è¿è¯„è®ºäº¤æµï½</p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;1-æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#1-æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;1. æ¦‚è¿°&quot;&gt;&lt;/a&gt;1. æ¦‚è¿°&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/vra/talkGPT4All&quot;&gt;talkGPT4All&lt;/a&gt;æ˜¯åŸºäº&lt;a href=&quot;https://gpt4all.io/index.html&quot;&gt;GPT4All&lt;/a&gt;çš„ä¸€ä¸ªè¯­éŸ³èŠå¤©ç¨‹åºï¼Œè¿è¡Œåœ¨æœ¬åœ°CPUä¸Šï¼Œæ”¯æŒLinuxï¼ŒMacå’ŒWindowsã€‚å®ƒåˆ©ç”¨OpenAIçš„Whisperæ¨¡å‹å°†ç”¨æˆ·è¾“å…¥çš„è¯­éŸ³è½¬æ¢ä¸ºæ–‡æœ¬ï¼Œå†è°ƒç”¨GPT4Allçš„è¯­è¨€æ¨¡å‹å¾—åˆ°å›ç­”æ–‡æœ¬ï¼Œæœ€ååˆ©ç”¨æ–‡æœ¬è½¬è¯­éŸ³(TTS)çš„ç¨‹åºå°†å›ç­”æ–‡æœ¬æœ—è¯»å‡ºæ¥ã€‚&lt;/p&gt;
&lt;p&gt;å…³äº talkGPT4All 1.0çš„ä»‹ç»åœ¨&lt;a href=&quot;https://juejin.cn/post/7217112585802498107&quot;&gt;è¿™ç¯‡æ–‡ç« &lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;talkGPT4All 1.0çš„&lt;a href=&quot;https://www.zhihu.com/zvideo/1625779747656515584&quot;&gt;è§†é¢‘æ•ˆæœ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºGPT4Allä¸€ç›´åœ¨è¿­ä»£ï¼Œç›¸æ¯”ä¸Šä¸€ç¯‡æ–‡ç« å‘å¸ƒæ—¶(2023-04-10)å·²ç»æœ‰è¾ƒå¤§çš„æ›´æ–°ï¼Œä»Šå¤©å°†GPT4Allçš„ä¸€äº›æ›´æ–°åŒæ­¥åˆ°talkGPT4Allï¼Œç”±äºæ”¯æŒçš„æ¨¡å‹å’Œè¿è¡Œæ¨¡å¼éƒ½æœ‰è¾ƒå¤§çš„å˜åŒ–ï¼Œå› æ­¤å‘å¸ƒ talkGPT4All 2.0ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“æ¥è¯´ï¼Œ2.0ç‰ˆæœ¬ç›¸æ¯”1.0æœ‰ä¸‹é¢çš„æ›´æ–°ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæ˜¯GPT4Allæ¡†æ¶æ”¯æŒçš„è¯­è¨€æ¨¡å‹ä»1ä¸ªå¢åŠ åˆ°8ä¸ªï¼Œå¹¶ä¸”å¯ä»¥ä¸€é”®åˆ‡æ¢æ¨¡å‹ã€‚å…·ä½“çš„æ¨¡å‹æ˜¯&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;  Vicuna-7B-1.1-q4_2&lt;/li&gt;
&lt;li&gt;  Vicuna-7B-1.2-q4_2&lt;/li&gt;
&lt;li&gt;  wizardLM-7B.q4_2&lt;/li&gt;
&lt;li&gt;  GPT4All&lt;/li&gt;
&lt;li&gt;  GPT4All-J&lt;/li&gt;
&lt;li&gt;  GPT4All-J-v1.1&lt;/li&gt;
&lt;li&gt;  GPT4All-J-v1.2&lt;/li&gt;
&lt;li&gt;  GPT4All-J-v1.3&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°é™¤äº†GPT4Allç³»åˆ—çš„æ¨¡å‹ï¼Œè¿™ä¸ªæ¡†æ¶ä¹Ÿæ”¯æŒVicunaå’ŒWizardçš„æ¨¡å‹äº†ã€‚æ›´å¤šæ¨¡å‹å› ä¸ºè¯ä¹¦å’Œæ ¼å¼çš„é—®é¢˜ï¼Œè¿˜åœ¨é›†æˆä¸­ã€‚&lt;/p&gt;
&lt;p&gt;æ ¹æ®GPT4Allçš„&lt;a href=&quot;https://gpt4all.io/index.html&quot;&gt;æ–‡æ¡£&lt;/a&gt;ï¼Œä¸åŒæ¨¡å‹åœ¨benchmarkä¸Šçš„ç»“æœï¼š&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/988ae9ef513049d68d790e742f9e2139~tplv-k3u1fbpfcp-zoom-1.image&quot;&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°GPT4Allç³»åˆ—çš„æ¨¡å‹çš„æŒ‡æ ‡è¿˜æ˜¯æ¯”è¾ƒé«˜çš„ã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€ä¸ªé‡è¦æ›´æ–°æ˜¯GPT4Allå‘å¸ƒäº†æ›´æˆç†Ÿçš„PythonåŒ…ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡pip æ¥å®‰è£…ï¼Œå› æ­¤1.0ä¸­é›†æˆçš„ä¸åŒå¹³å°ä¸åŒçš„GPT4AlläºŒè¿›åˆ¶åŒ…ä¹Ÿä¸éœ€è¦äº†ã€‚é›†æˆPyPIåŒ…çš„å¥½å¤„å¤šå¤šï¼Œæ—¢å¯ä»¥æŸ¥çœ‹æºç å­¦ä¹ å†…éƒ¨çš„å®ç°ï¼Œåˆæ›´æ–¹ä¾¿å®šä½é—®é¢˜ï¼ˆä¹‹å‰çš„äºŒè¿›åˆ¶åŒ…æ²¡æ³•è°ƒè¯•å†…éƒ¨ä»£ç ï¼‰ï¼Œä¸”ä¿è¯äº†ä¸åŒå¹³å°å®‰è£…å‘½ä»¤ä¸€è‡´ï¼ˆä¹‹å‰ä¸åŒå¹³å°äºŒè¿›åˆ¶åŒ…ä¸åŒï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰ä¸€ä¸ªå˜åŒ–æ˜¯GPT4Allä¼šè‡ªåŠ¨æŒ‰éœ€ä¸‹è½½æ¨¡å‹ï¼Œå› æ­¤ç”¨æˆ·ä¸éœ€è¦æ‰‹åŠ¨ä¸‹è½½å’Œç»´æŠ¤æ¨¡å‹è·¯å¾„ã€‚åŒæ—¶å°†æ¨¡å‹ç»Ÿä¸€æ”¾ç½®åˆ°&lt;a href=&quot;https://gpt4all.io/models/&quot;&gt;https://gpt4all.io/models/&lt;/a&gt; ç›®å½•ä¸‹ï¼Œæµ‹è¯•å›½å†…æ¨¡å‹ä¸‹è½½é€Ÿåº¦ä¹Ÿå¾ˆå¿«ï¼Œå¤§å®¶ç©èµ·æ¥ä¹Ÿä¼šæ›´èˆ’æœã€‚&lt;/p&gt;
&lt;p&gt;æ ¸å¿ƒçš„æ›´æ–°å†…å®¹å°±è¿™äº›ï¼Œä¸‹é¢å¯¹talkGPT4Allçš„å®‰è£…å’Œä½¿ç”¨è¿›è¡Œè¯´æ˜ï¼Œåé¢æœ‰ç©ºä¼šæ·»åŠ ä¸€äº›å¤šä¸ªè¯­è¨€æ¨¡å‹æ•ˆæœçš„å¯¹æ¯”è§†é¢‘ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="GPT" scheme="http://vra.github.io/tags/GPT/"/>
    
    <category term="GPT4All" scheme="http://vra.github.io/tags/GPT4All/"/>
    
    <category term="LLM" scheme="http://vra.github.io/tags/LLM/"/>
    
  </entry>
  
  <entry>
    <title>mac ç¼–è¯‘é—®é¢˜è§£å†³â€”â€”building for macOS-x86_64 but attempting to link with file built for xxx</title>
    <link href="http://vra.github.io/2023/05/27/mac-ranlib-issue/"/>
    <id>http://vra.github.io/2023/05/27/mac-ranlib-issue/</id>
    <published>2023-05-26T17:17:15.000Z</published>
    <updated>2023-05-26T17:19:20.646Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ç¼–è¯‘TVMçš„ä¸€ä¸ª<a href="https://github.com/mlc-ai/relax">forkç‰ˆæœ¬</a>æ—¶ï¼Œé‡åˆ°ä¸‹é¢çš„æŠ¥é”™ï¼š</p><blockquote><p>ld: warning: ignoring file libbacktrace/lib/libbacktrace.a, building for macOS-x86_64 but attempting to link with file built for unknown-unsupported file format ( 0x21 0x3C 0x61 0x72 0x63 0x68 0x3E 0x0A<br> 0x2F 0x20 0x20 0x20 0x20 0x20 0x20 0x20 )<br>Undefined symbols for architecture x86_64:<br>  â€œ_backtrace_create_stateâ€, referenced from:<br>      __GLOBAL__sub_I_logging.cc in logging.cc.o<br>  â€œ_backtrace_fullâ€, referenced from:<br>      tvm::runtime::Backtrace() in logging.cc.o<br>  â€œ_backtrace_syminfoâ€, referenced from:<br>      tvm::runtime::(anonymous namespace)::BacktraceFullCallback(void*, unsigned long, char const*, int, char const*) in logging.cc.o<br>ld: symbol(s) not found for architecture x86_64<br>clang: error: linker command failed with exit code 1 (use -v to see invocation)<br>make[3]: *** [libtvm_runtime.dylib] Error 1<br>make[2]: *** [CMakeFiles/tvm_runtime.dir/all] Error 2<br>make[2]: *** Waiting for unfinished jobsâ€¦.</p></blockquote><p>æœç´¢äº†ä¸€ä¸‹ï¼Œå‘ç°æ ¸å¿ƒåŸå› æ˜¯Macä¸‹ranlibå‘½ä»¤é‡‡ç”¨äº†GNUç‰ˆæœ¬ï¼Œè€ŒéAppleç‰ˆæœ¬å¯¼è‡´çš„ï¼Œä¸‹é¢è¯¦ç»†å±•å¼€æŠ¥é”™åŸå› å’Œè§£å†³åŠæ³•ã€‚</p><span id="more"></span><p>åœ¨Macä¸‹ï¼Œæœ‰ä¸¤å¥—ç¼–è¯‘å·¥å…·é“¾ï¼ŒGNUçš„å’ŒAppleï¼ˆé€šè¿‡Xcodeå®‰è£…ï¼‰çš„ï¼ŒGNUçš„ä»¥<code>gcc</code>ä¸ºä»£è¡¨ï¼Œè€ŒAppleçš„åˆ™ä»¥<code>clang</code>ä¸ºä»£è¡¨ï¼Œåœ¨è¿™ä¸¤ä¸ªæ ¸å¿ƒç¼–è¯‘å·¥å…·å‘¨å›´ï¼Œåˆæœ‰å¾ˆå¤šåˆ«çš„å°çš„ç¼–è¯‘å·¥å…·ã€‚</p><p>é€šè¿‡logè¾“å‡ºå‘ç°ï¼Œç¼–è¯‘å·¥å…·ç”¨çš„æ˜¯<code>/usr/bin/cc</code>, æ‰§è¡Œ<code>/usr/bin/cc --version</code> å‘½ä»¤ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ /usr/bin/cc --version</span><br><span class="line">Apple clang version 14.0.0 (clang-1400.0.29.202)</span><br><span class="line">Target: x86_64-apple-darwin22.2.0</span><br><span class="line">Thread model: posix</span><br><span class="line">InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æ˜¯Appleçš„ç¼–è¯‘å·¥å…·é“¾Apple clangã€‚</p><p>åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œå‘ç°logä¸­æœ‰ä¸‹é¢çš„è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ibtool: install: ranlib /path/to/relax/build/libbacktrace/lib/libbacktrace.a</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°è°ƒç”¨äº†<code>ranlib</code>å‘½ä»¤æ¥ç”Ÿæˆ<code>libbacktrace.a</code>ã€‚</p><p>é€šè¿‡<code>which ranlib</code> éªŒè¯ranlibçš„è·¯å¾„ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">which</span> ranlib</span><br><span class="line">/usr/<span class="built_in">local</span>/opt/binutils/bin/ranlib</span><br><span class="line"></span><br><span class="line">$ ranlib --version</span><br><span class="line">GNU ranlib (GNU Binutils) 2.40</span><br><span class="line">Copyright (C) 2023 Free Software Foundation, Inc.</span><br><span class="line">This program is free software; you may redistribute it under the terms of</span><br><span class="line">the GNU General Public License version 3 or (at your option) any later version.</span><br><span class="line">This program has absolutely no warranty.</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œæ‰¾åˆ°çš„æ˜¯GPNç‰ˆæœ¬çš„ranlibï¼Œè€Œä¸æ˜¯è·Ÿç¼–è¯‘å·¥å…·åŒ¹é…çš„Appleçš„ranlibï¼ˆè·¯å¾„æ˜¯<code>/usr/bin/ranlib</code>)ã€‚</p><p>å¦‚æœæ˜¯Appleçš„ranlibå·¥å…·çš„è¯ï¼Œ<code>ranlib --version</code>è¾“å‡ºåº”è¯¥æ˜¯ä¸‹é¢è¿™æ ·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ranlib</span> --version</span><br><span class="line">error: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: unknown option character `-<span class="string">&#x27; in: --version</span></span><br><span class="line"><span class="string">Usage: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib [-sactfqLT] [-] archive [...]</span></span><br></pre></td></tr></table></figure><p>é‚£ä¸ºä»€ä¹ˆä¼šæœ‰ä¸¤å¥—å·¥å…·é“¾æ··åˆä½¿ç”¨å¯¼è‡´å‡ºé”™çš„é—®é¢˜ï¼Ÿè¿™æ˜¯å› ä¸ºè·¯å¾„è®¾ç½®ä¼˜å…ˆçº§çš„åŸå› ï¼Œåœ¨PATHä¸­ï¼Œ<code>/usr/local/opt/binutils/bin</code>åœ¨<code>/usr/bin</code>çš„å‰é¢ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="variable">$PATH</span></span><br><span class="line">...:/usr/<span class="built_in">local</span>/opt/binutils/bin:/usr/bin:...</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥åœ¨æœç´¢å¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼Œå…ˆæ‰¾åˆ°äº†GNUçš„ranlibï¼Œè€Œè¿™ä¸ªåˆä¸Appleçš„ç¼–è¯‘å·¥å…·é“¾ä¸å…¼å®¹ã€‚å¯¼è‡´ç¼–è¯‘å‡ºé”™ã€‚</p><p>é‚£<code>ranlib</code>æ˜¯å¹²ä»€ä¹ˆç”¨çš„å‘¢ï¼Ÿæ ¹æ®ChatGPTï¼Œ ranlibåŠŸèƒ½å¦‚ä¸‹ï¼š</p><blockquote><p>ranlibæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºåœ¨é™æ€åº“ä¸­åˆ›å»ºç´¢å¼•ï¼ˆä¹Ÿç§°ä¸ºç¬¦å·è¡¨ï¼‰ã€‚ç´¢å¼•æä¾›é™æ€åº“ä¸­æ‰€æœ‰ç¬¦å·ï¼ˆå‡½æ•°ã€å˜é‡ç­‰ï¼‰çš„åˆ—è¡¨ã€‚å®ƒå¸®åŠ©ç¼–è¯‘å™¨å’Œé“¾æ¥å™¨åœ¨é“¾æ¥æ—¶æ›´å¿«åœ°æŸ¥æ‰¾å’Œè§£æç¬¦å·ã€‚å½“ä¸€ä¸ªç¨‹åºéœ€è¦é“¾æ¥é™æ€åº“æ—¶ï¼Œé“¾æ¥å™¨ä¼šä½¿ç”¨ranlibåˆ›å»ºçš„ç´¢å¼•æ¥ç¡®å®šé™æ€åº“ä¸­åŒ…å«çš„ç¬¦å·ï¼Œä»¥ä¾¿æ­£ç¡®åœ°é“¾æ¥ç¨‹åºã€‚</p></blockquote><p>å¯ä»¥çœ‹åˆ°ï¼Œranlibå¯¹äºç¼–è¯‘é™æ€åº“æ¥è¯´ï¼Œæ˜¯å¿…ä¸å¯å°‘çš„ï¼ˆä¸<code>ar -s</code>å®Œå…¨ç­‰æ•ˆï¼‰ã€‚</p><p>å…¶å®æˆ‘ä¸è®°å¾—åœ¨PATHä¸­æ·»åŠ è¿‡<code>/usr/local/opt/binutils/bin</code>è¿™ä¸ªç›®å½•ï¼Œåº”è¯¥æ˜¯å®‰è£…æŸäº›åŒ…åè‡ªåŠ¨æ›´æ–°çš„ã€‚</p><p>é‚£è¿™ä¸ªé—®é¢˜è¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿé€šè¿‡ä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬ä¹Ÿèƒ½å‘ç°å…¶å®è§£å†³åŠæ³•ä¹Ÿæ¯”è¾ƒç›´è§‚ï¼Œæ€»ä½“æ¥è¯´æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯ä¿®æ”¹PATHä¸­ä¸¤ä¸ªç›®å½•çš„å¯»æ‰¾ä¼˜å…ˆçº§ï¼Œä¿è¯å…ˆæ‰¾åˆ°çš„æ˜¯Appleçš„å·¥å…·ï¼Œä¹Ÿå°±æ˜¯<code>/usr/bin</code>ç›®å½•åœ¨<code>/usr/local/opt</code> å‰é¢ï¼›å¦ä¸€ç§æ˜¯ç›´æ¥å¸è½½GNUçš„å·¥å…·<code>binutils</code>ï¼Œè¿™æ ·å°±ä¸ä¼šæœ‰å†²çªã€‚</p><p>åœ¨è¿™é‡Œæˆ‘é€‰æ‹©æ‰§è¡Œç¬¬äºŒç§ï¼Œå…·ä½“å‘½ä»¤ä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew uninstall binutils</span><br></pre></td></tr></table></figure><p>ç„¶åå†æ£€æŸ¥<code>ranlib --version</code> å‘½ä»¤çš„è¾“å‡ºï¼Œç¡®è®¤æ˜¯Appleçš„å·¥å…·é“¾åå†<code>make clean</code>ï¼Œé‡æ–°ç¼–è¯‘å³å¯ã€‚</p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ol><li><a href="https://stackoverflow.com/a/72904009">https://stackoverflow.com/a/72904009</a></li><li><a href="https://github.com/bitcoin/bitcoin/issues/20825#issuecomment-753444519">https://github.com/bitcoin/bitcoin/issues/20825#issuecomment-753444519</a></li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨ç¼–è¯‘TVMçš„ä¸€ä¸ª&lt;a href=&quot;https://github.com/mlc-ai/relax&quot;&gt;forkç‰ˆæœ¬&lt;/a&gt;æ—¶ï¼Œé‡åˆ°ä¸‹é¢çš„æŠ¥é”™ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ld: warning: ignoring file libbacktrace/lib/libbacktrace.a, building for macOS-x86_64 but attempting to link with file built for unknown-unsupported file format ( 0x21 0x3C 0x61 0x72 0x63 0x68 0x3E 0x0A&lt;br&gt; 0x2F 0x20 0x20 0x20 0x20 0x20 0x20 0x20 )&lt;br&gt;Undefined symbols for architecture x86_64:&lt;br&gt;  â€œ_backtrace_create_stateâ€, referenced from:&lt;br&gt;      __GLOBAL__sub_I_logging.cc in logging.cc.o&lt;br&gt;  â€œ_backtrace_fullâ€, referenced from:&lt;br&gt;      tvm::runtime::Backtrace() in logging.cc.o&lt;br&gt;  â€œ_backtrace_syminfoâ€, referenced from:&lt;br&gt;      tvm::runtime::(anonymous namespace)::BacktraceFullCallback(void*, unsigned long, char const*, int, char const*) in logging.cc.o&lt;br&gt;ld: symbol(s) not found for architecture x86_64&lt;br&gt;clang: error: linker command failed with exit code 1 (use -v to see invocation)&lt;br&gt;make[3]: *** [libtvm_runtime.dylib] Error 1&lt;br&gt;make[2]: *** [CMakeFiles/tvm_runtime.dir/all] Error 2&lt;br&gt;make[2]: *** Waiting for unfinished jobsâ€¦.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æœç´¢äº†ä¸€ä¸‹ï¼Œå‘ç°æ ¸å¿ƒåŸå› æ˜¯Macä¸‹ranlibå‘½ä»¤é‡‡ç”¨äº†GNUç‰ˆæœ¬ï¼Œè€ŒéAppleç‰ˆæœ¬å¯¼è‡´çš„ï¼Œä¸‹é¢è¯¦ç»†å±•å¼€æŠ¥é”™åŸå› å’Œè§£å†³åŠæ³•ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="æ€»ç»“" scheme="http://vra.github.io/tags/%E6%80%BB%E7%BB%93/"/>
    
    <category term="macOS" scheme="http://vra.github.io/tags/macOS/"/>
    
    <category term="GNU" scheme="http://vra.github.io/tags/GNU/"/>
    
    <category term="Apple" scheme="http://vra.github.io/tags/Apple/"/>
    
    <category term="XCode" scheme="http://vra.github.io/tags/XCode/"/>
    
    <category term="ranlib" scheme="http://vra.github.io/tags/ranlib/"/>
    
    <category term="binutils" scheme="http://vra.github.io/tags/binutils/"/>
    
    <category term="TVM" scheme="http://vra.github.io/tags/TVM/"/>
    
  </entry>
  
  <entry>
    <title>ç”¨ Material for MkDocs æ¥ç”Ÿæˆä¸“ä¸šçš„æŠ€æœ¯æ–‡æ¡£</title>
    <link href="http://vra.github.io/2023/05/17/mkdocs-material-tutorial/"/>
    <id>http://vra.github.io/2023/05/17/mkdocs-material-tutorial/</id>
    <published>2023-05-17T11:31:37.000Z</published>
    <updated>2023-05-17T11:37:34.893Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1. æ¦‚è¿°"></a>1. æ¦‚è¿°</h2><p>å¯¹äºç¨‹åºå‘˜æ¥è¯´ï¼Œå†™æŠ€æœ¯æ–‡æ¡£æ˜¯ä¸€é¡¹å¿…å¤‡çš„æŠ€èƒ½ã€‚ç”±äºGitHubå’ŒMarkdownæ ¼å¼çš„æ™®åŠï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¯ä»¥ç”¨markdownæ¥ç®€ä¾¿åœ°å†™å‡ºæŠ€æœ¯æ–‡æ¡£ï¼Œå¹¶ä¸” é€šè¿‡GitHub Pagesç­‰å·¥å…·å¿«é€Ÿåœ°è¿›è¡ŒæŠ€æœ¯æ–‡æ¡£çš„éƒ¨ç½²ã€‚</p><p>è™½ç„¶GItHub Pagesé»˜è®¤æ”¯æŒé™æ€æ–‡æ¡£æ¡†æ¶<a href="https://jekyllrb.com/">Jekyll</a>ï¼Œä¹ŸåŒ…å«ä¸€äº›ç®€å•çš„<a href="https://pages.github.com/themes/">ä¸»é¢˜</a>ï¼Œä½†å¯¹äºæ–‡æ¡£å’Œæ•™ç¨‹æ¯”è¾ƒå¤šçš„é¡¹ç›®æ¥è¯´ï¼Œä½¿ç”¨GitHub Pagesçš„é»˜è®¤éƒ¨ç½²å·¥å…·è¿˜ä¸å¤Ÿç”¨ï¼Œä¸»è¦ä½“ç°åœ¨ä¸‹é¢å‡ ä¸ªæ–¹é¢ï¼š</p><ul><li>Markdownæœ¬èº«æ”¯æŒçš„è¯­æ³•æ¯”è¾ƒç®€å•ï¼Œä¸€äº›å¤æ‚çš„åƒWarningç­‰æç¤ºæ²¡æ³•ç›´æ¥ç”¨Pagesçš„é»˜è®¤ä¸»é¢˜æ¥å®ç°</li><li>Pages é»˜è®¤æ˜¾ç¤ºçš„æ˜¯å•é¡µæ–‡æ¡£ï¼Œæ²¡æœ‰ä¾§è¾¹æ ã€å¯¼èˆªæ ç­‰å·¥å…·</li><li>Pages é»˜è®¤ä¸»é¢˜æ— æ³•æœç´¢æ–‡æ¡£å†…å®¹</li><li>Pages ä¸æ”¯æŒé€‰æ‹©<code>Linux</code>æˆ–<code>Windows</code> åæ˜¾ç¤ºä¸åŒæ‰§è¡Œè¯­å¥çš„åŠŸèƒ½</li><li>â€¦</li></ul><p><a href="https://squidfunk.github.io/mkdocs-material/">Material for MkDocs</a> æ˜¯ <a href="https://www.mkdocs.org/">MkDocs</a>çš„ä¸€ä¸ªä¸»é¢˜é…ç½®ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªåŠŸèƒ½é½å…¨çš„é™æ€ç½‘ç«™ç”Ÿæˆå·¥å…·ï¼Œèƒ½å¤Ÿè§£å†³ä¸Šé¢æåˆ°çš„GitHub Pagesçš„é—®é¢˜ã€‚</p><p>Material for MkDocs ä½¿ç”¨å¹¿æ³›ï¼Œä¸‹é¢æ˜¯ä¸€äº›å¤§å…¬å¸å’ŒçŸ¥åå¼€æºé¡¹ç›®çš„ä½¿ç”¨ä¾‹å­ï¼š</p><ul><li><a href="https://aws.github.io/copilot-cli/">AWS Copilot CLI </a></li><li><a href="https://google.github.io/accompanist/">Google Accompanist</a></li><li><a href="https://microsoft.github.io/code-with-engineering-playbook/">MicroSoft Code With Engineering Playbook</a></li><li><a href="https://mozillafoundation.github.io/engineering-handbook/">Mozilla Foundation Engineering Handbook</a></li><li><a href="https://netflix.github.io/titus/">Netflix Titus</a></li><li><a href="https://docs.infra.centos.org/">CentOS Infra docs</a></li><li><a href="https://www.electron.build/">electron-builder</a></li><li><a href="https://kops.sigs.k8s.io/">Kubernetes</a></li></ul><p>è™½ç„¶æˆ‘è¿˜æ²¡æœ‰æ¯”è¾ƒå¤æ‚çš„å¼€æºé¡¹ç›®éœ€è¦ç”¨mkdocs-materialæ¥ç®¡ç†æ–‡æ¡£ï¼Œä½†çœ‹åˆ°GitHub Pagesçš„ä¸€äº›é™åˆ¶ï¼Œæœ€è¿‘æœ‰ç©ºè¿˜æ˜¯å­¦äº†ä¸€ä¸‹è¿™ä¸ªå·¥å…·ï¼Œä»¥å¤‡åç»­é¡¹ç›®ä¸­ä½¿ç”¨ã€‚è¿™é‡Œåšä¸€äº›ç®€å•è®°å½•ï¼Œæ–¹ä¾¿ä»¥åæŸ¥æ‰¾ã€‚</p><p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼ŒMaterial for MkDocs æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„å·¥å…·ï¼Œå¾ˆå¤šé…ç½®é¡¹è¿™é‡Œæ²¡æœ‰æåˆ°ï¼Œæ ¹æ®éœ€è¦åœ¨å®˜æ–¹<a href="https://squidfunk.github.io/mkdocs-material/setup/">Setup</a>æ–‡æ¡£ä¸­æŸ¥çœ‹ä½¿ç”¨è¯´æ˜ã€‚</p><p>å¦å¤–ä¸€ç§å­¦ä¹ é…ç½®çš„æ–¹å¼æ˜¯ç›´æ¥æŸ¥çœ‹ä¸Šé¢æåˆ°çš„å¼€æºé¡¹ç›®æºç æ ¹ç›®å½•ä¸‹çš„<code>mkdocs.yml</code>æ–‡ä»¶ï¼Œå¤åˆ¶è¿™ä¸ªæ–‡ä»¶è¿‡å»ï¼Œå°±èƒ½å¾—åˆ°ç±»ä¼¼çš„å¸ƒå±€æ•ˆæœã€‚</p><p>è¿™ä¸ªæ•™ç¨‹é‡Œé¢çš„ç¤ºä¾‹é¡µé¢ï¼š<a href="https://vra.github.io/mkdocs-material-example/">https://vra.github.io/mkdocs-material-example/</a><br>ç¤ºä¾‹é¡µé¢çš„é…ç½®æ–‡ä»¶ï¼š<a href="https://github.com/vra/mkdocs-material-example/blob/main/mkdocs.yml">https://github.com/vra/mkdocs-material-example/blob/main/mkdocs.yml</a></p><span id="more"></span><h2 id="2-1-å®‰è£…"><a href="#2-1-å®‰è£…" class="headerlink" title="2.1 å®‰è£…"></a>2.1 å®‰è£…</h2><p>å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>pip</code> æ¥å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install mkdocs-material</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdocs -h</span><br></pre></td></tr></table></figure><p>å…¶ä»–ä»dockerå®‰è£…ã€ä»GitHubå®‰è£…çš„æ–¹å¼å‚è€ƒ<a href="https://squidfunk.github.io/mkdocs-material/getting-started/#with-docker">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><h3 id="2-2-ä½¿ç”¨"><a href="#2-2-ä½¿ç”¨" class="headerlink" title="2.2 ä½¿ç”¨"></a>2.2 ä½¿ç”¨</h3><p>mkdocs-material çš„ä½¿ç”¨å‘½ä»¤æ¯”è¾ƒç®€å•ï¼Œæ¦‚æ‹¬æ¥è¯´å°±æ˜¯ä¸‰æ¿æ–§ï¼š</p><ol><li><code>mkdocs new .</code>ï¼š åœ¨å½“å‰ç›®å½•ç”Ÿæˆ<code>docs</code>ç›®å½•å’Œ<code>mkdocs.yml</code> é…ç½®æ–‡ä»¶</li><li><code>mkdocs serve</code>ï¼š åœ¨æœ¬åœ°è¿è¡Œæ–‡æ¡£ç”ŸæˆæœåŠ¡ï¼Œå¯åœ¨æµè§ˆå™¨ä¸­è®¿é—®<code>localhost:8000</code>æŸ¥çœ‹æ–‡æ¡£çš„æ•ˆæœ</li><li><code>mkdocs build</code>ï¼š éå¿…éœ€ï¼Œåœ¨<code>sites</code> ç›®å½•ä¸­ç”Ÿæˆæœ€ç»ˆçš„HTMLæ–‡ä»¶</li></ol><p>ç”±äºå‘½ä»¤æ¯”è¾ƒç®€å•ï¼Œæ²¡æœ‰ä»€ä¹ˆå¤ªå¤šä¸œè¥¿ï¼Œå› è€Œæ ¸å¿ƒè¦åšçš„äº‹æƒ…å…¶å®æ˜¯ï¼š</p><ul><li>å†™markdown æ ¼å¼çš„æ–‡æ¡£æ–‡ä»¶</li><li>ä¿®æ”¹é…ç½®æ–‡ä»¶<code>mkdocs.yml</code></li></ul><p>åœ¨<code>mkdocs serve</code> è¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œæ›´æ–°å®Œ <code>mkdocs.yml</code>é…ç½®æ–‡ä»¶åï¼Œæ–‡æ¡£ç”Ÿæˆæ•ˆæœå®æ—¶æ›´æ–°ã€‚</p><h3 id="2-3-ä¸Šä¼ æ–‡æ¡£åˆ°-GitHub-Pages"><a href="#2-3-ä¸Šä¼ æ–‡æ¡£åˆ°-GitHub-Pages" class="headerlink" title="2.3 ä¸Šä¼ æ–‡æ¡£åˆ° GitHub Pages"></a>2.3 ä¸Šä¼ æ–‡æ¡£åˆ° GitHub Pages</h3><p>mkdocs-material ä¸€ä¸ªå¾ˆæ£’çš„ç‰¹æ€§æ˜¯å¯ä»¥ä¸€é”®å°†ä»£ç éƒ¨ç½²åˆ°GIthub Pagesä¸Šï¼Œå¹¶ä¸”é€šè¿‡GitHub Actionsé…ç½®ï¼ŒPush ä»£ç æ—¶è‡ªåŠ¨æ›´æ–°æ–‡æ¡£ã€‚<br>å‡å¦‚ä½ çš„GitHub ä»“åº“åœ°å€æ˜¯<code>https://github.com/user/repo</code>ï¼Œé‚£å®Œæˆé…ç½®åä½ å°±å¯ä»¥åœ¨<code>https://user.github.io/repo</code> ç½‘å€æŸ¥çœ‹ä½ çš„mkdocs-material æ–‡æ¡£äº†ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œå‡è®¾ä½ å·²ç»åˆ›å»ºäº†ä¸€ä¸ªGit ä»“åº“ï¼Œéœ€è¦åšä¸‹é¢çš„äº‹æƒ…ï¼š</p><ol><li>å°†<code>mkdocs.yml</code> å’Œ<code>docs</code> ç›®å½•æäº¤åˆ°Gitä»“åº“</li><li>å¢åŠ GitHub Action é…ç½®æ–‡ä»¶<code>.github/workflows/ci.yml</code>ï¼Œå†™å…¥ä¸‹é¢çš„å†…å®¹å¹¶æäº¤åˆ°GitHub:<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">ci</span> </span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">master</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line"><span class="attr">permissions:</span></span><br><span class="line">  <span class="attr">contents:</span> <span class="string">write</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">deploy:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-python@v4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">python-version:</span> <span class="number">3.</span><span class="string">x</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">echo</span> <span class="string">&quot;cache_id=$(date --utc &#x27;+%V&#x27;)&quot;</span> <span class="string">&gt;&gt;</span> <span class="string">$GITHUB_ENV</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/cache@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">key:</span> <span class="string">mkdocs-material-$&#123;&#123;</span> <span class="string">env.cache_id</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">.cache</span></span><br><span class="line">          <span class="attr">restore-keys:</span> <span class="string">|</span></span><br><span class="line"><span class="string">            mkdocs-material-</span></span><br><span class="line"><span class="string"></span>      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">pip</span> <span class="string">install</span> <span class="string">mkdocs-material</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">mkdocs</span> <span class="string">gh-deploy</span> <span class="string">--force</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li>åœ¨GitHubä»“åº“çš„<code>Settings</code> -&gt; <code>Pages</code> -&gt; <code>Build and deployment</code> éƒ¨åˆ†ï¼ŒSource é€‰é¡¹é€‰æ‹©â€Deploy from a branchâ€, Branch é€‰æ‹©<code>gh-pages</code>, folderé€‰æ‹©<code>/(root)</code><br>ç»è¿‡è¿™ä¸ªé…ç½®åï¼Œæ¯æ¬¡å‘<code>master</code> æˆ–<code>main</code> åˆ†æ”¯pushä»£ç ï¼Œä¼šè‡ªåŠ¨æ›´æ–°<code>user.github.io/repo</code>ä¸‹çš„æ–‡æ¡£ã€‚</li></ol>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;1-æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#1-æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;1. æ¦‚è¿°&quot;&gt;&lt;/a&gt;1. æ¦‚è¿°&lt;/h2&gt;&lt;p&gt;å¯¹äºç¨‹åºå‘˜æ¥è¯´ï¼Œå†™æŠ€æœ¯æ–‡æ¡£æ˜¯ä¸€é¡¹å¿…å¤‡çš„æŠ€èƒ½ã€‚ç”±äºGitHubå’ŒMarkdownæ ¼å¼çš„æ™®åŠï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¯ä»¥ç”¨markdownæ¥ç®€ä¾¿åœ°å†™å‡ºæŠ€æœ¯æ–‡æ¡£ï¼Œå¹¶ä¸” é€šè¿‡GitHub Pagesç­‰å·¥å…·å¿«é€Ÿåœ°è¿›è¡ŒæŠ€æœ¯æ–‡æ¡£çš„éƒ¨ç½²ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶GItHub Pagesé»˜è®¤æ”¯æŒé™æ€æ–‡æ¡£æ¡†æ¶&lt;a href=&quot;https://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt;ï¼Œä¹ŸåŒ…å«ä¸€äº›ç®€å•çš„&lt;a href=&quot;https://pages.github.com/themes/&quot;&gt;ä¸»é¢˜&lt;/a&gt;ï¼Œä½†å¯¹äºæ–‡æ¡£å’Œæ•™ç¨‹æ¯”è¾ƒå¤šçš„é¡¹ç›®æ¥è¯´ï¼Œä½¿ç”¨GitHub Pagesçš„é»˜è®¤éƒ¨ç½²å·¥å…·è¿˜ä¸å¤Ÿç”¨ï¼Œä¸»è¦ä½“ç°åœ¨ä¸‹é¢å‡ ä¸ªæ–¹é¢ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Markdownæœ¬èº«æ”¯æŒçš„è¯­æ³•æ¯”è¾ƒç®€å•ï¼Œä¸€äº›å¤æ‚çš„åƒWarningç­‰æç¤ºæ²¡æ³•ç›´æ¥ç”¨Pagesçš„é»˜è®¤ä¸»é¢˜æ¥å®ç°&lt;/li&gt;
&lt;li&gt;Pages é»˜è®¤æ˜¾ç¤ºçš„æ˜¯å•é¡µæ–‡æ¡£ï¼Œæ²¡æœ‰ä¾§è¾¹æ ã€å¯¼èˆªæ ç­‰å·¥å…·&lt;/li&gt;
&lt;li&gt;Pages é»˜è®¤ä¸»é¢˜æ— æ³•æœç´¢æ–‡æ¡£å†…å®¹&lt;/li&gt;
&lt;li&gt;Pages ä¸æ”¯æŒé€‰æ‹©&lt;code&gt;Linux&lt;/code&gt;æˆ–&lt;code&gt;Windows&lt;/code&gt; åæ˜¾ç¤ºä¸åŒæ‰§è¡Œè¯­å¥çš„åŠŸèƒ½&lt;/li&gt;
&lt;li&gt;â€¦&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://squidfunk.github.io/mkdocs-material/&quot;&gt;Material for MkDocs&lt;/a&gt; æ˜¯ &lt;a href=&quot;https://www.mkdocs.org/&quot;&gt;MkDocs&lt;/a&gt;çš„ä¸€ä¸ªä¸»é¢˜é…ç½®ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªåŠŸèƒ½é½å…¨çš„é™æ€ç½‘ç«™ç”Ÿæˆå·¥å…·ï¼Œèƒ½å¤Ÿè§£å†³ä¸Šé¢æåˆ°çš„GitHub Pagesçš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;Material for MkDocs ä½¿ç”¨å¹¿æ³›ï¼Œä¸‹é¢æ˜¯ä¸€äº›å¤§å…¬å¸å’ŒçŸ¥åå¼€æºé¡¹ç›®çš„ä½¿ç”¨ä¾‹å­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://aws.github.io/copilot-cli/&quot;&gt;AWS Copilot CLI &lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://google.github.io/accompanist/&quot;&gt;Google Accompanist&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://microsoft.github.io/code-with-engineering-playbook/&quot;&gt;MicroSoft Code With Engineering Playbook&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://mozillafoundation.github.io/engineering-handbook/&quot;&gt;Mozilla Foundation Engineering Handbook&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://netflix.github.io/titus/&quot;&gt;Netflix Titus&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.infra.centos.org/&quot;&gt;CentOS Infra docs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.electron.build/&quot;&gt;electron-builder&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://kops.sigs.k8s.io/&quot;&gt;Kubernetes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è™½ç„¶æˆ‘è¿˜æ²¡æœ‰æ¯”è¾ƒå¤æ‚çš„å¼€æºé¡¹ç›®éœ€è¦ç”¨mkdocs-materialæ¥ç®¡ç†æ–‡æ¡£ï¼Œä½†çœ‹åˆ°GitHub Pagesçš„ä¸€äº›é™åˆ¶ï¼Œæœ€è¿‘æœ‰ç©ºè¿˜æ˜¯å­¦äº†ä¸€ä¸‹è¿™ä¸ªå·¥å…·ï¼Œä»¥å¤‡åç»­é¡¹ç›®ä¸­ä½¿ç”¨ã€‚è¿™é‡Œåšä¸€äº›ç®€å•è®°å½•ï¼Œæ–¹ä¾¿ä»¥åæŸ¥æ‰¾ã€‚&lt;/p&gt;
&lt;p&gt;éœ€è¦è¯´æ˜çš„æ˜¯ï¼ŒMaterial for MkDocs æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„å·¥å…·ï¼Œå¾ˆå¤šé…ç½®é¡¹è¿™é‡Œæ²¡æœ‰æåˆ°ï¼Œæ ¹æ®éœ€è¦åœ¨å®˜æ–¹&lt;a href=&quot;https://squidfunk.github.io/mkdocs-material/setup/&quot;&gt;Setup&lt;/a&gt;æ–‡æ¡£ä¸­æŸ¥çœ‹ä½¿ç”¨è¯´æ˜ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–ä¸€ç§å­¦ä¹ é…ç½®çš„æ–¹å¼æ˜¯ç›´æ¥æŸ¥çœ‹ä¸Šé¢æåˆ°çš„å¼€æºé¡¹ç›®æºç æ ¹ç›®å½•ä¸‹çš„&lt;code&gt;mkdocs.yml&lt;/code&gt;æ–‡ä»¶ï¼Œå¤åˆ¶è¿™ä¸ªæ–‡ä»¶è¿‡å»ï¼Œå°±èƒ½å¾—åˆ°ç±»ä¼¼çš„å¸ƒå±€æ•ˆæœã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªæ•™ç¨‹é‡Œé¢çš„ç¤ºä¾‹é¡µé¢ï¼š&lt;a href=&quot;https://vra.github.io/mkdocs-material-example/&quot;&gt;https://vra.github.io/mkdocs-material-example/&lt;/a&gt;&lt;br&gt;ç¤ºä¾‹é¡µé¢çš„é…ç½®æ–‡ä»¶ï¼š&lt;a href=&quot;https://github.com/vra/mkdocs-material-example/blob/main/mkdocs.yml&quot;&gt;https://github.com/vra/mkdocs-material-example/blob/main/mkdocs.yml&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    
    <category term="Docs" scheme="http://vra.github.io/tags/Docs/"/>
    
    <category term="Markdown" scheme="http://vra.github.io/tags/Markdown/"/>
    
  </entry>
  
  <entry>
    <title>Rye:ä¸€ä¸ªå®éªŒæ€§è´¨çš„PythonåŒ…ç®¡ç†ç³»ç»Ÿ</title>
    <link href="http://vra.github.io/2023/05/17/rye-intro/"/>
    <id>http://vra.github.io/2023/05/17/rye-intro/</id>
    <published>2023-05-17T02:08:32.000Z</published>
    <updated>2023-05-17T02:17:20.438Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://mitsuhiko.github.io/rye/">Rye</a> æ˜¯<a href="https://flask.palletsprojects.com/en/2.3.x/">Flask</a>çš„ä½œè€…<a href="https://github.com/mitsuhiko">Armin Ronacher</a>æœ€è¿‘æ¨å‡ºçš„ä¸€ä¸ªå®éªŒæ€§è´¨çš„PythonåŒ…ç®¡ç†ç³»ç»Ÿï¼Œç›®çš„æ˜¯è§£å†³PythonåŒ…ç®¡ç†ç›®å‰é¢ä¸´çš„å·¥å…·é“¾ç¢ç‰‡åŒ–çš„é—®é¢˜ã€‚</p><p>å¤§å®¶çŸ¥é“ï¼ŒPythonç›®å‰çš„åŒ…ç®¡ç†ç³»ç»Ÿå¾ˆå¤šï¼ŒåŒ…æ‹¬ poetry, pip, pipenv, pyenv, venv, virtualenv, pdm, hatch ç­‰ç­‰ï¼Œå®ƒä»¬éƒ½æ˜¯ä¼˜ç§€çš„å·¥å…·ï¼Œæå‡ºæ—¶éƒ½æ˜¯è§£å†³äº†ä¸€å®šçš„é—®é¢˜ï¼Œä½†æ²¡æœ‰å“ªä¸ªå·¥å…·èƒ½å¤Ÿåšåˆ°ä¸»æµï¼Œå› æ­¤ä¹Ÿå¢åŠ äº†ç³»ç»Ÿçš„ç¢ç‰‡åŒ–ç¨‹åº¦ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œcondaç­‰å·¥å…·èƒ½æä¾›ä¸åŒç‰ˆæœ¬çš„ Pythonï¼Œç®¡ç†ä¸åŒçš„ç¯å¢ƒï¼Œä½†æ¯ä¸ªç¯å¢ƒçš„ Python ä¸æ˜¯å…±äº«çš„ï¼Œç¯å¢ƒåˆ›å»ºä¸€å¤šï¼Œç¯å¢ƒç›®å½•å°±å˜å¾—å¾ˆå¤§ï¼Œä¸”å†…éƒ¨æœºåˆ¶å¾ˆä¸é€æ˜ï¼Œæœ‰æ—¶ä¹Ÿä¼šé‡åˆ°å†²çªæ²¡æ³•è§£å†³çš„é—®é¢˜ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼ŒPython åœ¨Linux/macOSä¸Šçš„å®‰è£…ä¹Ÿé¢ä¸´ä¸€äº›é—®é¢˜ï¼Œä¾‹å¦‚ç”¨åŒ…ç®¡ç†å™¨å®‰è£…çš„  Pythonå’Œç”¨æˆ·æ‰‹åŠ¨å®‰è£…çš„ Python æœ‰çš„æ—¶å€™ä¼šæ··æ·†ï¼Œå¯¼è‡´ä¸€äº›æ··ä¹±ï¼Œä¾‹å¦‚åœ¨ Fedora ä¸Šï¼Œç”¨<code>pip install</code> å®‰è£…åŒ…å¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿçš„åŒ…ç®¡ç†å‘½ä»¤<code>dnf</code> å‡ºé”™ã€‚<a href="https://peps.python.org/pep-0668">PEP 668</a>å°è¯•å¯¹è¿™äº›é—®é¢˜ç»™å‡ºä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œä½†ä¹Ÿéœ€è¦ä¸åŒçš„ç³»ç»Ÿæ¥æ”¯æŒï¼Œç›®å‰çœ‹è¿˜ä»»é‡é“è¿œã€‚</p><p>ç”±äºArminä¹Ÿæ˜¯ä¸€ä¸ªRust å¼€å‘è€…ï¼Œè€ŒRuståŸºäºæ ‡å‡†åŒ–çš„<code>rustup</code>å’Œ<code>cargo</code>ä¸¤ä¸ªå·¥å…·ï¼Œé…åˆé…ç½®æ–‡ä»¶æ¥è¿›è¡ŒåŒ…ç®¡ç†ï¼Œç›®å‰åšçš„æ¯”è¾ƒå¥½ï¼Œæ²¡æœ‰Pythoné¢ä¸´çš„ç¢ç‰‡åŒ–é—®é¢˜ã€‚å—Rustçš„å¯å‘ï¼Œä½œè€…æå‡ºäº†Ryeï¼Œå¹¶ä¸”æœŸæœ›èƒ½å¤Ÿå¯å‘Pythonç¤¾åŒºæå‡ºç±»ä¼¼Rustçš„æ ‡å‡†åŒ…ç®¡ç†å·¥å…·ã€‚</p><p>å…·ä½“æ¥è¯´ï¼ŒRye æå‡ºäº†ä¸€äº›è§£å†³è¿™äº›é—®é¢˜çš„æ€è·¯ï¼š</p><ul><li>æå‡ºä¸€ä¸ªworkspaceçš„æ¦‚å¿µï¼Œworkspaceç±»ä¼¼ä¸€ä¸ªé¡¹ç›®ç›®å½•ï¼Œæˆ–è€…ä¸€ä¸ªgitä»“åº“ï¼Œä¸€ä¸ªworkspaceä¸‹åªæœ‰ä¸€ä¸ªPythonç‰ˆæœ¬ï¼Œä¸åŒworkspace Pythonç‰ˆæœ¬ç›¸äº’éš”ç¦»ï¼Œæ¯ä¸ªé¡¹ç›®é‡‡ç”¨<code>pyproject.toml</code>æ¥è¿›è¡Œé…ç½®</li><li>ä¸ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„Pythonï¼Œç›¸ååœ°ï¼Œåœ¨æ¯ä¸ªé¡¹ç›®ç›®å½•çš„ä¸­ä¸‹è½½ä¸€ä¸ªstandaloneçš„pythonï¼Œè§£å†³ä¸åŒç‰ˆæœ¬çš„å†²çªé—®é¢˜</li><li>ä¸æš´éœ²pipå‘½ä»¤ï¼Œé€šè¿‡<code>rye add</code> + <code>rye sync</code> æ¥ç®¡ç†åŒ…çš„ä¾èµ–ï¼Œé¿å…åŒ…Aå’ŒåŒ…Bä¾èµ–ä¸åŒç‰ˆæœ¬çš„åŒ…Cè€Œå¯¼è‡´çš„ä¸å…¼å®¹é—®é¢˜</li><li>åŒºåˆ†å¼€å‘ç¯å¢ƒå’Œæ­£å¼ç¯å¢ƒï¼Œå› ä¸ºä¸€äº›åŒ…åœ¨å¼€å‘æ—¶ä¼šç”¨åˆ°ä¸€äº›è°ƒè¯•å·¥å…·ï¼Œä½†ä½œä¸ºç¬¬ä¸‰æ–¹åº“è¢«å¼•å…¥çš„æ—¶å€™å¹¶ä¸éœ€è¦</li><li>æ”¯æŒimportæœ¬åœ°workspaceä½œä¸ºç¬¬ä¸‰æ–¹åº“åŒ…</li></ul><p>ä½†åŒæ—¶ä¹Ÿæœ‰ä¸€ä¸ªé—®é¢˜ï¼šryeä¼šä¸ä¼šæ˜¯å¦ä¸€ä¸ªåšä¸åˆ°ä¸»æµçš„PythonåŒ…ç®¡ç†ç³»ç»Ÿï¼Œä»è€Œè¿›ä¸€æ­¥å¢åŠ PythonåŒ…ç®¡ç†çš„ç¢ç‰‡åŒ–å‘¢ï¼Ÿä½œè€…ä¹Ÿæœ‰è¿™ä¸ªè€ƒè™‘ï¼Œå› æ­¤å†™äº†ä¸€ä¸ªè®¨è®ºå¸– <a href="https://github.com/mitsuhiko/rye/discussions/6">Should Rye Exist?</a>æ¥è®¨è®ºè¿™ä¸ªé—®é¢˜ï¼ŒåŒæ—¶å…³äºRyeçš„è®¾è®¡åˆè¡·ï¼Œå¯ä»¥å‚è€ƒ<a href="https://mitsuhiko.github.io/rye/philosophy/">è¿™é‡Œ</a>ä½œè€…çš„æ€è€ƒã€‚</p><p>ä¸ªäººè§‚ç‚¹ï¼šRyeçš„å‡ºç°ç»™Pythonç¤¾åŒºå¼•å…¥äº†ä¸€äº›æ–°é²œçš„è§£å†³ç°æœ‰é—®é¢˜çš„æ€è·¯ã€‚ä½¿ç”¨Ryeä¸€æ®µæ—¶é—´åï¼Œå‘ç°è‡³å°‘ä½¿ç”¨standalone çš„Pythonç‰ˆæœ¬æ˜¯ä¸€ä¸ªè§£å†³å†²çªçš„å¥½çš„æ–¹å¼ã€‚é€šè¿‡å‡ ä¸ªç®€å•çš„å‘½ä»¤æ¥è§£å†³ç‰ˆæœ¬ç®¡ç†çš„é—®é¢˜æ˜¯æ¯”è¾ƒç›´è§‚çš„ï¼Œæå‡ºRyeåº”è¯¥æ˜¯åˆ©å¤§äºå¼Šçš„ï¼Œä¹Ÿå°±æ˜¯æœ‰ç›Šç¨‹åº¦å¤§äºç¢ç‰‡åŒ–å¢åŠ çš„ç¨‹åº¦ã€‚</p><p>æ€»ä¹‹ä¸ç®¡æ˜¯<a href="https://peps.python.org/pep-0668">PEP 668</a>ä¸­æ ‡è®°ç‰ˆæœ¬ç®¡ç†æ˜¯ç³»ç»Ÿçš„è¿˜æ˜¯Pythonçš„ï¼Œè¿˜æ˜¯<a href="https://peps.python.org/pep-0711/">PEP 711</a>æ¥å•ç‹¬ä¸‹å‘Pythonè§£é‡Šå™¨äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè¿˜æ˜¯Ryeçš„å‡ºç°ï¼Œéƒ½æ˜¯Pythonç¤¾åŒºæ„è¯†åˆ°PythonåŒ…ç®¡ç†é—®é¢˜çš„ä¸¥é‡æ€§ï¼Œè¿›è€Œåšå‡ºçš„ä¸€äº›æœ‰ç›Šå°è¯•ã€‚æœŸå¾…åœ¨æœªæ¥ï¼Œæœ‰æ›´æ ‡å‡†åŒ–çš„å·¥å…·ï¼ŒPythonçš„å¼€å‘ä¹Ÿæ›´å®¹æ˜“ã€‚</p><p>ä¸‹é¢å°†å¯¹Ryeçš„å®‰è£…å’Œä½¿ç”¨è¿›è¡Œç®€å•ä»‹ç»ã€‚</p><span id="more"></span><h3 id="2-1-å®‰è£…rustup"><a href="#2-1-å®‰è£…rustup" class="headerlink" title="2.1 å®‰è£…rustup"></a>2.1 å®‰è£…rustup</h3><p>Ryeæ˜¯åŸºäºRust å¼€å‘çš„ï¼Œè€ŒRust æœ‰æ ‡å‡†çš„åŒ…å®‰è£…å·¥å…·<code>cargo</code>ï¼ŒRustç¼–è¯‘å™¨å’Œ<code>cargo</code>éƒ½éœ€è¦ç”¨<code>rustup</code>æ¥å®‰è£…ï¼Œå› æ­¤å®‰è£…é¢„ç¼–è¯‘çš„RyeåŒ…éœ€è¦å…ˆå®‰è£…<code>rustup</code>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl --proto <span class="string">&#x27;=https&#x27;</span> --tlsv1.2 -sSf https://sh.rustup.rs | sh</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œåï¼Œé‡å¯Shellï¼Œè¾“å…¥<code>cargo -V</code>ï¼Œå¦‚æœä¸æŠ¥é”™ï¼Œè¯´æ˜å®‰è£…æˆåŠŸã€‚</p><h3 id="2-2-å®‰è£…Rye"><a href="#2-2-å®‰è£…Rye" class="headerlink" title="2.2 å®‰è£…Rye"></a>2.2 å®‰è£…Rye</h3><p>æœ‰äº†cargoåï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å®‰è£…Rye:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cargo install --git https://github.com/mitsuhiko/rye rye</span><br></pre></td></tr></table></figure><p>é€šè¿‡å‘½ä»¤è¡Œæ‰§è¡Œ<code>rye -h</code> æ¥åˆ¤æ–­ Ryeæ˜¯å¦å®‰è£…æˆåŠŸã€‚</p><p>åŒæ—¶å¯ä»¥å°†<code>$HOME/.rye/shims</code> æ·»åŠ åˆ°ç¯å¢ƒå˜é‡<code>PATH</code> ä¸­ï¼Œè¿™æ ·æ‰“å¼€Shellåè¿è¡Œ<code>python</code> å°±ç”¨çš„æ˜¯Ryeå®‰è£…åˆ°standalone Pythonï¼Œå¦åˆ™ä½ éœ€è¦ç”¨<code>rye run python</code> æ¥å¯ç”¨Ryeçš„Pythonè§£é‡Šå™¨ã€‚</p><p>æ›´æ–°Ryeåˆ°æœ€æ–°ç‰ˆï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rye self update</span><br></pre></td></tr></table></figure><p>åˆ é™¤Rye:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cargo uninstall rye</span><br></pre></td></tr></table></figure><h3 id="2-3-åˆå§‹åŒ–ä¸€ä¸ªRyeé¡¹ç›®"><a href="#2-3-åˆå§‹åŒ–ä¸€ä¸ªRyeé¡¹ç›®" class="headerlink" title="2.3 åˆå§‹åŒ–ä¸€ä¸ªRyeé¡¹ç›®"></a>2.3 åˆå§‹åŒ–ä¸€ä¸ªRyeé¡¹ç›®</h3><p>ä½¿ç”¨<code>rye init project-name</code> æ¥åˆ›å»ºä¸€ä¸ªRyeé¡¹ç›®ç›®å½•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rye init test_rye</span><br><span class="line"><span class="built_in">cd</span> test_rye</span><br><span class="line">tree</span><br></pre></td></tr></table></figure><p>è¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ .git</span><br><span class="line">â”œâ”€â”€ .gitignore</span><br><span class="line">â”œâ”€â”€ .python-version</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ pyproject.toml</span><br><span class="line">â””â”€â”€ src</span><br><span class="line">    â””â”€â”€ test_rye</span><br><span class="line">        â””â”€â”€ __init__.py</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°åˆ›å»ºäº†.git ç›®å½•ï¼Œ .gitignore æ–‡ä»¶ï¼ŒREADME.mdï¼Œé…ç½®æ–‡ä»¶<code>pyproject.toml</code> å’Œä¸€ä¸ªç¤ºä¾‹çš„æºç æ–‡ä»¶<code>src/test_rye/__init__.py</code>ã€‚</p><h3 id="2-4-Python-ç‰ˆæœ¬ç®¡ç†"><a href="#2-4-Python-ç‰ˆæœ¬ç®¡ç†" class="headerlink" title="2.4 Python ç‰ˆæœ¬ç®¡ç†"></a>2.4 Python ç‰ˆæœ¬ç®¡ç†</h3><p>ä¸ºäº†å›ºå®šå¼€å‘ç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨<code>rye pin python-version</code> æ¥å›ºå®šPythonçš„ç‰ˆæœ¬ï¼Œä¾‹å¦‚<code>rye pin cpython@3.10.11</code> ä¼šå°†Pythonç‰ˆæœ¬å›ºå®šä¸º3.10.11ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cpython@å¯ä»¥çœç•¥</span></span><br><span class="line">rye pin cpython@3.10.11</span><br><span class="line">rye pin 3.10.11</span><br></pre></td></tr></table></figure><p>ç”±äºé»˜è®¤ä½¿ç”¨çš„Pythonç‰ˆæœ¬æ˜¯Cpythonçš„ï¼Œå› æ­¤åœ¨æ‰§è¡Œryeå‘½ä»¤æ—¶å¯ä»¥å°†<code>Cpython@</code> å‰ç¼€çœå»ã€‚</p><p>æ³¨æ„ <code>rye pin</code>å‘½ä»¤å¹¶ä¸ç«‹å³æ”¹å˜Pythonçš„ç‰ˆæœ¬ï¼Œåªæ˜¯ä¿®æ”¹é…ç½®æ–‡ä»¶<code>.python-version</code>ï¼Œåœ¨<code>rye sync</code> æ‰§è¡Œæ—¶æ‰è¿›è¡Œå®é™…çš„ä¿®æ”¹ã€‚</p><p>å¯ä»¥å¤šæ¬¡æ‰§è¡Œ<code>rye pin</code> æ¥è°ƒæ•´Pythonçš„ç‰ˆæœ¬ã€‚</p><p>ç„¶åæ‰§è¡Œ<code>rye sync</code> æ¥åŒæ­¥é…ç½®ï¼Œå…·ä½“æ¥è¯´ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œè¿™ä¸ªå‘½ä»¤çš„æ—¶å€™ï¼ŒRyeä¼šä¸‹è½½ä¸€ä¸ªå•ç‹¬çš„Pythonè§£é‡Šå™¨ï¼Œæ”¾ç½®åˆ°<code>$HOME/.rye/py</code>ç›®å½•ä¸‹ï¼Œé“¾æ¥åˆ°é¡¹ç›®çš„<code>.venv</code> ç›®å½•ä¸‹ï¼Œå› æ­¤åŒä¸€ä¸ªPythonç‰ˆæœ¬åœ¨ç£ç›˜ä¸Šåªæœ‰ä¸€ä»½ï¼Œè¿™ä¸condaæ˜¯ä¸åŒçš„ã€‚</p><p>æ›´ä¸€èˆ¬åœ°ï¼Œå¯ä»¥ä½¿ç”¨<code>rye toolchain</code> æ¥æŸ¥çœ‹ã€æ‹‰å–å’Œåˆ é™¤Pythonç‰ˆæœ¬ã€‚</p><p><code>rye toolchain list</code> ç”¨æ¥æ˜¾ç¤ºæ‰€æœ‰å·²ç»å®‰è£…çš„Pythonç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rye toolcahin list</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cpython@3.11.3 (/Users/yunfeng/.rye/py/cpython@3.11.3/install/bin/python3)</span><br><span class="line">cpython@3.11.1 (/Users/yunfeng/.rye/py/cpython@3.11.1/install/bin/python3)</span><br><span class="line">cpython@3.10.11 (/Users/yunfeng/.rye/py/cpython@3.10.11/install/bin/python3)</span><br><span class="line">cpython@3.10.9 (/Users/yunfeng/.rye/py/cpython@3.10.9/install/bin/python3)</span><br></pre></td></tr></table></figure><p><code>rye toolchain list --include-downloadable</code> ä¼šåˆ—å‡ºæ‰€æœ‰å¯ä»¥ä¸‹è½½çš„Pythonç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`rye toolchain list --include-downloadable` </span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cpython@3.10.8 (downloadable)</span><br><span class="line">cpython@3.10.7 (downloadable)</span><br><span class="line">cpython@3.10.6 (downloadable)</span><br><span class="line">cpython@3.10.5 (downloadable)</span><br><span class="line">cpython@3.10.4 (downloadable)</span><br><span class="line">cpython@3.10.3 (downloadable)</span><br><span class="line">cpython@3.10.2 (downloadable)</span><br><span class="line">cpython@3.10.0 (downloadable)</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>æ³¨æ„å·²ç»ä¸‹è½½çš„Pythonç‰ˆæœ¬ä¸åœ¨è¿™ä¸ªè¾“å‡ºä¸­ã€‚</p><p><code>rye toolchain fetch</code>ï¼ˆç®€å†™ä¸º<code>rye fetch</code>) å¯ä»¥ç›´æ¥æ‹‰å–æŸä¸ªPythonç‰ˆæœ¬:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rye toolchain fetch 3.8.16</span><br></pre></td></tr></table></figure><p><code>rye toolchain remove</code> å¯ä»¥åˆ é™¤æŸä¸ªPythonç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rye toolchain remove 3.8.16</span><br></pre></td></tr></table></figure><h3 id="2-5-æ·»åŠ ä¾èµ–åŒ…"><a href="#2-5-æ·»åŠ ä¾èµ–åŒ…" class="headerlink" title="2.5 æ·»åŠ ä¾èµ–åŒ…"></a>2.5 æ·»åŠ ä¾èµ–åŒ…</h3><p>å¯ä»¥é€šè¿‡<code>rye add package-name</code> æ¥å®‰è£…åƒnumpyç­‰ç¬¬ä¸‰æ–¹ï¼Œè¿™ä¸ªå‘½ä»¤æ”¯æŒå®‰è£…GitHubå’Œæœ¬åœ°çš„åŒ…ï¼Œä¸€äº›ç¤ºä¾‹çš„ç”¨æ³•å¦‚ä¸‹:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">rye add numpy</span><br><span class="line"><span class="comment"># åŒæ—¶å®‰è£…å‡ ä¸ªåŒ…</span></span><br><span class="line">rye add six easydict</span><br><span class="line"><span class="comment"># è®¾ç½®å®‰è£…åŒ…çš„ç‰ˆæœ¬</span></span><br><span class="line">rye add <span class="string">&quot;Flask&gt;=2.0&quot;</span></span><br><span class="line"><span class="comment"># åªåœ¨developmentç¯å¢ƒæ·»åŠ åŒ…</span></span><br><span class="line">rye add --dev black</span><br><span class="line"><span class="comment"># æ·»åŠ githubä¸Šçš„åŒ…</span></span><br><span class="line">rye add Flask --git=https://github.com/pallets/flask</span><br><span class="line"><span class="comment"># æ·»åŠ æœ¬åœ°ç›®å½•çš„åŒ…</span></span><br><span class="line">rye add My-Utility --path ./my-utility</span><br></pre></td></tr></table></figure><p>åŒæ ·çš„ï¼Œ<code>rye add</code>å¹¶ä¸ä¼šå®é™…å®‰è£…åŒ…ï¼Œåªä¼šä¿®æ”¹é…ç½®æ–‡ä»¶<code>pyproject.toml</code> ä¸­çš„<code>dependencies</code> é¡¹ï¼Œç­‰æ‰§è¡Œ<code>rye sync</code>çš„æ—¶å€™æ‰çœŸæ­£å®‰è£…ã€‚</p><h3 id="2-6-Ryeå·¥ä½œæµ"><a href="#2-6-Ryeå·¥ä½œæµ" class="headerlink" title="2.6 Ryeå·¥ä½œæµ"></a>2.6 Ryeå·¥ä½œæµ</h3><p>æˆ‘è‡ªå·±æ¢ç´¢çš„Ryeå·¥ä½œæµå¤§æ¦‚æ˜¯è¿™æ ·ï¼š</p><ol><li><code>rye init project-name</code> æ¥åˆå§‹åŒ–é¡¹ç›®ç›®å½•</li><li><code>git add</code> å’Œ<code>git commit</code> æ¥æäº¤åˆå§‹çŠ¶æ€çš„ä»£ç ï¼Œæ–¹ä¾¿å®šä½åç»­ä»£ç å’Œé…ç½®æ–‡ä»¶çš„æ›´æ–°</li><li><code>rye pin</code> æŒ‡å®šPythonç‰ˆæœ¬</li><li>ä¿®æ”¹ä»£ç ï¼Œ<code>rye add package-name</code> æ¥å¢åŠ ä»£ç ä¾èµ–çš„åŒ…</li><li><code>rye sync</code>æ¥å®‰è£…Pythonï¼Œå®‰è£…ä¾èµ–åŒ…ï¼Œæ›´æ–°é…ç½®æ–‡ä»¶</li><li><code>rye run python</code> æ‰§è¡Œä»£ç æµ‹è¯•</li><li>å¯é€‰ï¼š<code>rye build</code> æ¥ç”Ÿæˆå¯å‘å¸ƒçš„wheelæ–‡ä»¶</li><li>å¯é€‰ï¼š<code>rye publish</code> ä¸Šä¼ åŒ…åˆ°pypi</li></ol><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒRyeåªè´Ÿè´£ä¾èµ–ç®¡ç†ï¼Œå…·ä½“çš„è°ƒè¯•ä»£ç å·¥ä½œï¼Œè¿˜éœ€è¦è‡ªå·±æ¥è¿›è¡Œï¼Œä½¿ç”¨ä½ ç†Ÿæ‚‰çš„ä»£ç æµ‹è¯•æ–¹å¼å°±å¯ä»¥äº†ã€‚</p><p>é¢å¤–è¡¥å……ä¸€ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨<code>rye shell</code> æ¥æ‰“å¼€ä¸€ä¸ªæ–°çš„å¯ç”¨äº†Rye Pythonçš„Shellæ¥è¿›è¡Œä»£ç è°ƒè¯•ã€‚</p><h3 id="2-7-å®‰è£…å¯æ‰§è¡Œçš„-global-Pythonå·¥å…·"><a href="#2-7-å®‰è£…å¯æ‰§è¡Œçš„-global-Pythonå·¥å…·" class="headerlink" title="2.7 å®‰è£…å¯æ‰§è¡Œçš„ global Pythonå·¥å…·"></a>2.7 å®‰è£…å¯æ‰§è¡Œçš„ global Pythonå·¥å…·</h3><p>æŸäº›pythonåŒ…é™¤äº†åŒ…å«Pythonæºç å¤–ï¼Œè¿˜åŒ…å«ä¸€äº›å‘½ä»¤è¡Œå·¥å…·ï¼ŒRyeç§°è¿™äº›å·¥å…·ä¸º<code>global tool</code> ï¼Œå› ä¸ºå®ƒä»¬ä¸æ˜¯åœ¨æŸä¸ªç¯å¢ƒä¸­æ‰èƒ½ä½¿ç”¨ï¼Œè€Œæ˜¯å…¨å±€å¯ä½¿ç”¨çš„ã€‚è¿™äº›å·¥å…·å¯ä»¥ç”¨<code>rye install package-name</code>æ¥å®‰è£…ï¼Œä¾‹å¦‚:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rye install black</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ–¹å¼ä¸º<code>rye run tool-name</code>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rye run black -h</span><br></pre></td></tr></table></figure><p>è¿™äº›åŒ…éƒ½å­˜æ”¾åœ¨<code>$HOME/.rye/shims</code> ç›®å½•ä¸‹ã€‚<br>å¦‚æœè¦åˆ é™¤ global toolï¼Œå¯ä»¥ä½¿ç”¨<code>rye uninstall</code>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rye uninstall black</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://mitsuhiko.github.io/rye/&quot;&gt;Rye&lt;/a&gt; æ˜¯&lt;a href=&quot;https://flask.palletsprojects.com/en/2.3.x/&quot;&gt;Flask&lt;/a&gt;çš„ä½œè€…&lt;a href=&quot;https://github.com/mitsuhiko&quot;&gt;Armin Ronacher&lt;/a&gt;æœ€è¿‘æ¨å‡ºçš„ä¸€ä¸ªå®éªŒæ€§è´¨çš„PythonåŒ…ç®¡ç†ç³»ç»Ÿï¼Œç›®çš„æ˜¯è§£å†³PythonåŒ…ç®¡ç†ç›®å‰é¢ä¸´çš„å·¥å…·é“¾ç¢ç‰‡åŒ–çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å¤§å®¶çŸ¥é“ï¼ŒPythonç›®å‰çš„åŒ…ç®¡ç†ç³»ç»Ÿå¾ˆå¤šï¼ŒåŒ…æ‹¬ poetry, pip, pipenv, pyenv, venv, virtualenv, pdm, hatch ç­‰ç­‰ï¼Œå®ƒä»¬éƒ½æ˜¯ä¼˜ç§€çš„å·¥å…·ï¼Œæå‡ºæ—¶éƒ½æ˜¯è§£å†³äº†ä¸€å®šçš„é—®é¢˜ï¼Œä½†æ²¡æœ‰å“ªä¸ªå·¥å…·èƒ½å¤Ÿåšåˆ°ä¸»æµï¼Œå› æ­¤ä¹Ÿå¢åŠ äº†ç³»ç»Ÿçš„ç¢ç‰‡åŒ–ç¨‹åº¦ã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€æ–¹é¢ï¼Œcondaç­‰å·¥å…·èƒ½æä¾›ä¸åŒç‰ˆæœ¬çš„ Pythonï¼Œç®¡ç†ä¸åŒçš„ç¯å¢ƒï¼Œä½†æ¯ä¸ªç¯å¢ƒçš„ Python ä¸æ˜¯å…±äº«çš„ï¼Œç¯å¢ƒåˆ›å»ºä¸€å¤šï¼Œç¯å¢ƒç›®å½•å°±å˜å¾—å¾ˆå¤§ï¼Œä¸”å†…éƒ¨æœºåˆ¶å¾ˆä¸é€æ˜ï¼Œæœ‰æ—¶ä¹Ÿä¼šé‡åˆ°å†²çªæ²¡æ³•è§£å†³çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€æ–¹é¢ï¼ŒPython åœ¨Linux/macOSä¸Šçš„å®‰è£…ä¹Ÿé¢ä¸´ä¸€äº›é—®é¢˜ï¼Œä¾‹å¦‚ç”¨åŒ…ç®¡ç†å™¨å®‰è£…çš„  Pythonå’Œç”¨æˆ·æ‰‹åŠ¨å®‰è£…çš„ Python æœ‰çš„æ—¶å€™ä¼šæ··æ·†ï¼Œå¯¼è‡´ä¸€äº›æ··ä¹±ï¼Œä¾‹å¦‚åœ¨ Fedora ä¸Šï¼Œç”¨&lt;code&gt;pip install&lt;/code&gt; å®‰è£…åŒ…å¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿçš„åŒ…ç®¡ç†å‘½ä»¤&lt;code&gt;dnf&lt;/code&gt; å‡ºé”™ã€‚&lt;a href=&quot;https://peps.python.org/pep-0668&quot;&gt;PEP 668&lt;/a&gt;å°è¯•å¯¹è¿™äº›é—®é¢˜ç»™å‡ºä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œä½†ä¹Ÿéœ€è¦ä¸åŒçš„ç³»ç»Ÿæ¥æ”¯æŒï¼Œç›®å‰çœ‹è¿˜ä»»é‡é“è¿œã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºArminä¹Ÿæ˜¯ä¸€ä¸ªRust å¼€å‘è€…ï¼Œè€ŒRuståŸºäºæ ‡å‡†åŒ–çš„&lt;code&gt;rustup&lt;/code&gt;å’Œ&lt;code&gt;cargo&lt;/code&gt;ä¸¤ä¸ªå·¥å…·ï¼Œé…åˆé…ç½®æ–‡ä»¶æ¥è¿›è¡ŒåŒ…ç®¡ç†ï¼Œç›®å‰åšçš„æ¯”è¾ƒå¥½ï¼Œæ²¡æœ‰Pythoné¢ä¸´çš„ç¢ç‰‡åŒ–é—®é¢˜ã€‚å—Rustçš„å¯å‘ï¼Œä½œè€…æå‡ºäº†Ryeï¼Œå¹¶ä¸”æœŸæœ›èƒ½å¤Ÿå¯å‘Pythonç¤¾åŒºæå‡ºç±»ä¼¼Rustçš„æ ‡å‡†åŒ…ç®¡ç†å·¥å…·ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“æ¥è¯´ï¼ŒRye æå‡ºäº†ä¸€äº›è§£å†³è¿™äº›é—®é¢˜çš„æ€è·¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æå‡ºä¸€ä¸ªworkspaceçš„æ¦‚å¿µï¼Œworkspaceç±»ä¼¼ä¸€ä¸ªé¡¹ç›®ç›®å½•ï¼Œæˆ–è€…ä¸€ä¸ªgitä»“åº“ï¼Œä¸€ä¸ªworkspaceä¸‹åªæœ‰ä¸€ä¸ªPythonç‰ˆæœ¬ï¼Œä¸åŒworkspace Pythonç‰ˆæœ¬ç›¸äº’éš”ç¦»ï¼Œæ¯ä¸ªé¡¹ç›®é‡‡ç”¨&lt;code&gt;pyproject.toml&lt;/code&gt;æ¥è¿›è¡Œé…ç½®&lt;/li&gt;
&lt;li&gt;ä¸ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„Pythonï¼Œç›¸ååœ°ï¼Œåœ¨æ¯ä¸ªé¡¹ç›®ç›®å½•çš„ä¸­ä¸‹è½½ä¸€ä¸ªstandaloneçš„pythonï¼Œè§£å†³ä¸åŒç‰ˆæœ¬çš„å†²çªé—®é¢˜&lt;/li&gt;
&lt;li&gt;ä¸æš´éœ²pipå‘½ä»¤ï¼Œé€šè¿‡&lt;code&gt;rye add&lt;/code&gt; + &lt;code&gt;rye sync&lt;/code&gt; æ¥ç®¡ç†åŒ…çš„ä¾èµ–ï¼Œé¿å…åŒ…Aå’ŒåŒ…Bä¾èµ–ä¸åŒç‰ˆæœ¬çš„åŒ…Cè€Œå¯¼è‡´çš„ä¸å…¼å®¹é—®é¢˜&lt;/li&gt;
&lt;li&gt;åŒºåˆ†å¼€å‘ç¯å¢ƒå’Œæ­£å¼ç¯å¢ƒï¼Œå› ä¸ºä¸€äº›åŒ…åœ¨å¼€å‘æ—¶ä¼šç”¨åˆ°ä¸€äº›è°ƒè¯•å·¥å…·ï¼Œä½†ä½œä¸ºç¬¬ä¸‰æ–¹åº“è¢«å¼•å…¥çš„æ—¶å€™å¹¶ä¸éœ€è¦&lt;/li&gt;
&lt;li&gt;æ”¯æŒimportæœ¬åœ°workspaceä½œä¸ºç¬¬ä¸‰æ–¹åº“åŒ…&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½†åŒæ—¶ä¹Ÿæœ‰ä¸€ä¸ªé—®é¢˜ï¼šryeä¼šä¸ä¼šæ˜¯å¦ä¸€ä¸ªåšä¸åˆ°ä¸»æµçš„PythonåŒ…ç®¡ç†ç³»ç»Ÿï¼Œä»è€Œè¿›ä¸€æ­¥å¢åŠ PythonåŒ…ç®¡ç†çš„ç¢ç‰‡åŒ–å‘¢ï¼Ÿä½œè€…ä¹Ÿæœ‰è¿™ä¸ªè€ƒè™‘ï¼Œå› æ­¤å†™äº†ä¸€ä¸ªè®¨è®ºå¸– &lt;a href=&quot;https://github.com/mitsuhiko/rye/discussions/6&quot;&gt;Should Rye Exist?&lt;/a&gt;æ¥è®¨è®ºè¿™ä¸ªé—®é¢˜ï¼ŒåŒæ—¶å…³äºRyeçš„è®¾è®¡åˆè¡·ï¼Œå¯ä»¥å‚è€ƒ&lt;a href=&quot;https://mitsuhiko.github.io/rye/philosophy/&quot;&gt;è¿™é‡Œ&lt;/a&gt;ä½œè€…çš„æ€è€ƒã€‚&lt;/p&gt;
&lt;p&gt;ä¸ªäººè§‚ç‚¹ï¼šRyeçš„å‡ºç°ç»™Pythonç¤¾åŒºå¼•å…¥äº†ä¸€äº›æ–°é²œçš„è§£å†³ç°æœ‰é—®é¢˜çš„æ€è·¯ã€‚ä½¿ç”¨Ryeä¸€æ®µæ—¶é—´åï¼Œå‘ç°è‡³å°‘ä½¿ç”¨standalone çš„Pythonç‰ˆæœ¬æ˜¯ä¸€ä¸ªè§£å†³å†²çªçš„å¥½çš„æ–¹å¼ã€‚é€šè¿‡å‡ ä¸ªç®€å•çš„å‘½ä»¤æ¥è§£å†³ç‰ˆæœ¬ç®¡ç†çš„é—®é¢˜æ˜¯æ¯”è¾ƒç›´è§‚çš„ï¼Œæå‡ºRyeåº”è¯¥æ˜¯åˆ©å¤§äºå¼Šçš„ï¼Œä¹Ÿå°±æ˜¯æœ‰ç›Šç¨‹åº¦å¤§äºç¢ç‰‡åŒ–å¢åŠ çš„ç¨‹åº¦ã€‚&lt;/p&gt;
&lt;p&gt;æ€»ä¹‹ä¸ç®¡æ˜¯&lt;a href=&quot;https://peps.python.org/pep-0668&quot;&gt;PEP 668&lt;/a&gt;ä¸­æ ‡è®°ç‰ˆæœ¬ç®¡ç†æ˜¯ç³»ç»Ÿçš„è¿˜æ˜¯Pythonçš„ï¼Œè¿˜æ˜¯&lt;a href=&quot;https://peps.python.org/pep-0711/&quot;&gt;PEP 711&lt;/a&gt;æ¥å•ç‹¬ä¸‹å‘Pythonè§£é‡Šå™¨äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè¿˜æ˜¯Ryeçš„å‡ºç°ï¼Œéƒ½æ˜¯Pythonç¤¾åŒºæ„è¯†åˆ°PythonåŒ…ç®¡ç†é—®é¢˜çš„ä¸¥é‡æ€§ï¼Œè¿›è€Œåšå‡ºçš„ä¸€äº›æœ‰ç›Šå°è¯•ã€‚æœŸå¾…åœ¨æœªæ¥ï¼Œæœ‰æ›´æ ‡å‡†åŒ–çš„å·¥å…·ï¼ŒPythonçš„å¼€å‘ä¹Ÿæ›´å®¹æ˜“ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢å°†å¯¹Ryeçš„å®‰è£…å’Œä½¿ç”¨è¿›è¡Œç®€å•ä»‹ç»ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="Python" scheme="http://vra.github.io/tags/Python/"/>
    
    <category term="Rust" scheme="http://vra.github.io/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>git å›æ»šä»£ç å¹¶ä¿ç•™æäº¤å†å²</title>
    <link href="http://vra.github.io/2023/05/16/git-roll-back-code-and-save-commit-history/"/>
    <id>http://vra.github.io/2023/05/16/git-roll-back-code-and-save-commit-history/</id>
    <published>2023-05-16T07:55:28.000Z</published>
    <updated>2023-05-16T07:56:23.905Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨gitæ—¶ï¼Œæœ‰æ—¶å€™éœ€è¦å›é€€æœ€æ–°ä»£ç åˆ°ä¹‹å‰çš„æŸæ¬¡æäº¤æˆ–æŸä¸ªtagï¼Œå°†ä¸­é—´çš„æ‰€æœ‰ä»£ç æäº¤å»æ‰ã€‚åŒæ—¶ä¿æŒä¸­é—´çš„æäº¤è®°å½•ã€‚å®é™…åº”ç”¨æ—¶å‘ç°è¿™ä¸ªåŠ¨ä½œæ²¡æœ‰æ¯”è¾ƒå¥½çš„å®ç°æ–¹å¼ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœä½¿ç”¨<code>git revert commit-id</code>, é‚£ä¹ˆåªä¼šä¼šé€€<code>commit-id</code> å¯¹åº”çš„é‚£æ¬¡æäº¤ï¼Œä¹‹åçš„æäº¤ä¸å—å½±å“ï¼Œä»ç„¶å­˜åœ¨ï¼Œä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœã€‚</p><p>å¦‚æœä½¿ç”¨<code>git reset</code>, é‚£æ“ä½œå°±æ¯”è¾ƒéº»çƒ¦ï¼Œéœ€è¦ä½¿ç”¨<code>--hard</code> å’Œ<code>--force</code> ç­‰æ¯”è¾ƒå±é™©çš„å‘½ä»¤ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard commit-id</span><br><span class="line">git push --force</span><br></pre></td></tr></table></figure><p>è¿™æ ·åšé™¤äº†ä½¿ç”¨æ¯”è¾ƒå±é™©çš„å‘½ä»¤é€‰é¡¹å¤–ï¼Œè¿˜æœ‰ä¸ªé—®é¢˜æ˜¯æ²¡æ³•ä¿ç•™ä¸­é—´çš„æäº¤å†å²ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚</p><p>æœç´¢å‘ç°ï¼Œåˆ©ç”¨git diffå’Œgit applyå¯ä»¥æ¥æ¯”è¾ƒæ¸…æ™°çš„å®Œæˆè¿™ä¸ªéœ€æ±‚ï¼Œæ•´ä½“çš„æ€è·¯æ˜¯ï¼š</p><ol><li>å¾—åˆ°å½“å‰æœ€æ–°æäº¤åˆ°å›é€€æäº¤ä¹‹é—´çš„ä»£ç diffï¼Œå°†diffä¿å­˜ä¸ºæ–‡ä»¶</li><li>åˆ©ç”¨<code>git apply</code> å°†diffä½œç”¨åˆ°ä»£ç ä¸Šï¼Œå›åˆ°ä¹‹å‰çš„ä»£ç çŠ¶æ€</li><li>æäº¤ä»£ç </li></ol><p>å…·ä½“æ¥è¯´ï¼Œå‡è®¾å½“å‰æœ€æ–°æäº¤å°±åœ¨åˆ†æ”¯<code>current-branch</code>ä¸Šï¼Œå›é€€æäº¤ä¸º<code>prev-commit</code>,è¿™ä¸ªå›é€€æäº¤å¯ä»¥æ˜¯ä¸€æ¬¡commit idï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªtagï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåˆ†æ”¯åã€‚æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git checkout prev-commit</span><br><span class="line">git diff current-branch &gt; ~/diff.patch</span><br><span class="line">git checkout current-branch</span><br><span class="line">cat ~/diff.patch | git apply</span><br><span class="line">git commit -am <span class="string">&quot;roll back to prev-commit&quot;</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±èƒ½æ—¢å›é€€ä»£ç ï¼Œåˆä¿ç•™æäº¤å†å²ã€‚</p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul><li><a href="https://stackoverflow.com/a/33890073">https://stackoverflow.com/a/33890073</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åœ¨ä½¿ç”¨gitæ—¶ï¼Œæœ‰æ—¶å€™éœ€è¦å›é€€æœ€æ–°ä»£ç åˆ°ä¹‹å‰çš„æŸæ¬¡æäº¤æˆ–æŸä¸ªtagï¼Œå°†ä¸­é—´çš„æ‰€æœ‰ä»£ç æäº¤å»æ‰ã€‚åŒæ—¶ä¿æŒä¸­é—´çš„æäº¤è®°å½•ã€‚å®é™…åº”ç”¨æ—¶å‘ç°è¿™ä¸ªåŠ¨ä½œæ²¡æœ‰æ¯”è¾ƒå¥½çš„å®ç°æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œå¦‚æœä½¿ç”¨&lt;code&gt;git revert commit-id&lt;/code&gt;, é‚£ä¹ˆåªä¼šä¼šé€€</summary>
      
    
    
    
    
    <category term="Git" scheme="http://vra.github.io/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>talkGPT4All</title>
    <link href="http://vra.github.io/2023/04/02/chatbot4all/"/>
    <id>http://vra.github.io/2023/04/02/chatbot4all/</id>
    <published>2023-04-01T22:11:54.000Z</published>
    <updated>2023-04-02T00:45:18.594Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1. æ¦‚è¿°"></a>1. æ¦‚è¿°</h2><p>TL;DR: talkGPT4All æ˜¯ä¸€ä¸ªåœ¨PCæœ¬åœ°è¿è¡Œçš„åŸºäºtalkGPTå’ŒGPT4Allçš„è¯­éŸ³èŠå¤©ç¨‹åºï¼Œé€šè¿‡OpenAI Whisperå°†è¾“å…¥è¯­éŸ³è½¬æ–‡æœ¬ï¼Œå†å°†è¾“å…¥æ–‡æœ¬ä¼ ç»™GPT4Allè·å–å›ç­”æ–‡æœ¬ï¼Œæœ€ååˆ©ç”¨å‘éŸ³ç¨‹åºå°†æ–‡æœ¬è¯»å‡ºæ¥ï¼Œæ„å»ºäº†å®Œæ•´çš„è¯­éŸ³äº¤äº’èŠå¤©è¿‡ç¨‹ã€‚</p><p>å®é™…ä½¿ç”¨æ•ˆæœ<a href="https://www.zhihu.com/zvideo/1625779747656515584">è§†é¢‘</a>ã€‚</p><p>å®é™…ä¸Šï¼Œå®ƒåªæ˜¯å‡ ä¸ªå·¥å…·çš„ç®€æ˜“ç»„åˆï¼Œæ²¡æœ‰ä»€ä¹ˆåˆ›æ–°çš„åœ°æ–¹ï¼ˆç”šè‡³ä¸æ”¯æŒå¤šè½®èŠå¤©ï¼Œåªæ”¯æŒè‹±æ–‡ï¼‰ï¼Œä½† talkGPT4All æœ‰ä¸‹é¢å‡ ä¸ªæ¯”è¾ƒå¥½çš„ç‰¹ç‚¹</p><ul><li>æ‰€æœ‰ç®—æ³•æœ¬åœ°è¿è¡Œï¼Œä¸æ¶‰åŠAPIçš„è°ƒç”¨ï¼Œé¿å…äº†å›½å†…æ— æ³•è®¿é—®OpenAI APIçš„é—®é¢˜</li><li>CPU è¿è¡Œï¼Œæ— é¡» GPU æ˜¾å¡</li><li>å å†…å­˜å°ï¼Œå®æµ‹8Gå†…å­˜å°±å¯ä»¥è·‘èµ·æ¥</li><li>é€Ÿåº¦è¿˜å¯ä»¥ï¼Œæµ‹è¯•8G Windows ä¸€è½®èŠå¤©å°äº1åˆ†é’Ÿï¼Œ 16G Mac ä¸€è½®èŠå¤©å°äº30ç§’</li><li>é›†æˆçš„AIè¿˜ç®—æ™ºèƒ½ï¼Œè‡³å°‘ç­”èƒ½å¯¹é¢˜ï¼Œå›ç­”çœ‹èµ·æ¥æ˜¯ç¬¦åˆè‹±è¯­è¯­æ³•çš„</li></ul><p>ç›®å‰æ”¯æŒå¹³å°å’ŒéªŒè¯çš„æƒ…å†µå¦‚ä¸‹:</p><ul><li>Mac M1ï¼Œå·²ç»éªŒè¯å¯ç”¨</li><li>Windowsï¼Œå·²ç»éªŒè¯å¯ç”¨</li><li>Mac intelï¼ŒæœªéªŒè¯</li><li>Linuxï¼ŒæœªéªŒè¯<br>å¦‚æœæœ‰å¯¹åº”æœºå™¨çš„æœ‹å‹æ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥å¸®å¿™éªŒè¯ä¸€ä¸‹ï¼Œæœ‰é—®é¢˜å¯ä»¥æPRå’Œissueã€‚</li></ul><p>æƒ³ä½“éªŒçš„æœ‹å‹å¯ä»¥å‚è€ƒ GitHub READMEè¿›è¡Œå¿«é€Ÿå®‰è£…ï¼Œä¹Ÿå¯ä»¥åœ¨è¿™ç¯‡æ–‡ç« ä¸­è·Ÿç€æˆ‘ä¸€æ­¥æ­¥æ¥è¿›è¡Œã€‚</p><span id="more"></span><h2 id="2-ä¸ºä»€ä¹ˆé€ è¿™ä¸ªè½®å­"><a href="#2-ä¸ºä»€ä¹ˆé€ è¿™ä¸ªè½®å­" class="headerlink" title="2. ä¸ºä»€ä¹ˆé€ è¿™ä¸ªè½®å­"></a>2. ä¸ºä»€ä¹ˆé€ è¿™ä¸ªè½®å­</h2><p>èŠå¤©æœºå™¨äººæ˜¯æˆ‘æ¯”è¾ƒå–œæ¬¢çš„ä¸€ä¸ªåº”ç”¨ï¼Œæœºå™¨+äººç±»çš„æ€ç»´æ˜¯ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„åœºæ™¯ã€‚å¦ä¸€æ–¹é¢ï¼Œé€šè¿‡ä¸€ä¸ªæ™ºèƒ½æœºå™¨äººæ¥ç»ƒä¹ è‹±è¯­å£è¯­ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå®é™…çš„åº”ç”¨ã€‚</p><p>ä¸€ç›´ä»¥æ¥ï¼Œæƒ³è¦åšä¸€ä¸ªå«æœ‰æ™ºèƒ½çš„èŠå¤©æœºå™¨äººåº”ç”¨éƒ½æ˜¯éš¾åº¦å¾ˆå¤§çš„ï¼Œå°¤å…¶æ˜¯æ™ºèƒ½åŒ–çš„ç¨‹åº¦ï¼Œå—å­¦æœ¯ç ”ç©¶è¿›å±•çš„åˆ¶çº¦ï¼Œæ²¡æ³•åšåˆ°å¾ˆé«˜ã€‚ç„¶è€Œè¿‘æœŸçš„AI LLMå¤§çˆ†å‘ï¼Œè®©å¼€å‘ä¸€ä¸ªçœŸæ­£æ™ºèƒ½çš„AIèŠå¤©æœºå™¨äººè¶Šæ¥è¶Šå®¹æ˜“ã€‚</p><p>æœ€æ—©çœ‹åˆ°çš„æ˜¯åŸºäº<a href="https://github.com/ggerganov/whisper.cpp">whisper.cpp</a>çš„<a href="https://github.com/ggerganov/whisper.cpp/tree/master/examples/talk.wasm">talk.wasm</a>, ä¸€ä¸ªåŸºäºWhisper+GPT-2çš„æµè§ˆå™¨å¯¹è¯æœºå™¨äººï¼Œå®é™…æµ‹è¯•åå‘ç°GPT-2è¿˜ä¸å¤Ÿæ™ºèƒ½ï¼Œå›ç­”å¾ˆå¤šæ—¶å€™éƒ½ç­”éæ‰€é—®ã€‚</p><p>ç„¶åæ˜¯åœ¨ChatGPTå‡ºæ¥åï¼Œæˆ‘åœ¨æƒ³èƒ½ä¸èƒ½åšä¸€ä¸ªWhisper + ChatGPTçš„æ™ºèƒ½èŠå¤©æœºå™¨äººå‘¢ï¼Œæœç´¢åå‘ç°whisper.cppçš„è®¨è®ºåŒºå·²ç»æœ‰äººåœ¨<a href="https://github.com/ggerganov/whisper.cpp/discussions/167#discussioncomment-4334628">è®¨è®º</a>è¿™ä¸ªäº‹æƒ…ï¼Œä¸è¿‡æ²¡çœ‹åˆ°æˆå“ã€‚</p><p>åœ¨ChatGPT å¼€æ”¾APIåï¼Œæœ‰äººåšäº†ä¸€ä¸ªMacOSä¸Šçš„åŸºäºOpenAI APIçš„è¯­éŸ³èŠå¤©æœºå™¨äºº<a href="https://github.com/chenyukang/talkGPT">talkGPT</a>ï¼Œç®€å•å¥½ç”¨ï¼Œå”¯ä¸€çš„é—®é¢˜æ˜¯éœ€è¦å€ŸåŠ©OpenAI APIï¼Œç›®å‰å›½å†…æ˜¯ä¸å¤ªå¥½è®¿é—®çš„ã€‚</p><p>å†ç„¶åæ˜¯<a href="https://github.com/ggerganov/llama.cpp">llama.cpp</a>ï¼Œé€šè¿‡é‡åŒ–å’Œå¤§é‡å·¥ç¨‹ä¼˜åŒ–ï¼Œè®©åŸæœ¬å‚æ•°é‡å¾ˆå¤§çš„<a href="https://github.com/facebookresearch/llama">LLaMA</a>æ¨¡å‹å¯ä»¥è·‘åœ¨æ™®é€šçš„ç¬”è®°æœ¬ä¸Šï¼ˆç°åœ¨ç”šè‡³æ”¯æŒåœ¨Androidä¸Šè¿è¡Œï¼)ï¼Œä½†å®é™…æµ‹è¯•ç»è¿‡é‡åŒ–å LLaMA 7B æ¨¡å‹æ™ºèƒ½ç¨‹åº¦ä¸å¤ªé«˜ï¼Œæœ‰æ—¶å€™ä¼šå‡ºé”™ï¼Œè€Œ æ›´å¤§çš„LLaMA 15B å’Œ 30B åœ¨8GBå†…å­˜çš„Windows æœºå™¨ä¸Šè·‘èµ·æ¥å°±æ¯”è¾ƒéš¾äº†ï¼ˆæœ€æ–°è¿›å±•ï¼šå¤§å°20GBçš„30Bæ¨¡å‹å¯ä»¥åœ¨8Gçš„ç³»ç»Ÿä¸Šè¿è¡Œäº†ï¼Œå‚è§è¿™ä¸ª<a href="https://github.com/ggerganov/llama.cpp/pull/613">ä¼˜åŒ–</a>å’Œè¿™é‡Œçš„<a href="https://github.com/ggerganov/llama.cpp/discussions/638">è®¨è®º</a>)ã€‚</p><p>è¿™å‘¨åˆå‡ºç°äº†<a href="https://github.com/nomic-ai/gpt4all">gpt4all</a>ï¼ŒåŸºäº LLaMA 7Bæ¨¡å‹ï¼Œé‡‡é›†è¿‘80ä¸‡çš„GPT-3.5-Turboå¯¹è¯æ•°æ®è¿›è¡Œfinetuneï¼Œæ•ˆæœçœ‹èµ·æ¥æ¯” LLaMA 7B è¦å¥½ã€‚ä½œè€…å‘å¸ƒäº†ä»–ä»¬è®­ç»ƒå¥½çš„ç»è¿‡é‡åŒ–çš„æ¨¡å‹ï¼Œå¤§å°3.9Gï¼Œä»¥åŠå¯ä»¥ç›´æ¥åœ¨PCä¸Šè¿è¡Œçš„äºŒè¿›åˆ¶èŠå¤©ç¨‹åºï¼Œå¯ä»¥ç›´æ¥åœ¨å„ä¸ªå¹³å°è¿è¡Œã€‚</p><p>ç„¶åé•¿ä¹…ä»¥æ¥çš„TODO å¯ä»¥å®ç°äº†ï¼Œåœ¨ç¼åˆäº†talkGPTå’ŒGPT4Allåï¼Œå°±æœ‰äº†talkGPT4Allã€‚ç®€å•æ¥è¯´ï¼Œæ˜¯æŠŠtalkGPTçš„OpenAI API æ¢æˆäº† GPT4Allæä¾›çš„æœ¬åœ°å¯ä»¥è¿è¡Œçš„é‡åŒ–æ¨¡å‹ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯åœ¨GPT4Allçš„åŸºç¡€ä¸Šæ·»åŠ äº†è¯­éŸ³è½¬æ–‡æœ¬å’Œæ–‡æœ¬è½¬è¯­éŸ³çš„åŠŸèƒ½ã€‚</p><p>é‚£ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹æ€ä¹ˆå®‰è£…å’Œè¿è¡Œè¿™ä¸ªç¼åˆæ€ªå§ã€‚</p><h2 id="3-æ„å»ºç¯å¢ƒ"><a href="#3-æ„å»ºç¯å¢ƒ" class="headerlink" title="3. æ„å»ºç¯å¢ƒ"></a>3. æ„å»ºç¯å¢ƒ</h2><p>ç”±äºæ•´ä¸ªç¨‹åºè®¾è®¡åˆ° Python ä»£ç ç¯å¢ƒçš„æ­å»ºã€Whisper è¯­éŸ³è½¬æ–‡æœ¬æ¨¡å‹çš„ä¸‹è½½ã€GPT4All è¯­è¨€æ¨¡å‹çš„ä¸‹è½½ã€GPT4All èŠå¤©ç¨‹åºçš„ä¸‹è½½ã€æ–‡æœ¬è½¬è¯­éŸ³ç¨‹åºçš„ä¸‹è½½ï¼Œæ•´ä½“é“¾è·¯ç•¥é•¿ï¼Œä¸‹é¢åˆ†æ­¥éª¤åˆ†å¹³å°åˆ†åˆ«è¿›è¡Œè¯¦ç»†è¯´æ˜ã€‚</p><h3 id="3-1-Pythonç¯å¢ƒçš„æ­å»º"><a href="#3-1-Pythonç¯å¢ƒçš„æ­å»º" class="headerlink" title="3.1 Pythonç¯å¢ƒçš„æ­å»º"></a>3.1 Pythonç¯å¢ƒçš„æ­å»º</h3><p>åœ¨ä¸åŒå¹³å° Python ä»£ç ç¯å¢ƒçš„æ­å»ºæ˜¯ä¸€è‡´çš„ã€‚</p><p>æ¨èä½¿ç”¨&gt;= 3.8çš„Pythonç‰ˆæœ¬ï¼Œå› ä¸ºæ–°ç‰ˆæœ¬çš„Pythonæœ‰ä¸€å®šçš„é€Ÿåº¦æå‡ã€‚ä½ç‰ˆæœ¬å¯èƒ½ä¸€äº›åŠŸèƒ½ä¸æ”¯æŒã€‚<br>é¦–å…ˆcloneä»£ç :</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/vra/talkGPT4All.git</span><br></pre></td></tr></table></figure><p>åé¢å‡è®¾ä»£ç ä»“åº“çš„æ ¹ç›®å½•ä¸º<code>&lt;ROOT&gt;</code>æ¥è¿›è¡Œå‘½ä»¤è¯´æ˜ã€‚</p><p>åŸºäº Pythonè‡ªå¸¦çš„ venv æ¥æ­å»ºéš”ç¦»çš„ç¯å¢ƒï¼Œå¹¶è¿›è¡Œä¾èµ–å®‰è£…:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> &lt;ROOT&gt;</span><br><span class="line">python -m venv talkgpt4all</span><br><span class="line"><span class="built_in">source</span> talkgpt4all/bin/activate</span><br><span class="line">pip install -U pip</span><br><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure><h3 id="3-2-Whisper-è¯­éŸ³è½¬æ–‡æœ¬æ¨¡å‹ä¸‹è½½"><a href="#3-2-Whisper-è¯­éŸ³è½¬æ–‡æœ¬æ¨¡å‹ä¸‹è½½" class="headerlink" title="3.2 Whisper è¯­éŸ³è½¬æ–‡æœ¬æ¨¡å‹ä¸‹è½½"></a>3.2 Whisper è¯­éŸ³è½¬æ–‡æœ¬æ¨¡å‹ä¸‹è½½</h3><p>Whisper æ¨¡å‹åœ¨è°ƒç”¨æ—¶ä¼šè‡ªåŠ¨ä¸‹è½½ï¼Œä½†æœ‰æ—¶å€™åœ¨å‘½ä»¤è¡Œä¸‹è½½é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æå‰ä¸‹è½½åæ”¾ç½®åˆ°å¯¹åº”ç›®å½•ï¼Œè§£å†³è¿™ä¸ªé—®é¢˜ã€‚<br>Whisper çš„æ‰€æœ‰æ¨¡å‹åœ°å€å‚è§<a href="https://github.com/openai/whisper/blob/b80bcf610d89960bc658b61af9c333fc6d978d78/whisper/__init__.py#L18-L29">è¿™é‡Œ</a>ï¼Œæˆ‘ä»¬ç”¨çš„æ˜¯<code>base.pt</code>ï¼Œåœ°å€æ˜¯<a href="https://openaipublic.azureedge.net/main/whisper/models/ed3a0b6b1c0edf879ad9b11b1af5a0e6ab5db9205f891f668f8b0e6c6326e34e/base.pt">https://openaipublic.azureedge.net/main/whisper/models/ed3a0b6b1c0edf879ad9b11b1af5a0e6ab5db9205f891f668f8b0e6c6326e34e/base.pt</a>ï¼Œæ”¾ç½®çš„ç›®å½•æ˜¯<code>$HOME/.cache/whisper</code>ï¼ˆWindowsä¸Šæ˜¯<code>C:\Users\username\.cache\whisper</code>),é€šè¿‡æµè§ˆå™¨æˆ– wget ä¸‹è½½<code>base.pt</code>åˆ°è¿™ä¸ªç›®å½•å°±è¡Œã€‚</p><h3 id="3-3-GPT4All-è¯­è¨€æ¨¡å‹çš„ä¸‹è½½"><a href="#3-3-GPT4All-è¯­è¨€æ¨¡å‹çš„ä¸‹è½½" class="headerlink" title="3.3 GPT4All è¯­è¨€æ¨¡å‹çš„ä¸‹è½½"></a>3.3 GPT4All è¯­è¨€æ¨¡å‹çš„ä¸‹è½½</h3><p>è¯­è¨€æ¨¡å‹æ”¾ç½®ç›®å½•æ˜¯<code>&lt;ROOT&gt;/models</code>ï¼Œæ ¹æ® GPT4All <a href="https://github.com/nomic-ai/gpt4all#try-it-yourself">æ–‡æ¡£</a>ï¼Œä¸‹è½½æ–¹å¼åŒ…æ‹¬</p><ul><li><a href="https://the-eye.eu/public/AI/models/nomic-ai/gpt4all/gpt4all-lora-quantized.bin">é“¾æ¥</a>ç›´æ¥ä¸‹è½½</li><li><a href="https://tinyurl.com/gpt4all-lora-quantized">torrent</a>ä¸‹è½½</li></ul><p>é€‰æ‹©å…¶ä¸­ä¸€ç§æ–¹å¼ï¼Œå°†ä¸‹è½½åçš„æ¨¡å‹æ”¾ç½®åˆ°<code>&lt;ROOT&gt;/models</code>ç›®å½•ä¸‹ã€‚</p><h3 id="3-3-GPT4All-èŠå¤©ç¨‹åºä¸‹è½½"><a href="#3-3-GPT4All-èŠå¤©ç¨‹åºä¸‹è½½" class="headerlink" title="3.3 GPT4All èŠå¤©ç¨‹åºä¸‹è½½"></a>3.3 GPT4All èŠå¤©ç¨‹åºä¸‹è½½</h3><p>GPT4All çš„ä½œè€…æ‰“åŒ…äº†å¤šå¹³å°çš„äºŒè¿›åˆ¶èŠå¤©ç¨‹åºï¼Œå¯ä»¥ä¸‹è½½åç›´æ¥ä½¿ç”¨ï¼Œä¸ç”¨ä»æºç ç¼–è¯‘ C++ æ–‡ä»¶ã€‚</p><p>èŠå¤©ç¨‹åºçš„æ”¾ç½®ç›®å½•æ˜¯<code>&lt;ROOT&gt;/bin</code>ï¼Œä¸åŒå¹³å°çš„ä¸‹è½½åœ°å€å¦‚ä¸‹ï¼š</p><ul><li>Mac M1: <a href="https://raw.githubusercontent.com/nomic-ai/gpt4all/main/chat/gpt4all-lora-quantized-OSX-m1">https://raw.githubusercontent.com/nomic-ai/gpt4all/main/chat/gpt4all-lora-quantized-OSX-m1</a></li><li>Mac Intel : <a href="https://raw.githubusercontent.com/nomic-ai/gpt4all/main/chat/gpt4all-lora-quantized-OSX-Intel">https://raw.githubusercontent.com/nomic-ai/gpt4all/main/chat/gpt4all-lora-quantized-OSX-Intel</a></li><li>Linux : <a href="https://raw.githubusercontent.com/nomic-ai/gpt4all/main/chat/gpt4all-lora-quantized-linux-x86">https://raw.githubusercontent.com/nomic-ai/gpt4all/main/chat/gpt4all-lora-quantized-linux-x86</a></li><li>Windows : <a href="https://raw.githubusercontent.com/nomic-ai/gpt4all/main/chat/gpt4all-lora-quantized-win64.exe">https://raw.githubusercontent.com/nomic-ai/gpt4all/main/chat/gpt4all-lora-quantized-win64.exe</a></li></ul><p>ä¸‹è½½ä½ çš„å¹³å°çš„æ–‡ä»¶ï¼Œæ”¾ç½®åˆ°<code>&lt;ROOT&gt;/bin</code>ã€‚</p><h3 id="3-4-æ–‡æœ¬è½¬è¯­éŸ³ç¨‹åºä¸‹è½½"><a href="#3-4-æ–‡æœ¬è½¬è¯­éŸ³ç¨‹åºä¸‹è½½" class="headerlink" title="3.4 æ–‡æœ¬è½¬è¯­éŸ³ç¨‹åºä¸‹è½½"></a>3.4 æ–‡æœ¬è½¬è¯­éŸ³ç¨‹åºä¸‹è½½</h3><p>åœ¨ Mac ä¸‹ï¼Œè‡ªå¸¦<a href="https://ss64.com/osx/say.html">sayå‘½ä»¤</a>ï¼Œå¯ä»¥å°†æ–‡æœ¬è½¬è¯­éŸ³ï¼Œå› æ­¤ä¸éœ€è¦é¢å¤–å®‰è£…å·¥å…·ã€‚</p><p>åœ¨ Linux ä¸‹ï¼Œæœ‰<a href="https://espeak.sourceforge.net/">espeak</a>å‘½ä»¤å¯ä»¥æ¥å®Œæˆæ–‡æœ¬è½¬è¯­éŸ³ï¼Œä½†éœ€è¦é¢å¤–å®‰è£…ï¼ŒUbuntuä¸‹çš„å®‰è£…å‘½ä»¤ä¸º<code>sudo apt install espeak</code>ï¼Œåˆ«çš„å‘è¡Œç‰ˆä¹Ÿå¯ä»¥ç”¨åŒ…ç®¡ç†å®‰è£…ã€‚å¦‚æœä¸è¡Œçš„è¯ï¼Œå°è¯•<a href="https://espeak.sourceforge.net/download.html">ä¸‹è½½æºç </a>è‡ªè¡Œç¼–è¯‘å®‰è£…ã€‚</p><p>Windows ä¸‹æœ‰ä¸€ä¸ª say å‘½ä»¤çš„æ›¿ä»£ <a href="https://github.com/p-groarke/wsay">wsay</a>, å¯ä»¥åœ¨<a href="https://github.com/p-groarke/wsay/releases/tag/v1.5.0">è¿™é‡Œ</a>ä¸‹è½½ wsay.exeï¼Œæ”¾ç½®åˆ°<code>&lt;ROOT&gt;/bin</code>ç›®å½•ä¸‹ã€‚</p><h3 id="4-ä½¿ç”¨"><a href="#4-ä½¿ç”¨" class="headerlink" title="4. ä½¿ç”¨"></a>4. ä½¿ç”¨</h3><p>å®‰è£…å®Œæˆåï¼Œè¿›å…¥<code>&lt;ROOT&gt;</code>ç›®å½•ï¼Œå¯ç”¨è™šæ‹Ÿç¯å¢ƒï¼Œä½¿ç”¨<code>python chat.py --platform &lt;platform&gt;</code>è¿è¡Œç¨‹åºï¼Œ<code>&lt;platform&gt;</code>åˆ†åˆ«æ˜¯<code>mac-m1</code>, <code>mac-intel</code>, <code>linux</code>, <code>windows</code>ã€‚</p><p>Mac M1:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python chat.py --platform mac-m1</span><br></pre></td></tr></table></figure><p>Mac Intel:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python chat.py --platform mac-intel</span><br></pre></td></tr></table></figure><p>Linux:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python chat.py --platform linux</span><br></pre></td></tr></table></figure><p>Windows:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python chat.py --platform windows</span><br></pre></td></tr></table></figure><p>âš ï¸æ³¨æ„ï¼šç›®å‰åªæµ‹è¯•è¿‡ Mac M1 å’Œ Windowsï¼Œåˆ«çš„å¹³å°æœªæµ‹è¯•ï¼Œå¦‚æœ‰é—®é¢˜ï¼Œæ¬¢è¿æ <a href="https://github.com/vra/talkGPT4All/issues">issue</a> å’Œ <a href="https://github.com/vra/talkGPT4All/pulls">PR</a> ã€‚</p><p>åœ¨ Mac ä¸Šä½¿ç”¨æ•ˆæœå¦‚ä¸‹:<br><img data-src="/imgs/talkgpt4all-mac-m1.jpg"></p><p>ä¹Ÿå¯ä»¥å‚è§æœ¬æ–‡å¼€å¤´çš„è§†é¢‘æˆ–<a href="https://www.zhihu.com/zvideo/1625779747656515584">è¿™é‡Œ</a>ã€‚</p><h3 id="5-åç»­æ”¹è¿›æ€è·¯"><a href="#5-åç»­æ”¹è¿›æ€è·¯" class="headerlink" title="5. åç»­æ”¹è¿›æ€è·¯"></a>5. åç»­æ”¹è¿›æ€è·¯</h3><p>ç›®å‰å®ç°è¿˜æ˜¯æ¯”è¾ƒç²—ç³™ï¼Œè®¡åˆ’åç»­ä¼šå¢åŠ ä¸‹é¢çš„åŠŸèƒ½ï¼ˆæŒ‰å®ç°éš¾åº¦ä»ä½åˆ°é«˜æ’åˆ—ï¼‰ï¼š</p><ul><li>éªŒè¯ Linuxï¼ŒMac Intel å’Œ WSL2 ä¸‹èƒ½å¦æ­£å¸¸è¿è¡Œ</li><li>å¢åŠ å¤šè½®å¯¹è¯æ”¯æŒ</li><li>å¢åŠ ä¸­æ–‡æ”¯æŒ</li><li>å»æ‰ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶ç¨‹åºï¼ŒåŒ…å« llama.cpp æºç ï¼Œè‡ªè¡Œç¼–è¯‘ï¼Œæ”¯æŒæ›´çµæ´»çš„ä½¿ç”¨</li><li>æ›´å¤šæ•ˆæœæ›´å¥½æ¨¡å‹çš„æ·»åŠ </li></ul><p>æ¬¢è¿åŸºäºè¿™ä¸ªä»“åº“è¿›è¡Œä¿®æ”¹å’Œä»£ç åˆ†å‘ï¼ŒæœŸå¾…åˆ›é€ å‡ºæ›´æœ‰æ–°æ„ã€æ›´æœ‰åº”ç”¨ä»·å€¼çš„ä¸œè¥¿ï½</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;1-æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#1-æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;1. æ¦‚è¿°&quot;&gt;&lt;/a&gt;1. æ¦‚è¿°&lt;/h2&gt;&lt;p&gt;TL;DR: talkGPT4All æ˜¯ä¸€ä¸ªåœ¨PCæœ¬åœ°è¿è¡Œçš„åŸºäºtalkGPTå’ŒGPT4Allçš„è¯­éŸ³èŠå¤©ç¨‹åºï¼Œé€šè¿‡OpenAI Whisperå°†è¾“å…¥è¯­éŸ³è½¬æ–‡æœ¬ï¼Œå†å°†è¾“å…¥æ–‡æœ¬ä¼ ç»™GPT4Allè·å–å›ç­”æ–‡æœ¬ï¼Œæœ€ååˆ©ç”¨å‘éŸ³ç¨‹åºå°†æ–‡æœ¬è¯»å‡ºæ¥ï¼Œæ„å»ºäº†å®Œæ•´çš„è¯­éŸ³äº¤äº’èŠå¤©è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;å®é™…ä½¿ç”¨æ•ˆæœ&lt;a href=&quot;https://www.zhihu.com/zvideo/1625779747656515584&quot;&gt;è§†é¢‘&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å®é™…ä¸Šï¼Œå®ƒåªæ˜¯å‡ ä¸ªå·¥å…·çš„ç®€æ˜“ç»„åˆï¼Œæ²¡æœ‰ä»€ä¹ˆåˆ›æ–°çš„åœ°æ–¹ï¼ˆç”šè‡³ä¸æ”¯æŒå¤šè½®èŠå¤©ï¼Œåªæ”¯æŒè‹±æ–‡ï¼‰ï¼Œä½† talkGPT4All æœ‰ä¸‹é¢å‡ ä¸ªæ¯”è¾ƒå¥½çš„ç‰¹ç‚¹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ‰€æœ‰ç®—æ³•æœ¬åœ°è¿è¡Œï¼Œä¸æ¶‰åŠAPIçš„è°ƒç”¨ï¼Œé¿å…äº†å›½å†…æ— æ³•è®¿é—®OpenAI APIçš„é—®é¢˜&lt;/li&gt;
&lt;li&gt;CPU è¿è¡Œï¼Œæ— é¡» GPU æ˜¾å¡&lt;/li&gt;
&lt;li&gt;å å†…å­˜å°ï¼Œå®æµ‹8Gå†…å­˜å°±å¯ä»¥è·‘èµ·æ¥&lt;/li&gt;
&lt;li&gt;é€Ÿåº¦è¿˜å¯ä»¥ï¼Œæµ‹è¯•8G Windows ä¸€è½®èŠå¤©å°äº1åˆ†é’Ÿï¼Œ 16G Mac ä¸€è½®èŠå¤©å°äº30ç§’&lt;/li&gt;
&lt;li&gt;é›†æˆçš„AIè¿˜ç®—æ™ºèƒ½ï¼Œè‡³å°‘ç­”èƒ½å¯¹é¢˜ï¼Œå›ç­”çœ‹èµ·æ¥æ˜¯ç¬¦åˆè‹±è¯­è¯­æ³•çš„&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç›®å‰æ”¯æŒå¹³å°å’ŒéªŒè¯çš„æƒ…å†µå¦‚ä¸‹:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Mac M1ï¼Œå·²ç»éªŒè¯å¯ç”¨&lt;/li&gt;
&lt;li&gt;Windowsï¼Œå·²ç»éªŒè¯å¯ç”¨&lt;/li&gt;
&lt;li&gt;Mac intelï¼ŒæœªéªŒè¯&lt;/li&gt;
&lt;li&gt;Linuxï¼ŒæœªéªŒè¯&lt;br&gt;å¦‚æœæœ‰å¯¹åº”æœºå™¨çš„æœ‹å‹æ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥å¸®å¿™éªŒè¯ä¸€ä¸‹ï¼Œæœ‰é—®é¢˜å¯ä»¥æPRå’Œissueã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æƒ³ä½“éªŒçš„æœ‹å‹å¯ä»¥å‚è€ƒ GitHub READMEè¿›è¡Œå¿«é€Ÿå®‰è£…ï¼Œä¹Ÿå¯ä»¥åœ¨è¿™ç¯‡æ–‡ç« ä¸­è·Ÿç€æˆ‘ä¸€æ­¥æ­¥æ¥è¿›è¡Œã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="Linux" scheme="http://vra.github.io/tags/Linux/"/>
    
    <category term="AI" scheme="http://vra.github.io/tags/AI/"/>
    
    <category term="ChatBot" scheme="http://vra.github.io/tags/ChatBot/"/>
    
    <category term="GPT" scheme="http://vra.github.io/tags/GPT/"/>
    
    <category term="Whisper" scheme="http://vra.github.io/tags/Whisper/"/>
    
    <category term="Mac" scheme="http://vra.github.io/tags/Mac/"/>
    
    <category term="Windows" scheme="http://vra.github.io/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>neovim telescope æ’ä»¶ç®€è¦æ•™ç¨‹</title>
    <link href="http://vra.github.io/2023/03/28/neovim-telescope/"/>
    <id>http://vra.github.io/2023/03/28/neovim-telescope/</id>
    <published>2023-03-28T15:44:37.000Z</published>
    <updated>2023-03-28T16:23:19.254Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1. æ¦‚è¿°"></a>1. æ¦‚è¿°</h2><p><a href="https://github.com/nvim-telescope/telescope.nvim/">telescope</a> æ˜¯ä¸€æ¬¾å¼ºå¤§çš„ neovim æ’ä»¶ï¼Œå¯ä»¥åœ¨ neovim ä¸­æä¾›æ–‡ä»¶åæœç´¢å’Œæ–‡æœ¬å†…å®¹æœç´¢çš„åŠŸèƒ½ï¼Œä»¥åŠæ›´å¤šå¤æ‚çš„åŠŸèƒ½ï¼Œå…·ä½“çš„show caseå¯ä»¥çœ‹<a href="https://github.com/nvim-telescope/telescope.nvim/wiki/Showcase">è¿™é‡Œ</a>ã€‚æˆ‘å®‰è£… telescope ä¸»è¦æ˜¯æƒ³åˆ©ç”¨å®ƒåœ¨å¤§å‹é¡¹ç›®ä¸­çš„æ–‡ä»¶åæœç´¢å’Œæ–‡æœ¬å†…å®¹æœç´¢èƒ½åŠ›ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹å®‰è£…æµç¨‹å’Œä½¿ç”¨æ¦‚è¦ã€‚</p><span id="more"></span><h2 id="2-å®‰è£…"><a href="#2-å®‰è£…" class="headerlink" title="2. å®‰è£…"></a>2. å®‰è£…</h2><p>é¦–å…ˆéœ€è¦å®‰è£… neovimã€‚å…·ä½“æ­¥éª¤å¯ä»¥çœ‹<a href="https://github.com/neovim/neovim/wiki/Installing-Neovim">è¿™é‡Œ</a>ã€‚</p><p>æ³¨æ„ telescope éœ€è¦nvim 0.7.0åŠä»¥åçš„ç‰ˆæœ¬ï¼Œå› æ­¤å¦‚æœä½ neovim ç‰ˆæœ¬æœ¬èº«æ¯”è¾ƒä½çš„è¯ï¼Œéœ€è¦å‡çº§ã€‚</p><p>å®‰è£… neovim åè¿˜éœ€è¦è¿›è¡Œé…ç½®ã€‚æˆ‘çš„ neovim é…ç½®æ˜¯å¤åˆ¶çš„è¿™ä¸ª<a href="https://github.com/bigeagle/neovim-config">ä»“åº“</a>ï¼ŒæŒ‰ç…§READMEæ¥è¿›è¡Œæ“ä½œï¼Œå¯ä»¥å¿«é€Ÿåœ°å®‰è£…å¥½ï¼Œè¿™é‡Œä¸èµ˜è¿°ã€‚</p><p>telescope æ”¯æŒå¤šç§æ’ä»¶ç³»ç»Ÿï¼Œæˆ‘ä½¿ç”¨çš„ vim-plugï¼Œåœ¨<code>~/.config/nvim/init.vim</code> æ·»åŠ ä¸‹é¢ä¸¤è¡Œï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Plug <span class="string">&#x27;nvim-lua/plenary.nvim&#x27;</span></span><br><span class="line">Plug <span class="string">&#x27;nvim-telescope/telescope.nvim&#x27;</span>, &#123; <span class="string">&#x27;tag&#x27;</span>: <span class="string">&#x27;0.1.1&#x27;</span> &#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨nvimä¸­è¾“å…¥<code>:PlugInstall</code> æ¥å®‰è£…æ’ä»¶ã€‚</p><p>ç”±äºæ’ä»¶æ˜¯åœ¨GitHubä¸Šä¸‹è½½çš„ï¼Œæœ‰æ—¶å€™å¯èƒ½å®‰è£…ä¼šå¡ä½ï¼Œéœ€è¦å¤šå°è¯•å‡ æ¬¡ï¼Œå³å¤šæ¬¡æ‰§è¡Œ<code>:PlugInstall</code>å‘½ä»¤ã€‚</p><p>å®‰è£…å®Œæˆåï¼Œæ‰§è¡Œ<code>:Telescope find_files</code>æ¥éªŒè¯å®‰è£…æ˜¯å¦æ­£ç¡®ã€‚å¦‚æœèƒ½å¼¹å‡ºè¾“å…¥æ¡†ï¼Œè¯´æ˜å®‰è£…æˆåŠŸäº†ã€‚</p><p>è¿™ä¸ªå‘½ä»¤ç”¨æ¥æ¨¡ç³ŠåŒ¹é…å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åï¼Œå¯¹äºå¿«é€Ÿåˆ‡æ¢ç¼–è¾‘æ–‡ä»¶éå¸¸æ–¹ä¾¿ã€‚</p><h2 id="3-live-grep-åŠŸèƒ½"><a href="#3-live-grep-åŠŸèƒ½" class="headerlink" title="3. live_grep åŠŸèƒ½"></a>3. <code>live_grep</code> åŠŸèƒ½</h2><p>é™¤äº†<code>find_files</code>å‘½ä»¤ï¼Œ<code>live_grep</code>ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„å‘½ä»¤ï¼Œå¯ä»¥å¿«é€Ÿæœç´¢æŸäº›ä»£ç ï¼ŒæŠŠå«æœç´¢ä»£ç çš„æ–‡ä»¶æ‰“å¼€ã€‚</p><p>è¿™ä¸ªåŠŸèƒ½éœ€è¦ä¾èµ–<a href="https://github.com/BurntSushi/ripgrep">ripgrep</a>ï¼Œå› æ­¤è¦å…ˆå®‰è£…å®ƒï¼Œå…·ä½“å®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mac</span></span><br><span class="line">brew install ripgrep</span><br><span class="line"></span><br><span class="line"><span class="comment"># debian/ubuntu</span></span><br><span class="line">sudo apt-get install ripgrep</span><br><span class="line"></span><br><span class="line"><span class="comment"># arch</span></span><br><span class="line">pacman -S ripgrep</span><br><span class="line"></span><br><span class="line"><span class="comment"># centos</span></span><br><span class="line">sudo yum-config-manager --add-repo=https://copr.fedorainfracloud.org/coprs/carlwgeorge/ripgrep/repo/epel-7/carlwgeorge-ripgrep-epel-7.repo</span><br><span class="line">sudo yum install ripgrep</span><br><span class="line"></span><br><span class="line"><span class="comment"># windows </span></span><br><span class="line">scoop install ripgrep</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œååœ¨å‘½ä»¤è¡Œè¾“å…¥<code>ag -h</code> éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸã€‚</p><p>ag å®‰è£…å®Œæˆåï¼Œåœ¨nvimè¾“å…¥<code>:Telescope live_grep</code> å°±å¯ä»¥æœç´¢ä½ æƒ³è¦çš„ä»£ç äº†ã€‚</p><h2 id="4-å¿«æ·é”®"><a href="#4-å¿«æ·é”®" class="headerlink" title="4. å¿«æ·é”®"></a>4. å¿«æ·é”®</h2><p>ä¸Šé¢çš„ä¸¤ä¸ªå¸¸ç”¨åŠŸèƒ½è¾“å…¥éƒ½æ¯”è¾ƒç¹çï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆå¿«æ·é”®å¯ä»¥å¿«é€Ÿæ‰“å¼€å‘¢ï¼Ÿæ˜¯æœ‰çš„ï¼Œå®˜æ–¹GitHubç»™å‡ºäº†å‡ è¡Œä»£ç ï¼ŒåŠ å…¥åˆ°<code>~/.config/nvim/init.vim</code>çš„æœ€åï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&quot; Find files using Telescope command-line sugar.</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span>ff <span class="symbol">&lt;cmd&gt;</span>Telescope find_files<span class="symbol">&lt;cr&gt;</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span>fg <span class="symbol">&lt;cmd&gt;</span>Telescope live_grep<span class="symbol">&lt;cr&gt;</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span>fb <span class="symbol">&lt;cmd&gt;</span>Telescope <span class="keyword">buffers</span><span class="symbol">&lt;cr&gt;</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span>fh <span class="symbol">&lt;cmd&gt;</span>Telescope help_tags<span class="symbol">&lt;cr&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Using Lua functions</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span>ff <span class="symbol">&lt;cmd&gt;</span><span class="keyword">lua</span> require(<span class="string">&#x27;telescope.builtin&#x27;</span>).find_files()<span class="symbol">&lt;cr&gt;</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span>fg <span class="symbol">&lt;cmd&gt;</span><span class="keyword">lua</span> require(<span class="string">&#x27;telescope.builtin&#x27;</span>).live_grep()<span class="symbol">&lt;cr&gt;</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span>fb <span class="symbol">&lt;cmd&gt;</span><span class="keyword">lua</span> require(<span class="string">&#x27;telescope.builtin&#x27;</span>).<span class="keyword">buffers</span>()<span class="symbol">&lt;cr&gt;</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span>fh <span class="symbol">&lt;cmd&gt;</span><span class="keyword">lua</span> require(<span class="string">&#x27;telescope.builtin&#x27;</span>).help_tags()<span class="symbol">&lt;cr&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨Normalæ¨¡å¼è¾“å…¥<code>\ff</code>å°±å¯ä»¥æ‰“å¼€<code>find_files</code>å‘½ä»¤çª—å£ï¼Œè¾“å…¥<code>\fg</code>å°±å¯ä»¥æ‰“å¼€<code>live_grep</code>çª—å£äº†ã€‚</p><p>æ›´å¤šè¯¦ç»†å‘½ä»¤å’ŒåŠŸèƒ½å‚è§GitHub é¡µé¢ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;1-æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#1-æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;1. æ¦‚è¿°&quot;&gt;&lt;/a&gt;1. æ¦‚è¿°&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/nvim-telescope/telescope.nvim/&quot;&gt;telescope&lt;/a&gt; æ˜¯ä¸€æ¬¾å¼ºå¤§çš„ neovim æ’ä»¶ï¼Œå¯ä»¥åœ¨ neovim ä¸­æä¾›æ–‡ä»¶åæœç´¢å’Œæ–‡æœ¬å†…å®¹æœç´¢çš„åŠŸèƒ½ï¼Œä»¥åŠæ›´å¤šå¤æ‚çš„åŠŸèƒ½ï¼Œå…·ä½“çš„show caseå¯ä»¥çœ‹&lt;a href=&quot;https://github.com/nvim-telescope/telescope.nvim/wiki/Showcase&quot;&gt;è¿™é‡Œ&lt;/a&gt;ã€‚æˆ‘å®‰è£… telescope ä¸»è¦æ˜¯æƒ³åˆ©ç”¨å®ƒåœ¨å¤§å‹é¡¹ç›®ä¸­çš„æ–‡ä»¶åæœç´¢å’Œæ–‡æœ¬å†…å®¹æœç´¢èƒ½åŠ›ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹å®‰è£…æµç¨‹å’Œä½¿ç”¨æ¦‚è¦ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="Linux" scheme="http://vra.github.io/tags/Linux/"/>
    
    <category term="Vim" scheme="http://vra.github.io/tags/Vim/"/>
    
    <category term="NeoVim" scheme="http://vra.github.io/tags/NeoVim/"/>
    
  </entry>
  
  <entry>
    <title>libtorchç³»åˆ—æ•™ç¨‹2ï¼štorch::Tensorçš„ä½¿ç”¨</title>
    <link href="http://vra.github.io/2023/02/25/libtorch-tutorial2/"/>
    <id>http://vra.github.io/2023/02/25/libtorch-tutorial2/</id>
    <published>2023-02-25T09:15:46.000Z</published>
    <updated>2023-02-27T04:48:49.191Z</updated>
    
    <content type="html"><![CDATA[<p>ç³»åˆ—æ•™ç¨‹åˆ—è¡¨ï¼š</p><ul><li><a href="https://vra.github.io/2023/02/25/libtorch-tutorial1/">Libtorchç³»åˆ—æ•™ç¨‹1ï¼šä¸€ä¸ªä¸æ»‘çš„C++ Tensoråº“</a> </li><li><a href="https://vra.github.io/2023/02/25/libtorch-tutorial2/">Libtorchç³»åˆ—æ•™ç¨‹2ï¼štorch::Tensorçš„ä½¿ç”¨</a> </li></ul><p>è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æš‚æ—¶å¿½ç•¥ç½‘ç»œè®­ç»ƒå’Œæ¨ç†ï¼Œè¯¦ç»†å±•å¼€Libtorchä¸­Tensorå¯¹è±¡çš„ä½¿ç”¨ï¼Œçœ‹çœ‹å°†Libtorchå½“ä½œä¸€ä¸ªçº¯ç²¹çš„Tensoråº“æ¥ä½¿ç”¨æ—¶ï¼Œæœ‰å“ªäº›æ³¨æ„äº‹é¡¹ã€‚å¦‚æœ‰æœªæ¶‰åŠçš„å†…å®¹ï¼Œè¯·è®¿é—®Libtorch<a href="https://pytorch.org/cppdocs/">å®˜æ–¹æ–‡æ¡£</a>ï¼Œé€šè¿‡æœç´¢æ¡†è·å–æ›´å¤šçš„ä¿¡æ¯ã€‚Libtorchçš„ç¯å¢ƒæ­å»ºå‚è€ƒ<a href="https://vra.github.io/2023/02/25/libtorch-tutorial1/">ä¸Šä¸€ç¯‡æ–‡ç« </a>ã€‚</p><span id="more"></span><h2 id="1-torch-TensoråŸºæœ¬æ“ä½œ"><a href="#1-torch-TensoråŸºæœ¬æ“ä½œ" class="headerlink" title="1. torch::TensoråŸºæœ¬æ“ä½œ"></a>1. torch::TensoråŸºæœ¬æ“ä½œ</h2><p>Libtorchä¸­çš„Tensoræ˜¯ä¸Pytorchä¸­çš„Tensorå¯¹åº”çš„ï¼Œä½¿ç”¨æ–¹å¼ä¸Šå¾ˆç±»ä¼¼ï¼Œåªåœ¨ä¸€äº›Pythonè¯­æ³•C++ä¸æ”¯æŒçš„æ—¶å€™æœ‰äº›ä¸åŒï¼Œä¾‹å¦‚sliceæ“ä½œã€‚<br>ä½¿ç”¨Libtorchå‰éœ€è¦åŒ…å« Libtorch çš„å¤´æ–‡ä»¶<code>torch/torch.h</code>:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;torch/torch.h&gt;</span></span></span><br></pre></td></tr></table></figure><p>è¿™ç¯‡æ–‡ç« ç”¨åˆ°çš„æ‰€æœ‰å‡½æ•°éƒ½åœ¨æ­¤å¤´æ–‡ä»¶ä¸­å£°æ˜ï¼Œè€Œä¸”æ‰€æœ‰çš„å‡½æ•°namespaceéƒ½æ˜¯<code>torch</code>ï¼Œå› æ­¤éƒ½å¯ä»¥ä»¥<code>torch::xxx</code>çš„å½¢å¼æ¥è°ƒç”¨ã€‚</p><h3 id="1-1-Tensoråˆ›å»º"><a href="#1-1-Tensoråˆ›å»º" class="headerlink" title="1.1 Tensoråˆ›å»º"></a>1.1 Tensoråˆ›å»º</h3><p>Tensor åˆ›å»ºçš„æ–¹å¼æ¯”è¾ƒå¤šï¼ŒåŒ…æ‹¬ä»å­—é¢é‡åˆ›å»ºï¼Œä»C++ åŸç”Ÿçš„æ•°ç»„åˆ›å»ºï¼Œä»vectoråˆ›å»ºï¼Œä»Libtorchè‡ªå¸¦çš„å‡½æ•°åˆ›å»ºç­‰ã€‚</p><p>ä»å­—é¢é‡åˆ›å»º:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch::Tensor foo = torch::<span class="built_in">tensor</span>(&#123;<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>, <span class="number">4.0</span>&#125;);</span><br></pre></td></tr></table></figure><p>ä»C++ åŸç”Ÿçš„floatæ•°ç»„åˆ›å»ºï¼Œä½¿ç”¨<code>from_blob</code>å‡½æ•°:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">float</span> arr[] = &#123;<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>, <span class="number">4.0</span>&#125;;</span><br><span class="line"><span class="comment">// ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºåˆ›å»ºçš„Tensor shapeï¼Œä¼šè‡ªåŠ¨å¯¹åŸç”Ÿæ•°ç»„è¿›è¡Œreshape</span></span><br><span class="line">torch::Tensor bar = torch::<span class="built_in">from_blob</span>(arr, &#123;<span class="number">1</span>, <span class="number">4</span>&#125;); <span class="comment">// shapeæ˜¯[1, 4]</span></span><br><span class="line">bar = torch::<span class="built_in">from_blob</span>(arr, &#123;<span class="number">2</span>, <span class="number">2</span>&#125;); <span class="comment">// shapeæ˜¯[2, 2]</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºåˆ›å»ºçš„Tensor shapeï¼Œä¼šè‡ªåŠ¨å¯¹åŸç”Ÿæ•°ç»„è¿›è¡Œreshapeã€‚</p><p>ä»vector åˆ›å»ºï¼Œä½¿ç”¨<code>from_blob</code>å‡½æ•°:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">std::vector&lt;<span class="keyword">float</span>&gt; v = &#123;<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>, <span class="number">4.0</span>&#125;;</span><br><span class="line">bar = torch::<span class="built_in">from_blob</span>(v.<span class="built_in">data</span>(), &#123;<span class="number">2</span>, <span class="number">2</span>&#125;);</span><br></pre></td></tr></table></figure><p>è¿˜å¯ä»¥ç”¨Libtorchçš„å‡½æ•°åˆ›å»ºï¼Œè·ŸNumpyå’ŒPytorchç±»ä¼¼:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">foo = torch::<span class="built_in">arange</span>(<span class="number">4</span>);</span><br><span class="line">foo = torch::<span class="built_in">eye</span>(<span class="number">2</span>);</span><br><span class="line">foo = torch::<span class="built_in">ones</span>(<span class="number">2</span>);</span><br><span class="line">bar = torch::<span class="built_in">ones_like</span>(foo);</span><br><span class="line">foo = torch::<span class="built_in">rand</span>(<span class="number">4</span>);</span><br><span class="line">foo = torch::<span class="built_in">randn</span>(<span class="number">4</span>);</span><br><span class="line">foo = torch::<span class="built_in">zeros</span>(<span class="number">2</span>);</span><br><span class="line">bar = torch::<span class="built_in">zeros_like</span>(foo);</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå¥½ä»¥åï¼ŒTensorå¯¹åº”å¯ä»¥ç›´æ¥ç”¨<code>std::cout</code>æ¥è¾“å‡º:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">torch::Tensor foo = torch::<span class="built_in">tensor</span>(&#123;<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>, <span class="number">4.0</span>&#125;);</span><br><span class="line">std::cout &lt;&lt;<span class="string">&quot;==&gt; foo is:\n&quot;</span> &lt;&lt; foo &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">==&gt; foo is:</span><br><span class="line"> 1</span><br><span class="line"> 2</span><br><span class="line"> 3</span><br><span class="line"> 4</span><br><span class="line">[ CPUFloatType&#123;4&#125; ]</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æœ€åæ‰“å°äº†Tensorçš„ç±»å‹ã€‚</p><h3 id="1-2-Tensorå¯¹è±¡çš„å±æ€§å‡½æ•°"><a href="#1-2-Tensorå¯¹è±¡çš„å±æ€§å‡½æ•°" class="headerlink" title="1.2 Tensorå¯¹è±¡çš„å±æ€§å‡½æ•°"></a>1.2 Tensorå¯¹è±¡çš„å±æ€§å‡½æ•°</h3><p>åˆ›å»ºTensoråï¼Œæˆ‘ä»¬è¿˜éœ€è¦çœ‹åˆ°å®ƒçš„ä¸€äº›å±æ€§ï¼Œåˆ¤æ–­æ˜¯å¦è·Ÿé¢„æœŸç›¸ç¬¦ã€‚æ³¨æ„Libtorchçš„Tensoræ˜¯æ²¡æœ‰å…¬å¼€å¯è®¿é—®çš„å±æ€§attributeçš„ï¼ŒTensorä¿¡æ¯éœ€è¦å±æ€§å‡½æ•°æ¥è·å–ã€‚å¸¸è§çš„å±æ€§å‡½æ•°åŒ…æ‹¬:</p><ul><li>dim(): Tensorçš„ç»´åº¦</li><li>sizes(): è·ŸPytorchä¸­çš„shapeå±æ€§ä¸€æ ·</li><li>size(n): ç¬¬Nä¸ªç»´åº¦çš„shape</li><li>numel(): æ€»çš„å…ƒç´ æ•°ç›®ï¼Œsizesä¸­çš„æ¯ä¸ªå…ƒç´ ç›¸ä¹˜</li><li>dtype(): æ•°æ®ç±»å‹</li><li>device(): Tensoræ‰€åœ¨çš„è®¾å¤‡ç±»å‹ï¼ŒCPU, CUDA, MPSç­‰ã€‚</li></ul><p>ä½¿ç”¨æ–¹å¼å¦‚ä¸‹:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Tensor å±æ€§å‡½æ•°</span></span><br><span class="line">torch::Tensor foo = torch::<span class="built_in">randn</span>(&#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">224</span>, <span class="number">224</span>&#125;);</span><br><span class="line"><span class="keyword">auto</span> dim = foo.<span class="built_in">dim</span>(); <span class="comment">// 4</span></span><br><span class="line"><span class="keyword">auto</span> sizes = foo.<span class="built_in">sizes</span>(); <span class="comment">// [1, 3, 224, 224]</span></span><br><span class="line"><span class="keyword">auto</span> size_0 = foo.<span class="built_in">size</span>(<span class="number">0</span>); <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">auto</span> numel = foo.<span class="built_in">numel</span>(); <span class="comment">// 150528</span></span><br><span class="line"><span class="keyword">auto</span> dtype = foo.<span class="built_in">dtype</span>(); <span class="comment">// float</span></span><br><span class="line"><span class="keyword">auto</span> scalar_type = foo.<span class="built_in">scalar_type</span>(); <span class="comment">// Float</span></span><br><span class="line"><span class="keyword">auto</span> device = foo.<span class="built_in">device</span>(); <span class="comment">// cpu</span></span><br></pre></td></tr></table></figure><h3 id="1-3-Tensorå¯¹è±¡çš„ç´¢å¼•"><a href="#1-3-Tensorå¯¹è±¡çš„ç´¢å¼•" class="headerlink" title="1.3 Tensorå¯¹è±¡çš„ç´¢å¼•"></a>1.3 Tensorå¯¹è±¡çš„ç´¢å¼•</h3><p>Tensor é»˜è®¤æ˜¯æ”¯æŒ<code>[]</code>æ“ä½œç¬¦çš„ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨è¿™æ ·çš„æ–¹å¼æ¥è·å–å…ƒç´ ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> foo = torch::<span class="built_in">randn</span>(&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;);</span><br><span class="line"><span class="keyword">float</span> value = foo[<span class="number">0</span>][<span class="number">1</span>][<span class="number">2</span>][<span class="number">2</span>];</span><br></pre></td></tr></table></figure><p>å¦ä¸€ç§æ–¹å¼æ˜¯ç”¨Tensorå¯¹è±¡çš„<code>index</code>å‡½æ•°ï¼Œå®ƒçš„ä¼˜åŠ¿æ˜¯æ”¯æŒsliceã€‚<br>å¯¹äºå•ä¸ªå…ƒç´ ï¼Œå¯ä»¥ç±»ä¼¼Pytorchä¸­ï¼Œç›´æ¥ç”¨<code>index(&#123;i, j, k&#125;)</code>çš„æ–¹å¼æ¥ç´¢å¼•ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> foo = torch::<span class="built_in">randn</span>(&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;);</span><br><span class="line"><span class="keyword">float</span> value = foo.<span class="built_in">index</span>(&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>&#125;);</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆpythonä¸­å¾ˆå¸¸ç”¨çš„sliceå‘¢ï¼Ÿä¾‹å¦‚<code>foo[..., :2, 1:, :-1]</code>ï¼Œè¯¥æ€ä¹ˆåœ¨Libtorchä¸­è¡¨ç¤ºï¼Ÿ<br>è¿™é‡Œéœ€è¦ç”¨åˆ°<code>torch::indexing::Slice</code> å¯¹è±¡ï¼Œæ¥å®ç°Pythonä¸­çš„Sliceï¼Œçœ‹çœ‹ä¸‹é¢çš„ä¾‹å­ä½ å°±æ˜ç™½äº†ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> torch::indexing;</span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> foo = torch::<span class="built_in">randn</span>(&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;);</span><br><span class="line"><span class="comment">// ç­‰æ•ˆäºPythonä¸­çš„foo[:, 0:1, 2:, :-1]</span></span><br><span class="line"><span class="keyword">auto</span> bar = foo.<span class="built_in">index</span>(&#123;<span class="built_in">Slice</span>(), <span class="built_in">Slice</span>(<span class="number">0</span>, <span class="number">1</span>), <span class="built_in">Slice</span>(<span class="number">2</span>, None), <span class="built_in">Slice</span>(None, <span class="number">-1</span>)&#125;);</span><br></pre></td></tr></table></figure><p>åº”è¯¥æ˜¯èƒ½æ»¡è¶³Pythonä¸­sliceåŒæ ·çš„ä½¿ç”¨åœºæ™¯ã€‚</p><h3 id="1-4-æ›´æ–°Tensorä¸­å…ƒç´ çš„å€¼"><a href="#1-4-æ›´æ–°Tensorä¸­å…ƒç´ çš„å€¼" class="headerlink" title="1.4 æ›´æ–°Tensorä¸­å…ƒç´ çš„å€¼"></a>1.4 æ›´æ–°Tensorä¸­å…ƒç´ çš„å€¼</h3><p>æœ‰äº†ç´¢å¼•ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ›´æ–°Tensorçš„å€¼äº†ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">torch::Tensor foo = torch::<span class="built_in">tensor</span>(&#123;<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>, <span class="number">4.0</span>&#125;);</span><br><span class="line">foo[<span class="number">0</span>] = <span class="number">10.0</span>;</span><br><span class="line">foo.<span class="built_in">index</span>(&#123;<span class="number">0</span>&#125;) = <span class="number">2.0</span>;</span><br></pre></td></tr></table></figure><p>ä½†è¿˜æ²¡æ‰¾åˆ°ç”¨ç»™éƒ¨åˆ†Tensorå…ƒç´ èµ‹å€¼çš„æ–¹æ³•ï¼Œç±»ä¼¼Pythonä¸­çš„<code>foo[:2] = bar</code>ï¼Œæ¬¢è¿è¡¥å……ã€‚</p><h3 id="1-5-è·å–Tensorä¸­çš„æ•°æ®"><a href="#1-5-è·å–Tensorä¸­çš„æ•°æ®" class="headerlink" title="1.5 è·å–Tensorä¸­çš„æ•°æ®"></a>1.5 è·å–Tensorä¸­çš„æ•°æ®</h3><p>Tensoræ˜¯ä¸€ä¸ªLibtorchçš„å¯¹è±¡ï¼Œé‚£æ€ä¹ˆæŠŠå®ƒä¸­çš„æ•°æ®æ‹¿å‡ºæ¥ä¿å­˜åˆ°æ–‡ä»¶ä¸­æˆ–ä¼ ç»™åˆ«çš„å‡½æ•°å‘¢ï¼Ÿ<br>ä½¿ç”¨<code>data_ptr</code>å‡½æ•°å°±å¯ä»¥:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">torch::Tensor foo = torch::<span class="built_in">randn</span>(&#123;<span class="number">3</span>, <span class="number">3</span>&#125;);</span><br><span class="line"><span class="keyword">float</span>* data = foo.data_ptr&lt;<span class="keyword">float</span>&gt;();</span><br></pre></td></tr></table></figure><p>å¯¹äºå•ä¸ªå…ƒç´ çš„Tensorï¼Œè¿˜å¯ä»¥ç”¨<code>item</code>å‡½æ•°å¾—åˆ°å…·ä½“çš„æ•°å€¼:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">torch::Tensor one_element_tensor = foo.<span class="built_in">index</span>(&#123;<span class="built_in">Slice</span>(), <span class="built_in">Slice</span>(<span class="number">0</span>, <span class="number">1</span>), <span class="built_in">Slice</span>(<span class="number">0</span>, <span class="number">1</span>), <span class="built_in">Slice</span>(<span class="number">0</span>, <span class="number">1</span>)&#125;);</span><br><span class="line"><span class="keyword">float</span> value = one_element_tensor.item&lt;<span class="keyword">float</span>&gt;();</span><br></pre></td></tr></table></figure><h3 id="1-6-æ•°æ®ç±»å‹"><a href="#1-6-æ•°æ®ç±»å‹" class="headerlink" title="1.6 æ•°æ®ç±»å‹"></a>1.6 æ•°æ®ç±»å‹</h3><p>Libtorchä¸­æ”¯æŒfloat16, float32, float64, int8, int16, int32, uint8è¿™å‡ ç±»çš„Tensoræ•°æ®ç±»å‹ï¼Œå¯ä»¥ç”¨<code>to</code>å‡½æ•°æ¥è¿›è¡Œç±»å‹è½¬æ¢ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•°æ®ç±»å‹, å‚è§ https://pytorch.org/cppdocs/api/file_torch_csrc_api_include_torch_types.h.html#variables</span></span><br><span class="line">bar = foo.<span class="built_in">to</span>(torch::kF16);</span><br><span class="line">bar = foo.<span class="built_in">to</span>(torch::kF32);</span><br><span class="line">bar = foo.<span class="built_in">to</span>(torch::kF64);</span><br><span class="line">bar = foo.<span class="built_in">to</span>(torch::kFloat16);</span><br><span class="line">bar = foo.<span class="built_in">to</span>(torch::kFloat32);</span><br><span class="line">bar = foo.<span class="built_in">to</span>(torch::kFloat64);</span><br><span class="line">bar = foo.<span class="built_in">to</span>(torch::kI8);</span><br><span class="line">bar = foo.<span class="built_in">to</span>(torch::kI16);</span><br><span class="line">bar = foo.<span class="built_in">to</span>(torch::kI32);</span><br><span class="line">bar = foo.<span class="built_in">to</span>(torch::kI64);</span><br><span class="line">bar = foo.<span class="built_in">to</span>(torch::kInt8);</span><br><span class="line">bar = foo.<span class="built_in">to</span>(torch::kInt16);</span><br><span class="line">bar = foo.<span class="built_in">to</span>(torch::kInt32);</span><br><span class="line">bar = foo.<span class="built_in">to</span>(torch::kInt64);</span><br><span class="line">bar = foo.<span class="built_in">to</span>(torch::kU8);</span><br><span class="line">bar = foo.<span class="built_in">to</span>(torch::kUInt8);</span><br></pre></td></tr></table></figure><p>å…¨éƒ¨æ•°æ®ç±»å‹ï¼Œå‚è§å®˜æ–¹æ–‡æ¡£çš„<a href="https://pytorch.org/cppdocs/api/file_torch_csrc_api_include_torch_types.h.html#variables">æ•°æ®ç±»å‹é¡µé¢</a>ã€‚</p><h3 id="1-7-è®¾å¤‡ç±»å‹"><a href="#1-7-è®¾å¤‡ç±»å‹" class="headerlink" title="1.7 è®¾å¤‡ç±»å‹"></a>1.7 è®¾å¤‡ç±»å‹</h3><p>è®¾å¤‡ç±»å‹æ˜¯Tensorä¿å­˜çš„è®¾å¤‡çš„ç§ç±»ã€‚ç”±äºLibtorchä¸ä»…ä»…æ”¯æŒCPUï¼Œè¿˜æ”¯æŒå„ç§ç±»å‹çš„GPUï¼Œå› æ­¤æœ‰å¾ˆå¤šè®¾å¤‡ç±»å‹ã€‚</p><p>æ‰€æœ‰çš„è®¾å¤‡ç±»å‹å‚è§<a href="https://pytorch.org/cppdocs/api/file_c10_core_DeviceType.h.html#variables">è¿™é‡Œ</a>ã€‚<br>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè®¾å¤‡æ˜¯è·Ÿç¼–è¯‘æ—¶çš„é…ç½®ï¼Œæœºå™¨æ˜¯å¦æ”¯æŒå¼ºç›¸å…³çš„ï¼Œè€Œä¸”æŸäº›è®¾å¤‡æ”¯æŒå¹¶ä¸å¥½ï¼Œä¾‹å¦‚æˆ‘æƒ³ç”¨ä¸‹é¢çš„ä»£ç å°†CPUä¸Šçš„Tensorè½¬ç§»åˆ°MPSä¸Šï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> foo = torch::<span class="built_in">randn</span>(&#123;<span class="number">3</span>, <span class="number">3</span>&#125;);</span><br><span class="line"><span class="keyword">auto</span> bar = foo.<span class="built_in">to</span>(torch::kMPS);</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†è¿è¡Œæ—¶ä¼šæŠ¥ä¸‹é¢çš„é”™:</p><blockquote><p>libc++abi: terminating with uncaught exception of type c10::TypeError: Cannot convert a MPS Tensor to float64 dtype as the MPS framework doesnâ€™t support float64. Please use float32 instead.</p></blockquote><p>æç¤ºè¯´MPSä¸æ”¯æŒfloat64ï¼Œä½†æˆ‘æ‰“å°<code>foo</code>çš„ç±»å‹ï¼Œå®ƒå…¶å®æ˜¯float32ï¼Œæœ¬èº«æŠ¥é”™æ¯”è¾ƒå¥‡æ€ªï¼Œæœäº†ä¸€åœˆä¹Ÿæ²¡æ‰¾åˆ°æ€ä¹ˆè§£å†³ã€‚</p><h3 id="1-8-Tensor-å˜å½¢å‡½æ•°"><a href="#1-8-Tensor-å˜å½¢å‡½æ•°" class="headerlink" title="1.8 Tensor å˜å½¢å‡½æ•°"></a>1.8 Tensor å˜å½¢å‡½æ•°</h3><p>å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦å°†Tensorè¿›è¡Œå½¢çŠ¶çš„ä¿®æ”¹ï¼Œè¿™æ–¹é¢Libtorchæ”¯æŒçš„æ¯”è¾ƒå¥½ï¼Œè¿™äº›æ“ä½œéƒ½æ”¯æŒ:</p><ul><li>reshape</li><li>flatten</li><li>squeeze</li><li>unsqueeze</li><li>transpose</li><li>cat/concat/concatenate</li></ul><p>è€Œä¸”æ”¯æŒ<code>torch::reshape</code>è¿™ç§é™æ€å‡½æ•°å’Œ<code>tensor.reshape</code>è¿™ç§å¯¹è±¡å‡½æ•°ã€‚ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å˜å½¢æ“ä½œ</span></span><br><span class="line">bar = foo.<span class="built_in">reshape</span>(&#123;<span class="number">2</span>, <span class="number">-1</span>&#125;);</span><br><span class="line">bar = foo.<span class="built_in">flatten</span>();</span><br><span class="line">bar = foo.<span class="built_in">squeeze</span>();</span><br><span class="line">bar = foo.<span class="built_in">unsqueeze</span>(<span class="number">0</span>);</span><br><span class="line">bar = torch::<span class="built_in">unsqueeze</span>(foo, <span class="number">-1</span>);</span><br><span class="line">bar = foo.<span class="built_in">transpose</span>(<span class="number">0</span>, <span class="number">1</span>).<span class="built_in">transpose</span>(<span class="number">2</span>, <span class="number">3</span>).<span class="built_in">transpose</span>(<span class="number">3</span>, <span class="number">1</span>);</span><br><span class="line">bar = torch::<span class="built_in">transpose</span>(foo, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">bar = torch::<span class="built_in">cat</span>(&#123;foo, foo&#125;, <span class="number">2</span>);</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„åœ°æ–¹æ˜¯transposeåªæ”¯æŒä¸¤ä¸ªè½´çš„äº¤æ¢ï¼Œå¤šä¸ªè½´çš„äº¤æ¢éœ€è¦è°ƒç”¨å¤šæ¬¡æ¥å®ç°ã€‚</p><h3 id="1-9-Tensorä¹‹é—´çš„æ“ä½œå‡½æ•°"><a href="#1-9-Tensorä¹‹é—´çš„æ“ä½œå‡½æ•°" class="headerlink" title="1.9 Tensorä¹‹é—´çš„æ“ä½œå‡½æ•°"></a>1.9 Tensorä¹‹é—´çš„æ“ä½œå‡½æ•°</h3><p>Tensoråº“ä¸­ï¼ŒTensorå’ŒTensorä¹‹é—´çš„æ“ä½œæ˜¯å¾ˆå¸¸è§çš„ï¼Œæ¯”å¦‚æ±‚çŸ©é˜µç›¸ä¹˜ï¼Œå†…ç§¯å¤–ç§¯ç­‰ï¼Œæœ‰å†…ç½®çš„å‡½æ•°æ”¯æŒèƒ½é¿å…å¾ˆå¤šé¢å¤–çš„å¼€å‘å·¥ä½œã€‚è¿™é‡Œæ˜¯ä¸€äº›ä¾‹å­:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">foo = torch::<span class="built_in">randn</span>(&#123;<span class="number">3</span>, <span class="number">3</span>&#125;);</span><br><span class="line">bar = torch::<span class="built_in">matmul</span>(foo, foo);</span><br><span class="line">bar = foo.<span class="built_in">matmul</span>(foo);</span><br><span class="line">bar = torch::<span class="built_in">cross</span>(foo, foo);</span><br><span class="line">bar = torch::<span class="built_in">mul</span>(foo, foo);</span><br></pre></td></tr></table></figure><h3 id="1-10-çº¿æ€§ä»£æ•°ç›¸å…³å‡½æ•°"><a href="#1-10-çº¿æ€§ä»£æ•°ç›¸å…³å‡½æ•°" class="headerlink" title="1.10 çº¿æ€§ä»£æ•°ç›¸å…³å‡½æ•°"></a>1.10 çº¿æ€§ä»£æ•°ç›¸å…³å‡½æ•°</h3><p><code>torch::linalg</code> namespaceä¸­åŒ…å«å¸¸è§çš„çº¿æ€§ä»£æ•°æ“ä½œï¼Œå‡ ä¸ªç®€å•çš„ä½¿ç”¨ä¾‹å­:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bar = torch::linalg::<span class="built_in">inv</span>(foo);</span><br><span class="line">bar = torch::linalg::<span class="built_in">norm</span>(foo, <span class="number">2</span>, &#123;<span class="number">0</span>, <span class="number">1</span>&#125;, <span class="literal">false</span>, torch::nullopt);</span><br></pre></td></tr></table></figure><p>æ‰€æœ‰æ”¯æŒçš„å‡½æ•°è¯¦è§<a href="https://pytorch.org/cppdocs/api/file_torch_csrc_api_include_torch_linalg.h.html#file-torch-csrc-api-include-torch-linalg-h">å®˜æ–¹æ–‡æ¡£</a></p><h3 id="1-11-ç¥ç»ç½‘ç»œç›¸å…³å‡½æ•°"><a href="#1-11-ç¥ç»ç½‘ç»œç›¸å…³å‡½æ•°" class="headerlink" title="1.11 ç¥ç»ç½‘ç»œç›¸å…³å‡½æ•°"></a>1.11 ç¥ç»ç½‘ç»œç›¸å…³å‡½æ•°</h3><p>ç¥ç»ç½‘ç»œæ˜¯torchçš„æ ¸å¿ƒæ¨¡å—ï¼Œå¸¸è§çš„ä¸€äº›æ¿€æ´»å‡½æ•°ï¼Œå·ç§¯å±‚éƒ½å¯ä»¥ä»¥å‡½æ•°çš„å½¢å¼ä½œç”¨åœ¨Tensorä¸Šï¼Œè¿™é‡Œå†™å‡ ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bar = torch::<span class="built_in">softmax</span>(foo, <span class="number">-1</span>);</span><br><span class="line">bar = torch::<span class="built_in">sigmoid</span>(foo);</span><br><span class="line">bar = torch::<span class="built_in">relu</span>(foo);</span><br><span class="line">bar = torch::<span class="built_in">gelu</span>(foo);</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;ç³»åˆ—æ•™ç¨‹åˆ—è¡¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://vra.github.io/2023/02/25/libtorch-tutorial1/&quot;&gt;Libtorchç³»åˆ—æ•™ç¨‹1ï¼šä¸€ä¸ªä¸æ»‘çš„C++ Tensoråº“&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://vra.github.io/2023/02/25/libtorch-tutorial2/&quot;&gt;Libtorchç³»åˆ—æ•™ç¨‹2ï¼štorch::Tensorçš„ä½¿ç”¨&lt;/a&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æš‚æ—¶å¿½ç•¥ç½‘ç»œè®­ç»ƒå’Œæ¨ç†ï¼Œè¯¦ç»†å±•å¼€Libtorchä¸­Tensorå¯¹è±¡çš„ä½¿ç”¨ï¼Œçœ‹çœ‹å°†Libtorchå½“ä½œä¸€ä¸ªçº¯ç²¹çš„Tensoråº“æ¥ä½¿ç”¨æ—¶ï¼Œæœ‰å“ªäº›æ³¨æ„äº‹é¡¹ã€‚å¦‚æœ‰æœªæ¶‰åŠçš„å†…å®¹ï¼Œè¯·è®¿é—®Libtorch&lt;a href=&quot;https://pytorch.org/cppdocs/&quot;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;ï¼Œé€šè¿‡æœç´¢æ¡†è·å–æ›´å¤šçš„ä¿¡æ¯ã€‚Libtorchçš„ç¯å¢ƒæ­å»ºå‚è€ƒ&lt;a href=&quot;https://vra.github.io/2023/02/25/libtorch-tutorial1/&quot;&gt;ä¸Šä¸€ç¯‡æ–‡ç« &lt;/a&gt;ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="C++" scheme="http://vra.github.io/tags/C/"/>
    
    <category term="Python" scheme="http://vra.github.io/tags/Python/"/>
    
    <category term="Pytorch" scheme="http://vra.github.io/tags/Pytorch/"/>
    
    <category term="Libtorch" scheme="http://vra.github.io/tags/Libtorch/"/>
    
  </entry>
  
  <entry>
    <title>Libtorchç³»åˆ—æ•™ç¨‹1ï¼šä¸€ä¸ªä¸æ»‘çš„C++ Tensoråº“</title>
    <link href="http://vra.github.io/2023/02/25/libtorch-tutorial1/"/>
    <id>http://vra.github.io/2023/02/25/libtorch-tutorial1/</id>
    <published>2023-02-24T19:03:51.000Z</published>
    <updated>2023-02-27T00:32:59.543Z</updated>
    
    <content type="html"><![CDATA[<p>ç³»åˆ—æ•™ç¨‹åˆ—è¡¨ï¼š</p><ul><li><a href="https://vra.github.io/2023/02/25/libtorch-tutorial1/">Libtorchç³»åˆ—æ•™ç¨‹1ï¼šä¸€ä¸ªä¸æ»‘çš„C++ Tensoråº“</a> </li><li><a href="https://vra.github.io/2023/02/25/libtorch-tutorial2/">Libtorchç³»åˆ—æ•™ç¨‹2ï¼štorch::Tensorçš„ä½¿ç”¨</a> </li></ul><h2 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1. æ¦‚è¿°"></a>1. æ¦‚è¿°</h2><p><a href="https://pytorch.org/cppdocs/installing.html">Libtorch</a>æ˜¯Pytorchçš„C++æ¥å£ï¼Œå®ç°äº†åœ¨C++ä¸­è¿›è¡Œç½‘ç»œè®­ç»ƒã€ç½‘ç»œæ¨ç†çš„åŠŸèƒ½ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œç”±äºLibtorchä¸­çš„å¤§éƒ¨ä»½æ¥å£éƒ½æ˜¯ä¸Pytorchä¸€è‡´çš„ï¼Œæ‰€ä»¥Libtorchè¿˜æ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„å¼ é‡åº“ï¼Œæœ‰ç€ç±»ä¼¼Pytorchçš„æ¸…æ™°æ¥å£ï¼Œè¿™åœ¨C++ä¸­å¾ˆéš¾å¾—çš„ã€‚å¦‚æœä½ ç”¨è¿‡C++ Tensoråº“ï¼Œå°±ä¼šå‘ç°å†™æ³•æ¯”è¾ƒå¤æ‚ï¼Œå­¦ä¹ æˆæœ¬ã€‚å› ä¸ºå¼ºç±»å‹çš„é™åˆ¶å’Œé€šç”¨å®¹å™¨ç±»å‹çš„ç¼ºå¤±ï¼ŒC++ç›¸æ¯”Pythonå¤©ç„¶æ›´å¤æ‚ï¼Œåº“è®¾è®¡è€…å› ä¸ºè¯­è¨€ä½¿ç”¨ä¹ æƒ¯ï¼Œä»¥åŠä¸ºäº†æ€§èƒ½ç­‰å› ç´ ï¼Œè®¾è®¡çš„æ¥å£ä¸€èˆ¬éƒ½æ˜¯é«˜æ•ˆä½†éš¾ç”¨çš„ã€‚è€ŒLibtorché‡‡ç”¨äº†ä¸Pytorchç±»ä¼¼çš„å‡½æ•°æ¥å£ï¼Œå¦‚æœä½ ä½¿ç”¨è¿‡Pytorchçš„è¯ï¼Œä½¿ç”¨Libtorchå­¦ä¹ æˆæœ¬å¾ˆä½ï¼Œåé¢ä¼šçœ‹åˆ°å…·ä½“çš„ä¾‹å­ã€‚</p><p>å¦ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå¾ˆå¤šPythonåº“ä¸­åŸºç¡€çš„æ“ä½œï¼Œä¾‹å¦‚<code>numpy.einsum</code>å‡½æ•°ï¼Œåœ¨C++ä¸­æ²¡æœ‰åˆé€‚çš„æ›¿ä»£ï¼Œçœ‹çœ‹<a href="https://stackoverflow.com/questions/65347170/numpy-einsum-equivalent-for-xtensor-c">è¿™äº›</a>æœç´¢ä½ å°±çŸ¥é“äº†ã€‚Libtorchè§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼ŒPytorchä¸­æœ‰çš„å®ƒéƒ½æœ‰ï¼Œæ‰€ä»¥åœ¨C++ä¸­å¯ä»¥ç®€å•åœ°ç”¨<code>torch::einsum</code>æ¥ä½¿ç”¨einsumå‡½æ•°ï¼Œç®€ç›´æ˜¯C++å¼€å‘è€…çš„ç¦éŸ³ã€‚</p><p>æ­¤å¤–Libtorch æ˜¯æ”¯æŒGPUçš„ï¼Œä¸»è¦ç”¨äºæ¨¡å‹çš„æ¨ç†è¿‡ç¨‹ï¼Œä½†æˆ‘çŒœæµ‹ä½¿ç”¨GPUçš„è¯ï¼ŒLibtorchçš„Tensoræ“ä½œåœ¨é€Ÿåº¦ä¸Šç›¸æ¯”åˆ«çš„C++ Tensor åº“å¯èƒ½æœ‰ä¼˜åŠ¿ï¼Œå…·ä½“é€Ÿåº¦éœ€è¦æµ‹è¯•å¯¹æ¯”ã€‚å½“ç„¶ä½¿ç”¨C++ä»£ç çš„è¯é€Ÿåº¦ä¸æ˜¯ç“¶é¢ˆï¼Œæœ¬èº«CPUä»£ç å°±å¤Ÿå¿«äº†ã€‚</p><p>Libtorchå¦ä¸€ä¸ªä¼˜åŠ¿æ˜¯ç¼–è¯‘ç®€å•ï¼Œåªè¦ä½ å®‰è£…äº†Pytorchï¼ŒLibtorchå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œçœå»äº†å¤æ‚çš„å®‰è£…å’Œé…ç½®ï¼Œä¸€åˆ†é’Ÿå†…å°±èƒ½è·‘èµ·æ¥ä¸€ä¸ªç®€å•çš„çš„ç¤ºä¾‹ç¨‹åºã€‚</p><p>æ€»ç»“æ¥è¯´ï¼ŒLibtorchæœ‰ä»¥ä¸‹å¾ˆå¸å¼•äººçš„ç‰¹æ€§ï¼š</p><ul><li>å¼ºå¤§å¦‚Numpyå’ŒPytorchçš„C++ Tensoråº“ï¼Œå†™æ³•ä¼˜é›…ä¸æ»‘ï¼Œå¹¶ä¸”æ˜¯æ”¯æŒGPUçš„ã€‚</li><li>å¯ä»¥è®­ç»ƒç¥ç»ç½‘ç»œ</li><li>å¯ä»¥æ¨ç†ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œç”¨åœ¨C++ç¯å¢ƒçš„æ¨¡å‹éƒ¨ç½²åœºæ™¯</li><li>ç¼–è¯‘ç®€å•</li></ul><p>ç”±äºPytorchå¼€å‘å›¢é˜Ÿæ˜¯ä»¥Pythonä¼˜å…ˆçš„æ€è·¯æ¥è¿›è¡ŒPytorchçš„å¼€å‘çš„ï¼Œå› æ­¤æˆ‘æ„Ÿè§‰Libtorchçš„é‡è§†ç¨‹åº¦ä¸æ˜¯å¾ˆé«˜ï¼Œæ–‡æ¡£å’Œæ•™ç¨‹ä¹Ÿæ¯”è¾ƒå°‘ï¼Œå®˜ç½‘çš„ç¤ºä¾‹ä¹Ÿå‡ ä¹æ²¡æœ‰ï¼Œå› æ­¤å†™ä¸€ä¸ªæ¯”è¾ƒå®Œå–„çš„æ•™ç¨‹æ˜¯æ¯”è¾ƒæœ‰æ„ä¹‰çš„ã€‚</p><p>è¿™ä¸ªç³»åˆ—æ–‡ç« ä¸­ï¼Œæˆ‘ä¼šå¯¹Libtorch çš„Tensoråº“å’Œæ¨ç†ç¥ç»ç½‘ç»œè¿‡ç¨‹è¿›è¡Œä»‹ç»ï¼Œå› ä¸ºè¿™äº›å†…å®¹åœ¨å®é™…å¯¹äºç”¨Libtorchæ¥è¿›è¡Œç½‘ç»œè®­ç»ƒçš„éƒ¨åˆ†è¿›è¡Œè·³è¿‡ï¼Œå› ä¸ºè¿™éƒ¨åˆ†ä½¿ç”¨çš„åœºæ™¯ä¸æ˜¯å¾ˆå¤šï¼ˆç”¨Pythonè®­ç»ƒç½‘ç»œæ¯”C++é¦™å¤šäº†)ã€‚</p><p>æœ¬ç¯‡ä»¥Macä¸‹çš„æ“ä½œä¸ºä¾‹ï¼Œå¯¹Libtorchçš„å®‰è£…å’Œç®€å•ä½¿ç”¨è¿›è¡Œä»‹ç»ï¼Œåç»­å†…å®¹è¿‘æœŸä¼šæ›´æ–°ï¼Œæ•¬è¯·å…³æ³¨ã€‚</p><span id="more"></span><h2 id="2-Libtorch-å®‰è£…"><a href="#2-Libtorch-å®‰è£…" class="headerlink" title="2. Libtorch å®‰è£…"></a>2. Libtorch å®‰è£…</h2><p>å¦‚æœä½ å·²ç»å®‰è£…è¿‡Pytorchï¼Œé‚£ä¹ˆå°±ä¸ç”¨é¢å¤–å®‰è£…Libtorchäº†ï¼Œå› ä¸ºPytorchè‡ªå¸¦äº†Libtorchçš„CMake config æ–‡ä»¶ï¼Œä½¿ç”¨<code>torch.utils.cmake_prefix_path</code>è¯­å¥å°±èƒ½æ‰“å°å‡ºæ¥ï¼Œå¯ä»¥ç›´æ¥è¢«CMakeä½¿ç”¨ï¼Œç¼–è¯‘æ—¶æ·»åŠ å¦‚ä¸‹çš„é€‰é¡¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-DCMAKE_PREFIX_PATH=`python -c <span class="string">&#x27;import torch;print(torch.utils.cmake_prefix_path)&#x27;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰å®‰è£…è¿‡Pytorchï¼Œé‚£ç›´æ¥å»<a href="https://pytorch.org/">Pytorchå®˜ç½‘</a>ä¸‹è½½Libtorch å‹ç¼©åŒ…ï¼Œè§£å‹åˆ°æœ¬åœ°ç›®å½•å³å¯ï¼Œåé¢ä½¿ç”¨CMakeæ¥æŒ‡å‘è¿™é‡Œçš„è·¯å¾„å°±è¡Œã€‚å‡å¦‚è§£å‹åˆ°<code>LIBTORCH_ROOT</code>ç›®å½•ï¼Œç¼–è¯‘æ—¶æ·»åŠ ä¸‹é¢çš„é€‰é¡¹:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-DCMAKE_PREFIX_PATH=&lt;LIBTORCH_ROOT&gt;</span><br></pre></td></tr></table></figure><h2 id="3-ä½¿ç”¨CMake-ç¼–è¯‘ä¸€ä¸ªç®€å•ä¾‹å­"><a href="#3-ä½¿ç”¨CMake-ç¼–è¯‘ä¸€ä¸ªç®€å•ä¾‹å­" class="headerlink" title="3. ä½¿ç”¨CMake ç¼–è¯‘ä¸€ä¸ªç®€å•ä¾‹å­"></a>3. ä½¿ç”¨CMake ç¼–è¯‘ä¸€ä¸ªç®€å•ä¾‹å­</h2><p>è¿™é‡Œå†™ä¸€ä¸ªç®€å•çš„Libtorchä¾‹å­ï¼Œåˆ›å»ºä¸€ä¸ª5x5çš„çŸ©é˜µï¼Œç„¶åè°ƒç”¨<code>einsum</code>å‡½æ•°æ¥è®¡ç®—çŸ©é˜µçš„è¿¹ï¼ˆå¯¹è§’çº¿å…ƒç´ çš„å’Œï¼‰ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥Torchå¤´æ–‡ä»¶ï¼ŒTensorç±»åœ¨æ­¤å¤´æ–‡ä»¶ä¸­ï¼Œåˆ«çš„ç±»ä¼šåœ¨å¦å¤–çš„å¤´æ–‡ä»¶ä¸­</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;torch/torch.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨arangeæ„é€ ä¸€ä¸ªä¸€ç»´å‘é‡ï¼Œå†ç”¨reshapeå˜æ¢åˆ°5x5çš„çŸ©é˜µ</span></span><br><span class="line">  torch::Tensor foo = torch::<span class="built_in">arange</span>(<span class="number">25</span>).<span class="built_in">reshape</span>(&#123;<span class="number">5</span>, <span class="number">5</span>&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¡ç®—çŸ©é˜µçš„è¿¹</span></span><br><span class="line">  torch::Tensor bar  = torch::<span class="built_in">einsum</span>(<span class="string">&quot;ii&quot;</span>, foo);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¾“å‡ºçŸ©é˜µå’Œå¯¹åº”çš„è¿¹</span></span><br><span class="line">  std::cout &lt;&lt; <span class="string">&quot;==&gt; matrix is:\n &quot;</span> &lt;&lt; foo &lt;&lt; std::endl;</span><br><span class="line">  std::cout &lt;&lt; <span class="string">&quot;==&gt; trace of it is:\n &quot;</span> &lt;&lt; bar &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„reshapeä¸­éœ€è¦ç”¨èŠ±æ‹¬å·ï¼Œå› ä¸ºC++æ²¡æœ‰tupleç±»å‹ï¼ŒPythonä¸­çš„<code>(5,5)</code>éœ€è¦åœ¨C++ä¸­æ”¹å†™ä¸º<code>&#123;5, 5&#125;</code>ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæ˜¯ä¸æ˜¯è·ŸPythonä»£ç å¾ˆç›¸ä¼¼ï¼Ÿ</p><p>è®°å¾—ä¿å­˜ä¸Šé¢çš„ä»£ç ä¸º<code>libtorch_trace.cpp</code>ï¼Œå› ä¸ºCMakeé…ç½®ä¸­éœ€è¦å†™æ–‡ä»¶åã€‚</p><p>ç„¶ååœ¨åŒçº§ç›®å½•ç¼–å†™<code>CMakeLists.txt</code>æ–‡ä»¶:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.0</span> FATAL_ERROR)</span><br><span class="line"><span class="keyword">project</span>(libtorch_trace)</span><br><span class="line"></span><br><span class="line"><span class="comment"># éœ€è¦æ‰¾åˆ°Libtorch</span></span><br><span class="line"><span class="keyword">find_package</span>(Torch REQUIRED)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_FLAGS <span class="string">&quot;$&#123;CMAKE_CXX_FLAGS&#125; $&#123;TORCH_CXX_FLAGS&#125;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> libtorch_trace.cpp)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> <span class="string">&quot;$&#123;TORCH_LIBRARIES&#125;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Libtorchæ˜¯åŸºäºC++14æ¥å®ç°çš„</span></span><br><span class="line"><span class="keyword">set_property</span>(<span class="keyword">TARGET</span> <span class="variable">$&#123;PROJECT_NAME&#125;</span> PROPERTY CXX_STANDARD <span class="number">14</span>)</span><br></pre></td></tr></table></figure><p>ç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ¥ç¼–è¯‘:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mkdir build</span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line"><span class="comment"># å¦‚æœæ˜¯é€šè¿‡Pytorch</span></span><br><span class="line">cmake -DCMAKE_PREFIX_PATH=`python -c <span class="string">&#x27;import torch;print(torch.utils.cmake_prefix_path)&#x27;</span>` ..</span><br><span class="line"><span class="comment">#ä¸‹è½½çš„å•ç‹¬Libtorch</span></span><br><span class="line"><span class="comment"># cmake -DCMAKE_PREFIX_PATH=&lt;LIBTORCH_ROOT&gt; ..</span></span><br><span class="line">make -j8</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘å®Œæˆåä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥æ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./libtorch_trace</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">==&gt; matrix is:</span><br><span class="line">   0   1   2   3   4</span><br><span class="line">  5   6   7   8   9</span><br><span class="line"> 10  11  12  13  14</span><br><span class="line"> 15  16  17  18  19</span><br><span class="line"> 20  21  22  23  24</span><br><span class="line">[ CPULongType&#123;5,5&#125; ]</span><br><span class="line">==&gt; trace of it is:</span><br><span class="line"> 60</span><br><span class="line">[ CPULongType&#123;&#125; ]</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªä¾‹å­å°±å®Œæˆäº†ã€‚</p><h2 id="4-å‚è€ƒ"><a href="#4-å‚è€ƒ" class="headerlink" title="4. å‚è€ƒ"></a>4. å‚è€ƒ</h2><ul><li><a href="https://pytorch.org/cppdocs/installing.html">https://pytorch.org/cppdocs/installing.html</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;ç³»åˆ—æ•™ç¨‹åˆ—è¡¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://vra.github.io/2023/02/25/libtorch-tutorial1/&quot;&gt;Libtorchç³»åˆ—æ•™ç¨‹1ï¼šä¸€ä¸ªä¸æ»‘çš„C++ Tensoråº“&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://vra.github.io/2023/02/25/libtorch-tutorial2/&quot;&gt;Libtorchç³»åˆ—æ•™ç¨‹2ï¼štorch::Tensorçš„ä½¿ç”¨&lt;/a&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;1-æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#1-æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;1. æ¦‚è¿°&quot;&gt;&lt;/a&gt;1. æ¦‚è¿°&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://pytorch.org/cppdocs/installing.html&quot;&gt;Libtorch&lt;/a&gt;æ˜¯Pytorchçš„C++æ¥å£ï¼Œå®ç°äº†åœ¨C++ä¸­è¿›è¡Œç½‘ç»œè®­ç»ƒã€ç½‘ç»œæ¨ç†çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;é™¤æ­¤ä¹‹å¤–ï¼Œç”±äºLibtorchä¸­çš„å¤§éƒ¨ä»½æ¥å£éƒ½æ˜¯ä¸Pytorchä¸€è‡´çš„ï¼Œæ‰€ä»¥Libtorchè¿˜æ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„å¼ é‡åº“ï¼Œæœ‰ç€ç±»ä¼¼Pytorchçš„æ¸…æ™°æ¥å£ï¼Œè¿™åœ¨C++ä¸­å¾ˆéš¾å¾—çš„ã€‚å¦‚æœä½ ç”¨è¿‡C++ Tensoråº“ï¼Œå°±ä¼šå‘ç°å†™æ³•æ¯”è¾ƒå¤æ‚ï¼Œå­¦ä¹ æˆæœ¬ã€‚å› ä¸ºå¼ºç±»å‹çš„é™åˆ¶å’Œé€šç”¨å®¹å™¨ç±»å‹çš„ç¼ºå¤±ï¼ŒC++ç›¸æ¯”Pythonå¤©ç„¶æ›´å¤æ‚ï¼Œåº“è®¾è®¡è€…å› ä¸ºè¯­è¨€ä½¿ç”¨ä¹ æƒ¯ï¼Œä»¥åŠä¸ºäº†æ€§èƒ½ç­‰å› ç´ ï¼Œè®¾è®¡çš„æ¥å£ä¸€èˆ¬éƒ½æ˜¯é«˜æ•ˆä½†éš¾ç”¨çš„ã€‚è€ŒLibtorché‡‡ç”¨äº†ä¸Pytorchç±»ä¼¼çš„å‡½æ•°æ¥å£ï¼Œå¦‚æœä½ ä½¿ç”¨è¿‡Pytorchçš„è¯ï¼Œä½¿ç”¨Libtorchå­¦ä¹ æˆæœ¬å¾ˆä½ï¼Œåé¢ä¼šçœ‹åˆ°å…·ä½“çš„ä¾‹å­ã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå¾ˆå¤šPythonåº“ä¸­åŸºç¡€çš„æ“ä½œï¼Œä¾‹å¦‚&lt;code&gt;numpy.einsum&lt;/code&gt;å‡½æ•°ï¼Œåœ¨C++ä¸­æ²¡æœ‰åˆé€‚çš„æ›¿ä»£ï¼Œçœ‹çœ‹&lt;a href=&quot;https://stackoverflow.com/questions/65347170/numpy-einsum-equivalent-for-xtensor-c&quot;&gt;è¿™äº›&lt;/a&gt;æœç´¢ä½ å°±çŸ¥é“äº†ã€‚Libtorchè§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼ŒPytorchä¸­æœ‰çš„å®ƒéƒ½æœ‰ï¼Œæ‰€ä»¥åœ¨C++ä¸­å¯ä»¥ç®€å•åœ°ç”¨&lt;code&gt;torch::einsum&lt;/code&gt;æ¥ä½¿ç”¨einsumå‡½æ•°ï¼Œç®€ç›´æ˜¯C++å¼€å‘è€…çš„ç¦éŸ³ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–Libtorch æ˜¯æ”¯æŒGPUçš„ï¼Œä¸»è¦ç”¨äºæ¨¡å‹çš„æ¨ç†è¿‡ç¨‹ï¼Œä½†æˆ‘çŒœæµ‹ä½¿ç”¨GPUçš„è¯ï¼ŒLibtorchçš„Tensoræ“ä½œåœ¨é€Ÿåº¦ä¸Šç›¸æ¯”åˆ«çš„C++ Tensor åº“å¯èƒ½æœ‰ä¼˜åŠ¿ï¼Œå…·ä½“é€Ÿåº¦éœ€è¦æµ‹è¯•å¯¹æ¯”ã€‚å½“ç„¶ä½¿ç”¨C++ä»£ç çš„è¯é€Ÿåº¦ä¸æ˜¯ç“¶é¢ˆï¼Œæœ¬èº«CPUä»£ç å°±å¤Ÿå¿«äº†ã€‚&lt;/p&gt;
&lt;p&gt;Libtorchå¦ä¸€ä¸ªä¼˜åŠ¿æ˜¯ç¼–è¯‘ç®€å•ï¼Œåªè¦ä½ å®‰è£…äº†Pytorchï¼ŒLibtorchå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œçœå»äº†å¤æ‚çš„å®‰è£…å’Œé…ç½®ï¼Œä¸€åˆ†é’Ÿå†…å°±èƒ½è·‘èµ·æ¥ä¸€ä¸ªç®€å•çš„çš„ç¤ºä¾‹ç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;æ€»ç»“æ¥è¯´ï¼ŒLibtorchæœ‰ä»¥ä¸‹å¾ˆå¸å¼•äººçš„ç‰¹æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¼ºå¤§å¦‚Numpyå’ŒPytorchçš„C++ Tensoråº“ï¼Œå†™æ³•ä¼˜é›…ä¸æ»‘ï¼Œå¹¶ä¸”æ˜¯æ”¯æŒGPUçš„ã€‚&lt;/li&gt;
&lt;li&gt;å¯ä»¥è®­ç»ƒç¥ç»ç½‘ç»œ&lt;/li&gt;
&lt;li&gt;å¯ä»¥æ¨ç†ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œç”¨åœ¨C++ç¯å¢ƒçš„æ¨¡å‹éƒ¨ç½²åœºæ™¯&lt;/li&gt;
&lt;li&gt;ç¼–è¯‘ç®€å•&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç”±äºPytorchå¼€å‘å›¢é˜Ÿæ˜¯ä»¥Pythonä¼˜å…ˆçš„æ€è·¯æ¥è¿›è¡ŒPytorchçš„å¼€å‘çš„ï¼Œå› æ­¤æˆ‘æ„Ÿè§‰Libtorchçš„é‡è§†ç¨‹åº¦ä¸æ˜¯å¾ˆé«˜ï¼Œæ–‡æ¡£å’Œæ•™ç¨‹ä¹Ÿæ¯”è¾ƒå°‘ï¼Œå®˜ç½‘çš„ç¤ºä¾‹ä¹Ÿå‡ ä¹æ²¡æœ‰ï¼Œå› æ­¤å†™ä¸€ä¸ªæ¯”è¾ƒå®Œå–„çš„æ•™ç¨‹æ˜¯æ¯”è¾ƒæœ‰æ„ä¹‰çš„ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªç³»åˆ—æ–‡ç« ä¸­ï¼Œæˆ‘ä¼šå¯¹Libtorch çš„Tensoråº“å’Œæ¨ç†ç¥ç»ç½‘ç»œè¿‡ç¨‹è¿›è¡Œä»‹ç»ï¼Œå› ä¸ºè¿™äº›å†…å®¹åœ¨å®é™…å¯¹äºç”¨Libtorchæ¥è¿›è¡Œç½‘ç»œè®­ç»ƒçš„éƒ¨åˆ†è¿›è¡Œè·³è¿‡ï¼Œå› ä¸ºè¿™éƒ¨åˆ†ä½¿ç”¨çš„åœºæ™¯ä¸æ˜¯å¾ˆå¤šï¼ˆç”¨Pythonè®­ç»ƒç½‘ç»œæ¯”C++é¦™å¤šäº†)ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬ç¯‡ä»¥Macä¸‹çš„æ“ä½œä¸ºä¾‹ï¼Œå¯¹Libtorchçš„å®‰è£…å’Œç®€å•ä½¿ç”¨è¿›è¡Œä»‹ç»ï¼Œåç»­å†…å®¹è¿‘æœŸä¼šæ›´æ–°ï¼Œæ•¬è¯·å…³æ³¨ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="C++" scheme="http://vra.github.io/tags/C/"/>
    
    <category term="Python" scheme="http://vra.github.io/tags/Python/"/>
    
    <category term="Pytorch" scheme="http://vra.github.io/tags/Pytorch/"/>
    
    <category term="Libtorch" scheme="http://vra.github.io/tags/Libtorch/"/>
    
  </entry>
  
  <entry>
    <title>nanoGPT + é²è¿…</title>
    <link href="http://vra.github.io/2023/02/12/nanogpt-and-luxun/"/>
    <id>http://vra.github.io/2023/02/12/nanogpt-and-luxun/</id>
    <published>2023-02-12T15:24:02.000Z</published>
    <updated>2023-02-12T16:33:42.275Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-èµ·å› "><a href="#1-èµ·å› " class="headerlink" title="1. èµ·å› "></a>1. èµ·å› </h2><p>ä»Šæ™šçœ‹åˆ°äº†Simon Willison çš„åªä½¿ç”¨è‡ªå·±çš„åšå®¢å†…å®¹æ¥è®­ç»ƒnanoGPTçš„<a href="https://til.simonwillison.net/llms/training-nanogpt-on-my-blog">å®éªŒ</a>ï¼Œè§‰å¾—æŒºæœ‰æ„æ€ï¼Œçªå‘å¥‡æƒ³ï¼Œèƒ½ä¸èƒ½åœ¨é²è¿…çš„æ–‡é›†ä¸Šè®­ç»ƒä¸€ä¸ªnanoGPTï¼Œç„¶åç”Ÿæˆå¾ˆå…·è¾¨è¯†åº¦çš„é²è¿…é£æ ¼çš„æ–‡å­—å‘¢ï¼Ÿç”±äºnanoGPTç»“æ„ç®€å•ï¼Œé²è¿…çš„æ–‡é›†åœ¨GitHubä¸Šå¯ä»¥ä¸‹è½½åˆ°ï¼Œå› æ­¤é€šè¿‡ç®€å•çš„ä»£ç ä¿®æ”¹åŠ å®éªŒï¼Œå°±å¾—åˆ°ä¸€ä¸ªåœ¨é²è¿…ä½œå“ä¸Šè®­ç»ƒçš„GPT2æ¨¡å‹(æ— åˆ«çš„è¯­æ–™åº“çš„é¢„è®­ç»ƒï¼‰ï¼Œç®€å•æµ‹è¯•ä¸‹ï¼Œä»¥â€œæ•…ä¹¡â€å¼€å¤´ï¼Œè®©æ¨¡å‹ç”Ÿæˆé²è¿…é£æ ¼çš„æ–‡å­—ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æ•…ä¹¡ï¼Œå€ºæ˜¯ä½©æœçš„ã€‚</span><br><span class="line"> æˆ‘ä¸€å‘å¯¹äºæ–°é’å¹´çš„æ€åº¦ï¼Œå…ˆæ¥è¯´è¯ï¼Œè°¢å®¹æ˜“åšçš„ï¼Œç„¶è€Œä¼å›­å·²ç»è§è¿‡å‡ æ ·ï¼Œæ„Ÿè§‰çš„æ˜¯å¦å¤–æ§ä¹‹æ•°ï¼Œä»¥ä¸ºå…ˆå‰çš„ä¾‹å­ã€‚ä»Šä½†è¿‘æ¥åšäº†åšäº‹ï¼Œè‡ªå·±ä¹Ÿè¿˜ä¸åšï¼Œä¸èƒ½å…ˆè¡Œé€šï¼Œæ‰€ä»¥ç”Ÿåœ¨å†·é™å’Œâ€œäººç”Ÿâ€ï¼Œä¸‰å¦‡ä¸€è‹¦é—·ï¼Œè§‰å¾—å¤§çº¦æ˜¯å¦‚æ­¤éš”è†œ</span><br><span class="line">å’Œæ›¹æ“ï¼Œäºæ˜¯éæ„æ¨¡èŒ¶ç‚›ï¼Œå¯ä»¥è¯´æ˜¯å¤ªé«˜äº†ï¼Œæ‰€ä»¥ç°åœ¨ä¾¿èƒ½æ•™è‚²ï¼Œç«Ÿï¿½å¦‚æ­¤ã€‚</span><br><span class="line"> ä½†æ±å®åœ¨æœ‰ç»™æ³•å†ä»£çš„ï¼Œä¸ä¹…å°±åœ¨ç»æœ«å¹´é—´ï¼Œæˆ‘æƒ³æ˜¾å‡ºå‘å¤§å®¶é¥®ä¸€è¶Ÿï¼Œè€Œæ±‰å­å¤§æ¯’æ˜¯æ€€æ—§çš„ï¼Œå°±è¦è´«è¶³æœ‰æ‰“åŠ«ï¼Œå¯ä»¥æ°¸æ çš„ã€‚è¿™ç§äº‹æƒ…ï¼Œä¸­å›½æœ‰ä¸€ä¸ªå¤§å®˜å·¦ç¿¼é˜¿ï¼Œï¼ˆé™€æ€å¦¥ä¹ ï¼‰ï¼Œæœ‰æ•¢è¯·ä½›å–œï¼Œæ€»è¦é€‚è¯´ä¸€ç‚¹ï¿½</span><br></pre></td></tr></table></figure><p>è¿˜ç®—æœ‰é²è¿…æ–‡å­—çš„é£æ ¼ï¼Œä½†é€»è¾‘ä¸€çªä¸é€šï¼Œæ•´ä½“è¿˜æ˜¯éš¾è®©äººæ»¡æ„ï¼Œä¸çŸ¥é“æ˜¯GPT2èƒ½åŠ›çš„é—®é¢˜è¿˜æ˜¯æˆ‘å®éªŒè®¾ç½®çš„é—®é¢˜ã€‚ Anywayï¼Œè¿™é‡Œå…±äº«ä¸€ä¸‹æˆ‘å®éªŒçš„æµç¨‹ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥å‚è€ƒï¼Œè¿›è¡Œæ”¹è¿›ã€‚æœ¬æ–‡æ¶‰åŠçš„ä»£ç ä¿®æ”¹ä»£ç å·²ç»æäº¤åˆ°è¿™ä¸ª<a href="https://github.com/vra/nanoGPT">ä»“åº“äº†</a>ï¼Œå¯ä»¥å‚è€ƒï¼Œæ–‡æœ«ä¼šé™„ä¸Šæ›´å¤šä¾‹å­ã€‚</p><span id="more"></span><h2 id="2-æ“ä½œæµç¨‹"><a href="#2-æ“ä½œæµç¨‹" class="headerlink" title="2. æ“ä½œæµç¨‹"></a>2. æ“ä½œæµç¨‹</h2><h3 id="2-1-ä¸‹è½½nanoGPTæºç å¹¶å®‰è£…ä¾èµ–"><a href="#2-1-ä¸‹è½½nanoGPTæºç å¹¶å®‰è£…ä¾èµ–" class="headerlink" title="2.1 ä¸‹è½½nanoGPTæºç å¹¶å®‰è£…ä¾èµ–"></a>2.1 ä¸‹è½½nanoGPTæºç å¹¶å®‰è£…ä¾èµ–</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/karpathy/nanoGPT</span><br><span class="line"><span class="built_in">cd</span> nanoGPT</span><br><span class="line">conda create --name nanogpt  python=3.9</span><br><span class="line">conda activate nanogpt</span><br><span class="line">pip install transformers datasets tiktoken tqdm wandb numpy httpx torch torchvision</span><br></pre></td></tr></table></figure><h3 id="2-2-æ•°æ®é¢„å¤„ç†"><a href="#2-2-æ•°æ®é¢„å¤„ç†" class="headerlink" title="2.2 æ•°æ®é¢„å¤„ç†"></a>2.2 æ•°æ®é¢„å¤„ç†</h3><p>è¿›å…¥ä»£ç ç›®å½•åï¼Œé‡å»ºæ–‡ä»¶å¤¹<code>data/lunxun</code>ï¼Œç”¨äºå­˜æ”¾æ•°æ®ã€‚</p><p>ä»<a href="https://github.com/gzx1996/luxun/blob/master/book/book.txt">è¿™é‡Œ</a>ä¸‹è½½é²è¿…å…¨é›†ï¼Œæ”¾åˆ°<code>data/luxun</code>ç›®å½•ä¸‹ï¼Œç„¶åè¿›è¡Œä¸‹é¢çš„å¤„ç†ï¼š</p><ul><li>å»æ‰æ‰€æœ‰ç¼–è€…åŠ çš„æ³¨é‡Š(ç”±äºæ³¨é‡Šéƒ½æ˜¯ä»¥<code>[n]</code>è¿™ç§å½¢å¼å¼€å¤´çš„ï¼Œå› æ­¤åœ¨VIMä¸­å¯ä»¥ç”¨<code>0,$s/^\[.\+//g</code>å‘½ä»¤æ¥å»æ‰)</li><li>ç”±äºæˆ‘ä»¬æƒ³è¦çš„æ˜¯é²è¿…ç™½è¯æ–‡çš„é£æ ¼ï¼Œå› æ­¤æ‰‹åŠ¨å»æ‰æ‰€æœ‰æ–‡è¨€æ–‡çš„ä½œå“å’Œç¿»è¯‘ä½œå“(æ–‡è¨€æ–‡åœ¨æœ€å¼€å¤´çš„ã€ŠåŸã€‹é›†å­é‡Œï¼Œç¿»è¯‘ä½œå“åœ¨æœ€å)</li><li>å»æ‰å•è¡Œçš„æ—¥æœŸæ–‡å­—ï¼ˆå¦‚<code>(ä¸€ä¹ä¸€å…«å¹´äºŒæœˆäºŒæ—¥)</code>ï¼Œå¯ä»¥åœ¨VIMä¸­ç”¨<code>g/^(ä¸€ä¹.\+/d</code>å»æ‰)</li></ul><p>æˆ‘å¤„ç†åçš„æ–‡æœ¬åœ°å€åœ¨<a href="https://github.com/vra/nanoGPT/tree/master/data/luxun/book.txt">è¿™é‡Œ</a>ã€‚</p><p>ç„¶åç¼–å†™ä»£ç <code>prepare.py</code>, è¯»å–æ–‡æœ¬ï¼Œæ„é€ è®­ç»ƒé›†å’ŒéªŒè¯é›†ï¼Œæ•°æ®æ¯”ä¾‹9:1ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> tiktoken</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line">input_file_path = os.path.join(os.path.dirname(__file__), <span class="string">&quot;book.txt&quot;</span>)</span><br><span class="line"></span><br><span class="line">entries = []</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(input_file_path, <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">        <span class="keyword">if</span> line.strip() <span class="keyword">and</span> <span class="built_in">len</span>(line) &gt; <span class="number">2</span>:</span><br><span class="line">            entries.append(line)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;len of lines: <span class="subst">&#123;<span class="built_in">len</span>(entries)&#125;</span>&quot;</span>)</span><br><span class="line"><span class="comment"># Shuffle entries</span></span><br><span class="line">random.shuffle(entries)</span><br><span class="line"></span><br><span class="line">n = <span class="built_in">len</span>(entries)</span><br><span class="line">train_entries = entries[: <span class="built_in">int</span>(n * <span class="number">0.9</span>)]</span><br><span class="line">val_entries = entries[<span class="built_in">int</span>(n * <span class="number">0.9</span>):]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Turn those into strings</span></span><br><span class="line">train_data = <span class="string">&quot; &quot;</span>.join(<span class="string">&quot;&#123;&#125;&quot;</span>.<span class="built_in">format</span>(entry) <span class="keyword">for</span> entry <span class="keyword">in</span> train_entries)</span><br><span class="line">val_data = <span class="string">&quot; &quot;</span>.join(<span class="string">&quot;&#123;&#125;&quot;</span>.<span class="built_in">format</span>(entry) <span class="keyword">for</span> entry <span class="keyword">in</span> val_entries)</span><br><span class="line"></span><br><span class="line"><span class="comment"># encode with tiktoken gpt2 bpe</span></span><br><span class="line">enc = tiktoken.get_encoding(<span class="string">&quot;gpt2&quot;</span>)</span><br><span class="line">train_ids = enc.encode_ordinary(train_data)</span><br><span class="line">val_ids = enc.encode_ordinary(val_data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;train has <span class="subst">&#123;<span class="built_in">len</span>(train_ids):,&#125;</span> tokens&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;val has <span class="subst">&#123;<span class="built_in">len</span>(val_ids):,&#125;</span> tokens&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># export to bin files</span></span><br><span class="line">train_ids = np.array(train_ids, dtype=np.uint16)</span><br><span class="line">val_ids = np.array(val_ids, dtype=np.uint16)</span><br><span class="line">train_ids.tofile(os.path.join(os.path.dirname(__file__), <span class="string">&quot;train.bin&quot;</span>))</span><br><span class="line">val_ids.tofile(os.path.join(os.path.dirname(__file__), <span class="string">&quot;val.bin&quot;</span>))</span><br></pre></td></tr></table></figure><p>å¤„ç†å¥½çš„è®­ç»ƒéªŒè¯é›†åœ¨<a href="https://github.com/vra/nanoGPT/tree/master/data/luxun">è¿™é‡Œ</a>ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p><h3 id="2-3-è®­ç»ƒç½‘ç»œ"><a href="#2-3-è®­ç»ƒç½‘ç»œ" class="headerlink" title="2.3 è®­ç»ƒç½‘ç»œ"></a>2.3 è®­ç»ƒç½‘ç»œ</h3><p>æ•°æ®é›†æ„å»ºå®Œæˆåï¼Œå°±å¯ä»¥è®­ç»ƒæ¨¡å‹äº†ã€‚åœ¨ä»£ç åº“æ ¹ç›®å½•ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python train.py \</span><br><span class="line">  --dataset=luxun \</span><br><span class="line">--compile=False \</span><br><span class="line">--batch_size=8 \</span><br><span class="line">--dtype=float16</span><br></pre></td></tr></table></figure><p>å…·ä½“è®­ç»ƒå‚æ•°å¯ä»¥æŸ¥çœ‹<code>train.py</code>ï¼ŒåŒ…æ‹¬è®­ç»ƒçš„å±‚æ•°ã€batch sizeï¼Œè®­ç»ƒåç«¯ç­‰ç­‰ã€‚</p><p>è®­ç»ƒçš„æ¨¡å‹é»˜è®¤ä¿å­˜åœ¨<code>out/ckpt.pt</code>ã€‚</p><p>è®­ç»ƒ22000æ¬¡è¿­ä»£çš„æ—¶å€™æˆ‘åœæ­¢äº†å®éªŒï¼Œlossæ˜¯0.15å·¦å³ã€‚</p><h3 id="2-4-æµ‹è¯•æ¨¡å‹"><a href="#2-4-æµ‹è¯•æ¨¡å‹" class="headerlink" title="2.4 æµ‹è¯•æ¨¡å‹"></a>2.4 æµ‹è¯•æ¨¡å‹</h3><p>æµ‹è¯•ä»£ç åœ¨<code>sample.py</code>ï¼Œé»˜è®¤æç¤ºè¯ä¸ºç©º(<code>start=&#39;\n&#39;</code>)å¯ä»¥é€šè¿‡æ·»åŠ <code>--start=&quot;xxx&quot;</code>æ¥ä¿®æ”¹æç¤ºè¯:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sample.py --start=<span class="string">&quot;æ•…ä¹¡&quot;</span></span><br></pre></td></tr></table></figure><h2 id="3-æ›´å¤šä¾‹å­"><a href="#3-æ›´å¤šä¾‹å­" class="headerlink" title="3. æ›´å¤šä¾‹å­"></a>3. æ›´å¤šä¾‹å­</h2><h3 id="3-1-äººå·¥æ™ºèƒ½"><a href="#3-1-äººå·¥æ™ºèƒ½" class="headerlink" title="3.1 äººå·¥æ™ºèƒ½"></a>3.1 äººå·¥æ™ºèƒ½</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">äººå·¥æ™ºèƒ½åŠ›ã€‚ä¸¤ç¤¾ä¸ˆä¸€å¤šï¼Œè¥¿è¾›ï¼Œæ˜¯å‘æ˜äº†çš„ç»“æœï¼Œä½†å»çš„å››äº”åå²ï¼Œæ­»çš„é™ˆæºæ•™æˆå´å¾ˆä¸é€šï¼Œæˆ‘ä¹Ÿå°±ä¸å†æœ‰äº†ã€‚å¿ä¸çŸ¥é“é˜¿ï¼±çš„åå­—æ˜¯æ€ä¹ˆå†™çš„ï¼Ÿè¿™ä¸è¿‡æ˜¯ä¸€ä¸ªé—®å¢ƒã€‚ä»–æ€»è¿˜æ‹¿ç€å››ä¸ªå¹´çš„è¿‡å¤´æ”¾åœ¨å¿ƒé‡Œï¼Œè¯´é“ï¼Œâ€œå“€ï¼Œé‡çš„ã€‚ä»–å¯</span><br><span class="line">æ˜¯å¼¯å£ï¼Œé“æ˜¯é˜¿ï¼±ï¼›è¿‘æ¥å·²ç»åšäº†æœå¸ˆé•¿äº†ï¼ŒåŠå¹´çš„å¤§æ­¦äººï¼Œä½ è¿˜å’Œä»–å¯¹é¢å…·æ±—è¯´ï¼šâ€˜éå¸¸æ•‘å‘½ï¼â€™â€˜æ˜¯æƒ…æ„§â€ƒå¤«å­â€™çš„å­¦ç†è®ºçŸ›ç›¾çš„å·¥äººï¼Œâ€¦â€¦è€Œä¸”è·³ä¸è¿‡æ˜¯è¿™ä¸‰ç§’â€¦â€¦ã€‚â€</span><br><span class="line"> è€Œå·² å¶æˆ˜çº¿å‘Šäº†ä¸€ä¸ªå¤§é—®é¢˜ï¼Œæ‹¿å»åšçš„çº çº·ï¼Œè€Œä»–ä»¬å°±ç™–åœ¨ã€Šè¯•çˆä¹¦ã€‹çš„ç¬¬ä¸€å¹…ï¼Œæ¥å› ä¸ºåˆæ˜¯åˆ èŠ‚çš„ï¼Œè¿˜å’Œæ‰€æ”¾çš„åšã€‚ä¸è¿‡å¦‚æœåŠ ä»¥ç»†è§ï¼Œä¸æƒ³å¤šå†™äº†ä¸œï¿½</span><br></pre></td></tr></table></figure><h3 id="3-2-æ–‡è‰ºå¤å…´"><a href="#3-2-æ–‡è‰ºå¤å…´" class="headerlink" title="3.2 æ–‡è‰ºå¤å…´"></a>3.2 æ–‡è‰ºå¤å…´</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">æ–‡è‰ºå¤å…´è¿åŠ¨ï¼Œä¹Ÿæ˜¯æŒ‡æƒºæŠŠæ–‡è‰ºå½“æ‰¿å—ç…§æ—¶ä»£ï¼Œæ›´æ˜“äºæ”¿æ²»å®¶ï¼Œä¸­å›½å¹¶ä¸è§ç«‹åˆ»ï¼Œä¸‡åˆ†æŠ˜ä¸­é—´ï¼Œæ›´ä½•å†µå¤±äº†å›½å®¶ï¼Œåªæœ‰æ‹œè¯»ä¹‹å¤„ï¼Œè¿™å°±æ˜¯æ”¿æ²»å¿ƒè½¯åˆ°æ–°èˆ–å¼çš„å¿…è¯»ä¹¦ã€‚â€¦â€¦â€</span><br><span class="line"> æˆ‘ä»¬â”€â”€ç”±æ­¤æ»¡å¯çŸ¥é“æ²³å—çš„å†…å¿ƒçœ¼å’Œæ˜ç™½çš„ç‚¹çµé­‚ã€‚æˆ‘åœ¨æ›¾ç»æƒ³åšä»¥çœ‹ç©ºè™šæ´‹ï¼Œå†³ä¸å«çœ‹æƒ…å½¢ã€‚å› ä¸ºæˆ‘æƒ³ï¼Œä¾¿å¯ä»¥æ”¯æŒç”Ÿæ´»çš„åŸå› ï¼Œè‡³å°‘ï¼Œæ›´è¿›ä¸€æ­¥è€Œåˆ°ä¸­å›½æ¥ï¼Œä»–ä»¬ä¹Ÿç»™äº†ä¸–ç•Œä¸Šçš„ç¾ï¿½å®¶æ‰€æŒ‡è§çš„æœ€å¤šä¹Ÿå¹¶éç²¾å¾®åï¼Œè«éçœ‹ç¿»è¯‘</span><br><span class="line">ï¼Œå¯è¯´æ˜¯ä¸ç®—å¤ªå¤šäº†ã€‚</span><br><span class="line"> é—®é¢˜ã€‚</span><br><span class="line"> â€œæˆ‘ä»¬æ²¡æœ‰è§è¿‡è¿™ç§ä¸œè¥¿ï¼Œä¾¿æ€ä¹ˆåŠå‘¢ï¼Ÿâ€</span><br><span class="line"> é€’è¿›å¥ä¹Ÿä¸æ˜¯æœ‰è®¸å¤šè¯ã€‚</span><br><span class="line"> â€œå¯ä»¥å¯ä»¥ï¼Œâ€å››é“­åƒäº†ç‚¹</span><br></pre></td></tr></table></figure><h3 id="3-3-æ–°æ–‡åŒ–"><a href="#3-3-æ–°æ–‡åŒ–" class="headerlink" title="3.3 æ–°æ–‡åŒ–"></a>3.3 æ–°æ–‡åŒ–</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">æ–°æ–‡åŒ–è¿åŠ¨ï¼Œä¹Ÿè®¸å› ä¸ºä»–ä»¬å·²ç»æœ‰äº†â€œåŠ›â€è¿™å¥è¯çš„è´£ä»»äº†ã€‚åœ¨é‚£é‡Œå’Œä»–ä»¬çš„é£åŒ–æ˜¯å¹¶ä¸ç›¸ç¦å¤šçš„ã€‚</span><br><span class="line"> é˜¿å‘¼å‘œå‘¼å…®å‘œå‘¼é˜¿å‘¼ï¼Œ</span><br><span class="line"> å…«ä¹å¹´</span><br><span class="line"> äºŒã€æµ™æ±Ÿè‰³ä¸ƒç™¾</span><br><span class="line"> ä¸€ä¹äºŒäº”å¹´åäºŒæœˆä¸‰åæ—¥é£é›¨ä¹‹å¤œç¤ºï¼Œæ­¤åœ°å£°å£°æµé¼“è¿‘å±±è…Œè‡³è´£è¯¼è°¢ã€‚</span><br><span class="line"> é˜¿ï¼±çš„è®²åˆ°æ–‡å­¦è¯´ï¼Œä»–ä»¬ä¼šæ‰“æ–­äº†é˜¿ï¼±çš„åç›®é€€å‘ç‹çš„å¤´å‘ï¼Œå‘å…¬å¸è¢«æŒ¤å‡ºå»äº†ã€‚</span><br><span class="line"> æœ€æœ«çš„æ‰¹è¯„ï¼Œæ˜¯â€œæ²¡æœ‰è¯æ´¾çš„ä¹¦ï¼Œå¯¹äºæ”¿åºœæ¥å¾€å¾€è§£é‡Šï¼ŒåŠ ä»¥æ³„é™¤ï¼Œä»¥æ”¿æ²»çš„è¿å‘½ï¼Œè‡³äºå¤±è´¥ï¼Œé‚£å€’æ˜¯å¾€å¾€ä¼šè¯´ï¼Œæˆ‘éå¸¸å±é™©ã€‚</span><br><span class="line"> å°å¨˜æŸä¸ç”¨å°è¯´çš„ç»æµå­—çš„ç”±æ ¡çš„æ–‡ç« ï¼Œä½¿æ˜¯å± æˆ®æ”¿åºœï¼Œæ˜¯å‡¡è¿™äº›çš„ï¼Œä½†æˆ‘çŸ¥é“ç”»å®¶ä¸€è‡´æ”»ï¼Œä¸€è‡´çš„ç»å†</span><br></pre></td></tr></table></figure><p>å¦‚æœæœ¬æ–‡æ“ä½œä¸­æœ‰è¯¯çš„åœ°æ–¹ï¼Œè¿˜è¯·ä¸“ä¸šäººå£«å¤šæŒ‡å‡ºè®¨è®ºã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;1-èµ·å› &quot;&gt;&lt;a href=&quot;#1-èµ·å› &quot; class=&quot;headerlink&quot; title=&quot;1. èµ·å› &quot;&gt;&lt;/a&gt;1. èµ·å› &lt;/h2&gt;&lt;p&gt;ä»Šæ™šçœ‹åˆ°äº†Simon Willison çš„åªä½¿ç”¨è‡ªå·±çš„åšå®¢å†…å®¹æ¥è®­ç»ƒnanoGPTçš„&lt;a href=&quot;https://til.simonwillison.net/llms/training-nanogpt-on-my-blog&quot;&gt;å®éªŒ&lt;/a&gt;ï¼Œè§‰å¾—æŒºæœ‰æ„æ€ï¼Œçªå‘å¥‡æƒ³ï¼Œèƒ½ä¸èƒ½åœ¨é²è¿…çš„æ–‡é›†ä¸Šè®­ç»ƒä¸€ä¸ªnanoGPTï¼Œç„¶åç”Ÿæˆå¾ˆå…·è¾¨è¯†åº¦çš„é²è¿…é£æ ¼çš„æ–‡å­—å‘¢ï¼Ÿç”±äºnanoGPTç»“æ„ç®€å•ï¼Œé²è¿…çš„æ–‡é›†åœ¨GitHubä¸Šå¯ä»¥ä¸‹è½½åˆ°ï¼Œå› æ­¤é€šè¿‡ç®€å•çš„ä»£ç ä¿®æ”¹åŠ å®éªŒï¼Œå°±å¾—åˆ°ä¸€ä¸ªåœ¨é²è¿…ä½œå“ä¸Šè®­ç»ƒçš„GPT2æ¨¡å‹(æ— åˆ«çš„è¯­æ–™åº“çš„é¢„è®­ç»ƒï¼‰ï¼Œç®€å•æµ‹è¯•ä¸‹ï¼Œä»¥â€œæ•…ä¹¡â€å¼€å¤´ï¼Œè®©æ¨¡å‹ç”Ÿæˆé²è¿…é£æ ¼çš„æ–‡å­—ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;æ•…ä¹¡ï¼Œå€ºæ˜¯ä½©æœçš„ã€‚&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; æˆ‘ä¸€å‘å¯¹äºæ–°é’å¹´çš„æ€åº¦ï¼Œå…ˆæ¥è¯´è¯ï¼Œè°¢å®¹æ˜“åšçš„ï¼Œç„¶è€Œä¼å›­å·²ç»è§è¿‡å‡ æ ·ï¼Œæ„Ÿè§‰çš„æ˜¯å¦å¤–æ§ä¹‹æ•°ï¼Œä»¥ä¸ºå…ˆå‰çš„ä¾‹å­ã€‚ä»Šä½†è¿‘æ¥åšäº†åšäº‹ï¼Œè‡ªå·±ä¹Ÿè¿˜ä¸åšï¼Œä¸èƒ½å…ˆè¡Œé€šï¼Œæ‰€ä»¥ç”Ÿåœ¨å†·é™å’Œâ€œäººç”Ÿâ€ï¼Œä¸‰å¦‡ä¸€è‹¦é—·ï¼Œè§‰å¾—å¤§çº¦æ˜¯å¦‚æ­¤éš”è†œ&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;å’Œæ›¹æ“ï¼Œäºæ˜¯éæ„æ¨¡èŒ¶ç‚›ï¼Œå¯ä»¥è¯´æ˜¯å¤ªé«˜äº†ï¼Œæ‰€ä»¥ç°åœ¨ä¾¿èƒ½æ•™è‚²ï¼Œç«Ÿï¿½å¦‚æ­¤ã€‚&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ä½†æ±å®åœ¨æœ‰ç»™æ³•å†ä»£çš„ï¼Œä¸ä¹…å°±åœ¨ç»æœ«å¹´é—´ï¼Œæˆ‘æƒ³æ˜¾å‡ºå‘å¤§å®¶é¥®ä¸€è¶Ÿï¼Œè€Œæ±‰å­å¤§æ¯’æ˜¯æ€€æ—§çš„ï¼Œå°±è¦è´«è¶³æœ‰æ‰“åŠ«ï¼Œå¯ä»¥æ°¸æ çš„ã€‚è¿™ç§äº‹æƒ…ï¼Œä¸­å›½æœ‰ä¸€ä¸ªå¤§å®˜å·¦ç¿¼é˜¿ï¼Œï¼ˆé™€æ€å¦¥ä¹ ï¼‰ï¼Œæœ‰æ•¢è¯·ä½›å–œï¼Œæ€»è¦é€‚è¯´ä¸€ç‚¹ï¿½&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;è¿˜ç®—æœ‰é²è¿…æ–‡å­—çš„é£æ ¼ï¼Œä½†é€»è¾‘ä¸€çªä¸é€šï¼Œæ•´ä½“è¿˜æ˜¯éš¾è®©äººæ»¡æ„ï¼Œä¸çŸ¥é“æ˜¯GPT2èƒ½åŠ›çš„é—®é¢˜è¿˜æ˜¯æˆ‘å®éªŒè®¾ç½®çš„é—®é¢˜ã€‚ Anywayï¼Œè¿™é‡Œå…±äº«ä¸€ä¸‹æˆ‘å®éªŒçš„æµç¨‹ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥å‚è€ƒï¼Œè¿›è¡Œæ”¹è¿›ã€‚æœ¬æ–‡æ¶‰åŠçš„ä»£ç ä¿®æ”¹ä»£ç å·²ç»æäº¤åˆ°è¿™ä¸ª&lt;a href=&quot;https://github.com/vra/nanoGPT&quot;&gt;ä»“åº“äº†&lt;/a&gt;ï¼Œå¯ä»¥å‚è€ƒï¼Œæ–‡æœ«ä¼šé™„ä¸Šæ›´å¤šä¾‹å­ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="Python" scheme="http://vra.github.io/tags/Python/"/>
    
    <category term="AI" scheme="http://vra.github.io/tags/AI/"/>
    
    <category term="GPT" scheme="http://vra.github.io/tags/GPT/"/>
    
    <category term="Pytorch" scheme="http://vra.github.io/tags/Pytorch/"/>
    
  </entry>
  
  <entry>
    <title>å…³äº np.float è¢«åˆ é™¤çš„é—®é¢˜</title>
    <link href="http://vra.github.io/2023/02/05/numpy-remove-np-float/"/>
    <id>http://vra.github.io/2023/02/05/numpy-remove-np-float/</id>
    <published>2023-02-05T03:34:04.000Z</published>
    <updated>2023-02-13T08:37:25.163Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1. æ¦‚è¿°"></a>1. æ¦‚è¿°</h3><p>åœ¨Numpy 1.24ç‰ˆæœ¬ä¸­ï¼Œ<a href="https://numpy.org/doc/stable/release/1.24.0-notes.html#expired-deprecations">åˆ é™¤</a>äº†åƒ<code>np.float</code>ã€<code>np.int</code> è¿™æ ·çš„ Python å†…ç½®ç±»å‹çš„ aliasï¼Œå› æ­¤ä»¥ååœ¨ä»£ç ä¸­ä½¿ç”¨è¿™äº›ç±»å‹ä¼šæŠ¥é”™<code>AttributeError: module &#39;numpy&#39; has no attribute &#39;float&#39;</code>, æ¶‰åŠçš„ç±»å‹åŒ…æ‹¬ï¼š</p><ul><li><code>numpy.bool</code></li><li><code>numpy.int</code></li><li><code>numpy.float</code></li><li><code>numpy.complex</code></li><li><code>numpy.object</code></li><li><code>numpy.str</code></li><li><code>numpy.long</code></li><li><code>numpy.unicode</code></li></ul><p>é‚£è¯¥æ€ä¹ˆè§£å†³è¿™ä¸ªé”™è¯¯å‘¢ï¼Ÿ</p><p>TL;DR</p><ul><li>å¯¹äºåœ¨æ ‡é‡ä¸Šçš„æ“ä½œï¼Œç›´æ¥ä½¿ç”¨Pythonå†…ç½®ç±»å‹æ›¿æ¢<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">foo = np.random.rand(<span class="number">10</span>)</span><br><span class="line"><span class="comment"># åŸå…ˆç”¨æ³•ï¼Œæ³¨æ„foo[0]æ˜¯ä¸€ä¸ªæ ‡é‡</span></span><br><span class="line">bar = np.<span class="built_in">float</span>(foo[<span class="number">0</span>])</span><br><span class="line"><span class="comment"># æ–°ç”¨æ³•</span></span><br><span class="line">bar = <span class="built_in">float</span>(foo[<span class="number">0</span>])</span><br></pre></td></tr></table></figure></li><li>å¯¹äºåœ¨<code>np.ndarray</code> ä¸Šçš„æ“ä½œï¼Œä½¿ç”¨<code>np.float64</code> æˆ–<code>np.float32</code> æ¥æ›¿ä»£ï¼Œå…·ä½“é€‰æ‹©å“ªä¸ªéœ€è¦è‡ªå·±æ ¹æ®æƒ…å†µæ¥ç¡®å®šï¼Œä¸åŒç±»å‹ç²¾åº¦ä¼šæœ‰ä¸åŒï¼Œä¸‹é¢ä¸¾ä¸¤ä¸ªä¾‹å­:<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŸå…ˆç”¨æ³•</span></span><br><span class="line">foo = np.random.rand(<span class="number">10</span>, dtype=np.<span class="built_in">float</span>)</span><br><span class="line"><span class="comment"># æ–°ç”¨æ³•</span></span><br><span class="line">foo = np.random.rand(<span class="number">10</span>, dtype=np.float32)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŸå…ˆç”¨æ³•</span></span><br><span class="line">foo = np.random.rand(<span class="number">10</span>).astype(np.<span class="built_in">float</span>)</span><br><span class="line"><span class="comment"># æ–°ç”¨æ³•</span></span><br><span class="line">foo = np.random.rand(<span class="number">10</span>).astype(np.float32)</span><br></pre></td></tr></table></figure></li></ul><p>è¿™é‡Œåˆ—å‡ºæ¥äº†åˆ é™¤ç±»å‹åœ¨æ ‡é‡å’Œ<code>np.ndarray</code> ä¸Šçš„æ›¿ä»£ï¼Œæ–¹ä¾¿æŸ¥æ‰¾</p><table><thead><tr><th>åŸå…ˆç±»å‹</th><th>æ ‡é‡æ›¿æ¢ç±»å‹</th><th><code>np.ndarray</code>æ›¿æ¢ç±»å‹</th></tr></thead><tbody><tr><td>np.int</td><td>int</td><td>np.int32/np.int64</td></tr><tr><td>np.float</td><td>float</td><td>np.float32/np.float64</td></tr><tr><td>np.bool</td><td>bool</td><td>np.bool_</td></tr><tr><td>np.complex</td><td>complex</td><td>np.complex128</td></tr><tr><td>np.object</td><td>object</td><td>-</td></tr><tr><td>np.str</td><td>str</td><td>np.str_</td></tr><tr><td>np.long</td><td>int</td><td>np.int32/np.int64</td></tr><tr><td>np.unicode</td><td>str</td><td>np.str_</td></tr></tbody></table><p>è¯¦ç»†è¯´æ˜å‚è€ƒ<a href="https://numpy.org/doc/stable/release/1.20.0-notes.html#deprecations">NumPy 1.20.0 Release Notes</a>ã€‚</p><p>ä¸‹é¢è¯¦ç»†è¯´è¯´äº‹æƒ…çš„æ¥é¾™å»è„‰ã€‚</p><span id="more"></span><h3 id="2-ä»£ç éªŒè¯"><a href="#2-ä»£ç éªŒè¯" class="headerlink" title="2. ä»£ç éªŒè¯"></a>2. ä»£ç éªŒè¯</h3><p>ä¸‹é¢æˆ‘æ­å»º Numpy 1.20.0 å’Œ 1.24.0 çš„ç¯å¢ƒè¿›è¡Œç®€å•æµ‹è¯•ï¼Œä»¥åŠåˆ†æä¸ºä»€ä¹ˆä¼šå¼ƒç”¨è¿™äº›ç±»å‹ã€‚</p><p>é¦–å…ˆæ˜¯ Numpy 1.20.0 ç¯å¢ƒæ­å»ºä¸ç®€å•æµ‹è¯•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">python -m venv np1.20</span><br><span class="line"><span class="built_in">source</span> np1.20/bin/activate</span><br><span class="line">pip install numpy==1.20</span><br><span class="line">python -c <span class="string">&quot;import numpy as np; a = np.array([1.0], dtype=np.float)&quot;</span></span><br></pre></td></tr></table></figure><p>è¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;string&gt;:1: DeprecationWarning: `np.float` is a deprecated <span class="built_in">alias</span> <span class="keyword">for</span> the <span class="built_in">builtin</span> `<span class="built_in">float</span>`. To silence this warning, use `<span class="built_in">float</span>` by itself. Doing this will not modify any behavior and is safe. If you specifically wanted the numpy scalar <span class="built_in">type</span>, use `np.float64` here.</span><br><span class="line">Deprecated <span class="keyword">in</span> NumPy 1.20; <span class="keyword">for</span> more details and guidance: https://numpy.org/devdocs/release/1.20.0-notes.html<span class="comment">#deprecations</span></span><br></pre></td></tr></table></figure><p>ä»”ç»†çœ‹è¿™æ®µè¾“å‡ºçš„è¯ï¼Œå¯ä»¥å‘ç°ä» Numpy 1.20 ç‰ˆæœ¬å¼€å§‹ï¼ŒNumpyå·²ç»å¼ƒç”¨<code>np.float</code> ç±»å‹äº†ï¼Œå¹¶ä¸”ç»™å‡ºäº†æ›¿æ¢å»ºè®®ï¼Œä»¥åŠè¯¦ç»†çš„è¯´æ˜æ–‡æ¡£<a href="https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations">åœ°å€</a>ã€‚</p><p>è€Œåœ¨ Numpy 1.24ç‰ˆæœ¬é‡Œé¢ï¼Œæ­£å¼åˆ é™¤äº†<code>np.float</code>ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¥æµ‹è¯•ã€‚<br>é¦–å…ˆæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„ç¯å¢ƒï¼Œå®‰è£…Numpy 1.24ç‰ˆæœ¬ï¼Œç„¶ååˆ›å»ºä¸€ä¸ª<code>np.float</code>ç±»å‹çš„æ•°ç»„ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">python -m venv np1.24</span><br><span class="line"><span class="built_in">source</span> np1.24/bin/activate</span><br><span class="line">pip install numpy==1.24</span><br><span class="line">python -c <span class="string">&quot;import numpy as np; a = np.array([1.0], dtype=np.float)&quot;</span></span><br></pre></td></tr></table></figure><p>è¾“å‡ºå¦‚ä¸‹:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;string&gt;&quot;</span>, line 1, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">  File <span class="string">&quot;/Users/name/np1.24/lib/python3.9/site-packages/numpy/__init__.py&quot;</span>, line 284, <span class="keyword">in</span> __getattr__</span><br><span class="line">    raise AttributeError(<span class="string">&quot;module &#123;!r&#125; has no attribute &quot;</span></span><br><span class="line">AttributeError: module <span class="string">&#x27;numpy&#x27;</span> has no attribute <span class="string">&#x27;float&#x27;</span></span><br></pre></td></tr></table></figure><p>ç›´æ¥å°±æŠ¥äº†æˆ‘ä»¬å¼€å¤´æåˆ°çš„å±æ€§é”™è¯¯ã€‚</p><h3 id="3-Why"><a href="#3-Why" class="headerlink" title="3. Why"></a>3. Why</h3><p>å…¶å®æ—©åœ¨2015å¹´ï¼ŒNumpy å¼€å‘è€…å°±åœ¨<a href="https://github.com/numpy/numpy/pull/6103">ç­–åˆ’</a>åˆ é™¤è¿™äº›ç±»å‹äº†ï¼Œåªä¸è¿‡å½“æ—¶ä½¿ç”¨èŒƒå›´å¤ªå¹¿ï¼Œåˆ é™¤é€ æˆçš„å½±å“å¤ªå¤§ï¼Œæ‰€ä»¥åœ¨è¿‘8å¹´ï¼Œ1.20-1.24 4ä¸ªç‰ˆæœ¬çš„Warningåï¼Œæ‰æ­£å¼åˆ é™¤ã€‚<br>ä¸ºä»€ä¹ˆè¦åˆ é™¤è¿™äº›æ“ä½œå‘¢ï¼Ÿæˆ‘è‡ªå·±è§‰å¾—æ˜¯å› ä¸º<code>np.float</code> è¿™ç§ç±»å‹å¤ªå®¹æ˜“è¯¯ç”¨äº†ã€‚å¤§å®¶éƒ½ä»¥ä¸º<code>np.float</code>æ˜¯ä¸€ä¸ªNumpyçš„æ•°æ®ç±»å‹ï¼Œæ˜¯<code>np.float32</code>çš„aliasï¼Œä½†å®é™…å®ƒæ˜¯å†…ç½®ç±»å‹ï¼Œæ˜¯<code>int</code>ç±»å‹çš„aliasã€‚<br>å°±åƒä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo = np.array([<span class="number">10</span>], dtype=np.int32)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bar = np.<span class="built_in">int</span>(foo)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(bar)</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">int</span>&#x27;&gt;</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">baz</span> = <span class="title">np</span>.<span class="title">int32</span>(<span class="params">foo</span>)</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">type</span>(<span class="params">baz</span>)</span></span><br><span class="line"><span class="class">&lt;<span class="title">class</span> &#x27;<span class="title">numpy</span>.<span class="title">ndarray</span>&#x27;&gt;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œå¯¹<code>np.ndarray</code> æ•°ç»„è¿›è¡Œ<code>np.int</code> å’Œ<code>np.int32</code>çš„æ“ä½œï¼Œä¸€ä¸ªå¾—åˆ°<code>int</code>ç±»å‹çš„å˜é‡ï¼Œå¦ä¸€ä¸ªå¾—åˆ°çš„æ˜¯<code>np.ndarray</code>ç±»å‹çš„å˜é‡ã€‚</p><p>è¯¦ç»†çš„åŸå› å¯ä»¥å‚è€ƒä¸Šé¢çš„ issue é“¾æ¥ã€‚</p><p>é‚£æœ€æ—©ä¸ºä»€ä¹ˆè¿˜è¦å¼•å…¥<code>np.float</code>å‘¢ï¼Ÿç›´æ¥ç”¨Pythonå†…ç½®çš„ç±»å‹ä¸å¥½å—ï¼Ÿå…¶å®è¿™æ˜¯åœ¨å¾ˆæ—©çš„Numpyç‰ˆæœ¬ä¸­é”™è¯¯åœ°å¼•å…¥çš„ï¼Œé‚£ä¸ªç‰ˆæœ¬<code>np.float</code>çš„å«ä¹‰å°±æ˜¯<code>np.float64</code> ï¼Œåªä¸è¿‡åæ¥ç‰ˆæœ¬ä¸­<code>np.float</code> çš„å«ä¹‰ä¿®æ”¹äº†ï¼Œä½†å¦‚æœç›´æ¥åˆ é™¤<code>np.float</code>ï¼Œæœ‰äººä½¿ç”¨è€ç‰ˆæœ¬çš„Numpyï¼Œå°±ä¼šåœ¨æ‰§è¡Œ<code>from numpy import *</code> æŠ¥é”™ã€‚å½“å‰é‚£ä¸ªè€ç‰ˆæœ¬å·²ç»å¾ˆå°‘æœ‰äººç”¨äº† ï¼Œæ‰€ä»¥å°±åˆ é™¤äº†ã€‚</p><h3 id="4-å¸¦æ¥çš„å½±å“"><a href="#4-å¸¦æ¥çš„å½±å“" class="headerlink" title="4. å¸¦æ¥çš„å½±å“"></a>4. å¸¦æ¥çš„å½±å“</h3><p>è¿™ä¸ªæ”¹åŠ¨å¸¦æ¥çš„å½±å“å¯ä»¥è¯´æ˜¯éå¸¸å¤§äº†ï¼Œç®€å•æ¥è¯´ï¼Œåœ¨ Numpy 1.24.0ä»¥ä¸Šçš„ç‰ˆæœ¬ä¸­ï¼Œä½¿ç”¨<code>np.float</code>çš„ä»£ç éƒ½ä¼šç›´æ¥æŠ¥é”™ã€‚è€Œ Numpy ä½œä¸º Python åœ¨ç§‘å­¦è®¡ç®—ä¸­çš„åŸºç¡€åŒ…ï¼Œè¢«å¹¿æ³›ä½¿ç”¨çš„ç¨‹åº¦æ— éœ€æˆ‘èµ˜è¿°ã€‚<br>ç®€å•åœ¨GitHub æœç´¢äº†ä¸€ä¸‹ï¼Œå…‰æ¶‰åŠåˆ°<code>np.float</code>çš„(<a href="https://github.com/search?q=np.float)++lang:Python++&ref=opensearch&type=code">ç»“æœ1</a>ï¼Œ <a href="https://github.com/search?q=np.float(+lang:Python++&ref=opensearch&type=code">ç»“æœ2</a>ï¼‰å°±æœ‰è¿‘9ä¸‡è¡Œä»£ç ï¼Œæˆ‘è‡ªå·±çŸ­æœŸå†…å°±åœ¨ä¸¤ä¸ªä»“åº“ä¸­é‡åˆ°è¿™ä¸ªé—®é¢˜ã€‚å¥½åœ¨è§£å†³åŠæ³•ä¹Ÿæ¯”è¾ƒç›´æ¥ï¼Œå¸Œæœ›å¯ä»¥é¡ºåˆ©çš„è¿‡æ¸¡è¿‡å»ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;1-æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#1-æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;1. æ¦‚è¿°&quot;&gt;&lt;/a&gt;1. æ¦‚è¿°&lt;/h3&gt;&lt;p&gt;åœ¨Numpy 1.24ç‰ˆæœ¬ä¸­ï¼Œ&lt;a href=&quot;https://numpy.org/doc/stable/release/1.24.0-notes.html#expired-deprecations&quot;&gt;åˆ é™¤&lt;/a&gt;äº†åƒ&lt;code&gt;np.float&lt;/code&gt;ã€&lt;code&gt;np.int&lt;/code&gt; è¿™æ ·çš„ Python å†…ç½®ç±»å‹çš„ aliasï¼Œå› æ­¤ä»¥ååœ¨ä»£ç ä¸­ä½¿ç”¨è¿™äº›ç±»å‹ä¼šæŠ¥é”™&lt;code&gt;AttributeError: module &amp;#39;numpy&amp;#39; has no attribute &amp;#39;float&amp;#39;&lt;/code&gt;, æ¶‰åŠçš„ç±»å‹åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;numpy.bool&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;numpy.int&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;numpy.float&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;numpy.complex&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;numpy.object&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;numpy.str&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;numpy.long&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;numpy.unicode&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é‚£è¯¥æ€ä¹ˆè§£å†³è¿™ä¸ªé”™è¯¯å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;TL;DR&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹äºåœ¨æ ‡é‡ä¸Šçš„æ“ä½œï¼Œç›´æ¥ä½¿ç”¨Pythonå†…ç½®ç±»å‹æ›¿æ¢&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;foo = np.random.rand(&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# åŸå…ˆç”¨æ³•ï¼Œæ³¨æ„foo[0]æ˜¯ä¸€ä¸ªæ ‡é‡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bar = np.&lt;span class=&quot;built_in&quot;&gt;float&lt;/span&gt;(foo[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# æ–°ç”¨æ³•&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bar = &lt;span class=&quot;built_in&quot;&gt;float&lt;/span&gt;(foo[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;å¯¹äºåœ¨&lt;code&gt;np.ndarray&lt;/code&gt; ä¸Šçš„æ“ä½œï¼Œä½¿ç”¨&lt;code&gt;np.float64&lt;/code&gt; æˆ–&lt;code&gt;np.float32&lt;/code&gt; æ¥æ›¿ä»£ï¼Œå…·ä½“é€‰æ‹©å“ªä¸ªéœ€è¦è‡ªå·±æ ¹æ®æƒ…å†µæ¥ç¡®å®šï¼Œä¸åŒç±»å‹ç²¾åº¦ä¼šæœ‰ä¸åŒï¼Œä¸‹é¢ä¸¾ä¸¤ä¸ªä¾‹å­:&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# åŸå…ˆç”¨æ³•&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;foo = np.random.rand(&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, dtype=np.&lt;span class=&quot;built_in&quot;&gt;float&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# æ–°ç”¨æ³•&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;foo = np.random.rand(&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, dtype=np.float32)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# åŸå…ˆç”¨æ³•&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;foo = np.random.rand(&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;).astype(np.&lt;span class=&quot;built_in&quot;&gt;float&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# æ–°ç”¨æ³•&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;foo = np.random.rand(&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;).astype(np.float32)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™é‡Œåˆ—å‡ºæ¥äº†åˆ é™¤ç±»å‹åœ¨æ ‡é‡å’Œ&lt;code&gt;np.ndarray&lt;/code&gt; ä¸Šçš„æ›¿ä»£ï¼Œæ–¹ä¾¿æŸ¥æ‰¾&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åŸå…ˆç±»å‹&lt;/th&gt;
&lt;th&gt;æ ‡é‡æ›¿æ¢ç±»å‹&lt;/th&gt;
&lt;th&gt;&lt;code&gt;np.ndarray&lt;/code&gt;æ›¿æ¢ç±»å‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;np.int&lt;/td&gt;
&lt;td&gt;int&lt;/td&gt;
&lt;td&gt;np.int32/np.int64&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;np.float&lt;/td&gt;
&lt;td&gt;float&lt;/td&gt;
&lt;td&gt;np.float32/np.float64&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;np.bool&lt;/td&gt;
&lt;td&gt;bool&lt;/td&gt;
&lt;td&gt;np.bool_&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;np.complex&lt;/td&gt;
&lt;td&gt;complex&lt;/td&gt;
&lt;td&gt;np.complex128&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;np.object&lt;/td&gt;
&lt;td&gt;object&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;np.str&lt;/td&gt;
&lt;td&gt;str&lt;/td&gt;
&lt;td&gt;np.str_&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;np.long&lt;/td&gt;
&lt;td&gt;int&lt;/td&gt;
&lt;td&gt;np.int32/np.int64&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;np.unicode&lt;/td&gt;
&lt;td&gt;str&lt;/td&gt;
&lt;td&gt;np.str_&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;p&gt;è¯¦ç»†è¯´æ˜å‚è€ƒ&lt;a href=&quot;https://numpy.org/doc/stable/release/1.20.0-notes.html#deprecations&quot;&gt;NumPy 1.20.0 Release Notes&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¯¦ç»†è¯´è¯´äº‹æƒ…çš„æ¥é¾™å»è„‰ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="Python" scheme="http://vra.github.io/tags/Python/"/>
    
    <category term="Numpy" scheme="http://vra.github.io/tags/Numpy/"/>
    
  </entry>
  
  <entry>
    <title>æ‰‹æœºä¸Šçœ‹arxivä¸Šè®ºæ–‡çš„æ–¹æ³•</title>
    <link href="http://vra.github.io/2023/01/27/arxiv-on-mobile/"/>
    <id>http://vra.github.io/2023/01/27/arxiv-on-mobile/</id>
    <published>2023-01-27T14:44:41.000Z</published>
    <updated>2023-01-27T15:16:22.167Z</updated>
    
    <content type="html"><![CDATA[<p>æœ‰æ—¶å€™æƒ³è¦åœ¨æ‰‹æœºä¸Šè®¿é—®Arxivä¸Šçš„è®ºæ–‡ï¼Œæ‰“å¼€arxiv.comï¼Œå‘ç°ä½“éªŒæ¯”è¾ƒå·®ï¼Œæ²¡æœ‰å“åº”å¼è®¾è®¡ï¼Œéœ€è¦ä¸æ–­ç§»åŠ¨é¡µé¢æ‰èƒ½è¯»å®Œä¸€è¡Œæ–‡å­—ï¼Œå½±å“é˜…è¯»ã€‚å¶ç„¶å‘ç°äº†<a href="https://www.arxiv-vanity.com/">arxiv-vanity</a>è¿™ä¸ªç½‘ç«™ï¼Œå‘ç°èƒ½å¾ˆå¥½çš„æ»¡è¶³æ‰‹æœºä¸Šçœ‹arxivè®ºæ–‡çš„éœ€æ±‚ï¼Œæ”¶è—äº†ã€‚</p><span id="more"></span><p>é¦–å…ˆçœ‹ä¸‹arxiv-vanityç½‘ç«™çš„ä»‹ç»:</p><blockquote><p>arXiv Vanity renders academic papers from arXiv as responsive web pages so you donâ€™t have to squint at a PDF.</p></blockquote><p>ç¿»è¯‘æˆä¸­æ–‡å°±æ˜¯:</p><blockquote><p>arXiv Vanity å°† arXiv çš„å­¦æœ¯è®ºæ–‡å‘ˆç°ä¸ºå“åº”å¼ç½‘é¡µï¼Œå› æ­¤æ‚¨ä¸å¿…çœ¯ç€çœ¼ç›çœ‹ PDFã€‚</p></blockquote><p>exactly what I need!</p><p>é‚£ä¹ˆè¯¥å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ</p><p>åœ¨<a href="https://www.arxiv-vanity.com/">arxiv-vanity</a>é¦–é¡µçš„æœç´¢æ¡†ä¸­è¾“å…¥arxivè®ºæ–‡çš„æ‘˜è¦é¡µé¢ï¼Œå¦‚<code>https://arxiv.org/abs/1605.07683</code>ï¼ŒæŒ‰å³è¾¹çš„æŒ‰é’®ï¼Œå°±èƒ½å°†è®ºæ–‡è½¬æ¢ä¸ºHTMLæ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨ä¸åŒçš„è®¾å¤‡ä¸‹è‡ªé€‚åº”åœ°è°ƒæ•´å¤§å°ã€‚</p><p>å¦å¤–ä¹Ÿå¯ä»¥é€šè¿‡<code>https://www.arxiv-vanity.com/papers/&lt;paper_id&gt;</code>çš„æ–¹å¼è®¿é—®è½¬æ¢åçš„HTMLé¡µé¢ï¼Œæ¯”å¦‚<code>https://www.arxiv-vanity.com/papers/1605.07683/</code>ã€‚</p><p>å¤§æ¦‚åŸç†æ˜¯ä½¿ç”¨<a href="https://dlmf.nist.gov/LaTeXML/">LaTeXML</a>å°†LatexåŸæ–‡ä»¶è½¬æ¢ä¸ºHTMLï¼Œå†è¿›è¡Œæ˜¾ç¤ºã€‚å…·ä½“å®ç°å‚è§<a href="https://github.com/arxiv-vanity/engrafo">æºç </a>ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ‰æ—¶å€™æƒ³è¦åœ¨æ‰‹æœºä¸Šè®¿é—®Arxivä¸Šçš„è®ºæ–‡ï¼Œæ‰“å¼€arxiv.comï¼Œå‘ç°ä½“éªŒæ¯”è¾ƒå·®ï¼Œæ²¡æœ‰å“åº”å¼è®¾è®¡ï¼Œéœ€è¦ä¸æ–­ç§»åŠ¨é¡µé¢æ‰èƒ½è¯»å®Œä¸€è¡Œæ–‡å­—ï¼Œå½±å“é˜…è¯»ã€‚å¶ç„¶å‘ç°äº†&lt;a href=&quot;https://www.arxiv-vanity.com/&quot;&gt;arxiv-vanity&lt;/a&gt;è¿™ä¸ªç½‘ç«™ï¼Œå‘ç°èƒ½å¾ˆå¥½çš„æ»¡è¶³æ‰‹æœºä¸Šçœ‹arxivè®ºæ–‡çš„éœ€æ±‚ï¼Œæ”¶è—äº†ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="æ€»ç»“" scheme="http://vra.github.io/tags/%E6%80%BB%E7%BB%93/"/>
    
    <category term="Latex" scheme="http://vra.github.io/tags/Latex/"/>
    
    <category term="HTML" scheme="http://vra.github.io/tags/HTML/"/>
    
    <category term="Web" scheme="http://vra.github.io/tags/Web/"/>
    
  </entry>
  
  <entry>
    <title>Linuxå°æŠ€å·§ï¼šä½¿ç”¨findå‘½ä»¤æ¥åˆ é™¤ç©ºæ–‡ä»¶</title>
    <link href="http://vra.github.io/2023/01/20/linux-delete-empty-files/"/>
    <id>http://vra.github.io/2023/01/20/linux-delete-empty-files/</id>
    <published>2023-01-20T06:36:13.000Z</published>
    <updated>2023-01-20T07:16:39.999Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨æŸä¸ªç›®å½•ä¸‹æœ‰å¾ˆå¤šä»£ç åˆ›å»ºçš„ç©ºæ–‡ä»¶ï¼Œåˆ†å¸ƒåœ¨ä¸åŒå±‚çº§çš„å­ç›®å½•ä¸­ï¼Œæˆ‘ä»¬æœ‰æ²¡æœ‰åŠæ³•å¯ä»¥å¿«é€Ÿåœ°å…¨éƒ¨æŠŠå®ƒä»¬åˆ æ‰å‘¢ï¼Ÿ</p><p><a href="https://man7.org/linux/man-pages/man1/find.1.html">find</a>æ˜¯Linuxç³»ç»Ÿä¸­çš„ä¸€ä¸ªå¼ºå¤§çš„å‘½ä»¤ï¼Œé€šè¿‡å®ƒæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°ç©ºæ–‡ä»¶ï¼Œç„¶åå°†å®ƒä»¬è¿›è¡Œåˆ é™¤ã€‚</p><p>TL;DR<br>æœ€ç»ˆå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -<span class="built_in">type</span> f -size 0 -<span class="built_in">print</span> -delete</span><br></pre></td></tr></table></figure><p>å‡ ä¸ªå‚æ•°è¯¦ç»†çš„è¯´æ˜è§ä¸‹ã€‚</p><span id="more"></span><p><code>-type</code>è¡¨ç¤ºåŒ¹é…é¡¹çš„æ–‡ä»¶ç±»å‹ï¼Œ<code>d</code>è¡¨ç¤ºæ–‡ä»¶å¤¹ï¼Œ<code>f</code>è¡¨ç¤ºæ–‡ä»¶ï¼Œ<code>l</code>è¡¨ç¤ºè½¯é“¾æ¥ç­‰ï¼Œå®Œæ•´çš„ç±»å‹å¦‚ä¸‹:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">b: block (buffered) special</span><br><span class="line"></span><br><span class="line">c: character (unbuffered) special</span><br><span class="line"></span><br><span class="line">d: directory</span><br><span class="line"></span><br><span class="line">p: named pipe (FIFO)</span><br><span class="line"></span><br><span class="line">f: regular file</span><br><span class="line"></span><br><span class="line">l: symbolic link; this is never true if the -L option</span><br><span class="line"> : or the -follow option is in effect, unless the</span><br><span class="line"> : symbolic link is broken.  If you want to search for</span><br><span class="line"> : symbolic links when -L is in effect, use -xtype.</span><br><span class="line"></span><br><span class="line">s: socket</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ä¸‹é¢çš„å‘½ä»¤åªä¼šåˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -<span class="built_in">type</span> f</span><br></pre></td></tr></table></figure><p><code>-size</code>ç”¨æ¥è¿›è¡Œæ–‡ä»¶å’Œç›®å½•çš„å¤§å°åˆ¤æ–­ï¼Œä¾‹å¦‚<code>-size 6c</code>è¡¨ç¤ºå¤§å°ç­‰äº6å­—èŠ‚ï¼Œ<code>-size -6c</code>è¡¨ç¤ºå°äº6å­—èŠ‚ï¼Œ<code>-size +6c</code>è¡¨ç¤ºå¤§äº6å­—èŠ‚ï¼Œå¤§å°å•ä½åŒ…æ‹¬ï¼šcï¼šå­—èŠ‚ï¼Œw:åŒå­—èŠ‚ï¼Œk:1024å­—èŠ‚ï¼ŒMï¼š1024<em>1024å­—èŠ‚ï¼ŒGï¼š1024</em>1024*1024å­—èŠ‚ï¼Œä¸åŠ å•ä½çš„è¯ï¼Œç­‰äºb:512å­—èŠ‚:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯»æ‰¾å½“å‰ç›®å½•ä¸‹å¤§å°ä¸º0çš„æ–‡ä»¶æˆ–ç›®å½•</span></span><br><span class="line">find . -size 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯»æ‰¾å½“å‰ç›®å½•ä¸‹å°äº512å­—èŠ‚çš„æ–‡ä»¶æˆ–ç›®å½•</span></span><br><span class="line">find . -size -1</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯»æ‰¾å½“å‰ç›®å½•ä¸‹å¤§äº1å­—èŠ‚çš„æ–‡ä»¶æˆ–ç›®å½•</span></span><br><span class="line">find . -size +1c</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯»æ‰¾å½“å‰ç›®å½•ä¸‹å¤§äº1Mçš„æ–‡ä»¶æˆ–ç›®å½•</span></span><br><span class="line">find . -size +1M</span><br></pre></td></tr></table></figure><p>æœ‰äº†è¿™ä¸ªé€‰é¡¹ï¼Œå°±èƒ½å¾ˆå®¹æ˜“åœ°è¿‡æ»¤å‡ºå½“å‰ç›®å½•ä¸‹çš„ç©ºæ–‡ä»¶äº†:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -<span class="built_in">type</span> f -size 0</span><br></pre></td></tr></table></figure><p>å¦ä¸€ä¸ªé€‰é¡¹æ˜¯<code>-delete</code>ï¼Œå®ƒçš„ä½œç”¨æ˜¯ç›´æ¥åˆ é™¤æ‰¾åˆ°çš„æ–‡ä»¶ã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªé€‰é¡¹æ˜¯<code>-print</code>ï¼Œå³æ‰“å°åŒ¹é…çš„æ–‡ä»¶è·¯å¾„åˆ°æ ‡å‡†è¾“å‡ºã€‚</p><p>ç»“åˆè¿™å‡ ä¸ªé€‰é¡¹ï¼Œæˆ‘ä»¬å°±èƒ½åˆ é™¤å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ç©ºæ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨åˆ é™¤æ—¶æ‰“å°æ–‡ä»¶åï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -<span class="built_in">type</span> f -size 0 -<span class="built_in">print</span> -delete</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨æŸä¸ªç›®å½•ä¸‹æœ‰å¾ˆå¤šä»£ç åˆ›å»ºçš„ç©ºæ–‡ä»¶ï¼Œåˆ†å¸ƒåœ¨ä¸åŒå±‚çº§çš„å­ç›®å½•ä¸­ï¼Œæˆ‘ä»¬æœ‰æ²¡æœ‰åŠæ³•å¯ä»¥å¿«é€Ÿåœ°å…¨éƒ¨æŠŠå®ƒä»¬åˆ æ‰å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://man7.org/linux/man-pages/man1/find.1.html&quot;&gt;find&lt;/a&gt;æ˜¯Linuxç³»ç»Ÿä¸­çš„ä¸€ä¸ªå¼ºå¤§çš„å‘½ä»¤ï¼Œé€šè¿‡å®ƒæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°ç©ºæ–‡ä»¶ï¼Œç„¶åå°†å®ƒä»¬è¿›è¡Œåˆ é™¤ã€‚&lt;/p&gt;
&lt;p&gt;TL;DR&lt;br&gt;æœ€ç»ˆå‘½ä»¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;find . -&lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; f -size 0 -&lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt; -delete&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;å‡ ä¸ªå‚æ•°è¯¦ç»†çš„è¯´æ˜è§ä¸‹ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="æ€»ç»“" scheme="http://vra.github.io/tags/%E6%80%BB%E7%BB%93/"/>
    
    <category term="Linux" scheme="http://vra.github.io/tags/Linux/"/>
    
    <category term="find" scheme="http://vra.github.io/tags/find/"/>
    
  </entry>
  
  <entry>
    <title>python å¤šä¸ªwith è¯­å¥ä¸€èµ·ä½¿ç”¨</title>
    <link href="http://vra.github.io/2023/01/20/python-with-statement/"/>
    <id>http://vra.github.io/2023/01/20/python-with-statement/</id>
    <published>2023-01-20T05:37:24.000Z</published>
    <updated>2023-01-20T05:58:36.949Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨è¯»ã€Šæµç•…çš„Pythonã€‹æ—¶ï¼Œå¶ç„¶çœ‹åˆ°ä¸‹é¢çš„è¯­å¥ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> urlopen(URL) <span class="keyword">as</span> remote, <span class="built_in">open</span>(JSON, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> local:</span><br><span class="line">    local.write(remote.read())</span><br></pre></td></tr></table></figure><p>çªç„¶æ‰å‘ç°ï¼ŒåŸæ¥å¤šä¸ªwithè¯­å¥å¯ä»¥å†™åˆ°ä¸€èµ·!</p><span id="more"></span><p>æˆ‘ä¹‹å‰éƒ½æ˜¯æ¯ä¸ª<code>with</code>ä¸€ä¸ªå±‚çº§ï¼Œåƒä¸‹é¢è¿™æ ·ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;in_file&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;out_file&#x27;</span> <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> of:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">            of.write(line)</span><br><span class="line">            ...</span><br></pre></td></tr></table></figure><p>è¿™æ ·å†™æ¯ä¸ªwithè¯­å¥éœ€è¦ç¼©è¿›ä¸€æ¬¡ï¼Œé˜…è¯»èµ·æ¥é€»è¾‘ä¸è¿ç»­ï¼Œè€Œä¸”å¾ˆå®¹æ˜“è¶…è¿‡æ¯è¡Œçš„å­—ç¬¦é™åˆ¶ï¼Œå¯¼è‡´éœ€è¦æ¢è¡Œç­‰é—®é¢˜ï¼Œä¸æ˜¯å¾ˆæ–¹ä¾¿ã€‚</p><p>ç»è¿‡è¿™ä¸ªå¶ç„¶çš„å‘ç°ï¼Œä»¥åä¸Šé¢çš„ä»£ç å¯ä»¥è¿™æ ·å†™äº†ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;in_file&#x27;</span>) <span class="keyword">as</span> f, <span class="built_in">open</span>(<span class="string">&#x27;out_file&#x27;</span> <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> of:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">        of.write(line)</span><br><span class="line">        ...</span><br></pre></td></tr></table></figure><p>åŒæ—¶çœ‹ <code>with</code> è¯­å¥çš„<a href="https://docs.python.org/3/reference/compound_stmts.html#the-with-statement">å®˜æ–¹æ–‡æ¡£</a>ï¼Œå‘ç°ä»Python 3.10ç‰ˆæœ¬èµ·ï¼Œè¿˜å¯ä»¥ç”¨æ‹¬å·å°†å¤šä¸ªwithè¯­å¥æ‹¬èµ·æ¥:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> (</span><br><span class="line">    <span class="built_in">open</span>(<span class="string">&quot;face_model_choice.txt&quot;</span>) <span class="keyword">as</span> f,</span><br><span class="line">    <span class="built_in">open</span>(<span class="string">&quot;ttt.txt&quot;</span>, <span class="string">&quot;w&quot;</span>) <span class="keyword">as</span> of1,</span><br><span class="line">    <span class="built_in">open</span>(<span class="string">&quot;ttt2.txt&quot;</span>, <span class="string">&quot;w&quot;</span>) <span class="keyword">as</span> of2,</span><br><span class="line">):</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">        of1.write(line)</span><br><span class="line">        of2.write(line)</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>è¿™æ ·çœ‹èµ·æ¥ä¹Ÿæ›´ç®€æ´äº†ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨è¯»ã€Šæµç•…çš„Pythonã€‹æ—¶ï¼Œå¶ç„¶çœ‹åˆ°ä¸‹é¢çš„è¯­å¥ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;with&lt;/span&gt; urlopen(URL) &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; remote, &lt;span class=&quot;built_in&quot;&gt;open&lt;/span&gt;(JSON, &lt;span class=&quot;string&quot;&gt;&amp;#x27;wb&amp;#x27;&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; local:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    local.write(remote.read())&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;çªç„¶æ‰å‘ç°ï¼ŒåŸæ¥å¤šä¸ªwithè¯­å¥å¯ä»¥å†™åˆ°ä¸€èµ·!&lt;/p&gt;</summary>
    
    
    
    
    <category term="æ€»ç»“" scheme="http://vra.github.io/tags/%E6%80%BB%E7%BB%93/"/>
    
    <category term="Python" scheme="http://vra.github.io/tags/Python/"/>
    
    <category term="TIL" scheme="http://vra.github.io/tags/TIL/"/>
    
  </entry>
  
  <entry>
    <title>ffmpegæŠ½å–é«˜æ¸…å›¾åƒå¸§</title>
    <link href="http://vra.github.io/2023/01/15/ffmpeg-extract-high-quality-images/"/>
    <id>http://vra.github.io/2023/01/15/ffmpeg-extract-high-quality-images/</id>
    <published>2023-01-15T14:27:33.000Z</published>
    <updated>2023-01-20T05:56:08.274Z</updated>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨<a href="https://ffmpeg.org/">ffmpeg</a>å¯ä»¥æ–¹ä¾¿åœ°ä»è§†é¢‘ä¸­æŠ½å–å›¾åƒå¸§ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i /path/to/video.mp4 image-folder/%06d.jpg</span><br></pre></td></tr></table></figure><p>ä½†å®é™…æµ‹è¯•å‘ç°ï¼ŒæŠ½å–çš„å›¾åƒå¸§æ¯”è¾ƒæ¨¡ç³Šï¼Œæœ‰æ˜æ˜¾çš„å—æ•ˆåº”ã€‚</p><p>æœç´¢æ—¶æœ‰äººè¯´å¯ä»¥åŠ <code>-q:v 1 -qmin 1 -qmax 1</code>æ¥æé«˜å›¾åƒè´¨é‡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i /path/to/video.mp4 -q:v 1 -qmin 1 -qmax 1 image-folder/%06d.jpg</span><br></pre></td></tr></table></figure><p>æµ‹è¯•å‘ç°ç¡®å®æœ‰ä¸€äº›æå‡ï¼Œä½†è¿˜æ˜¯èƒ½çœ‹åˆ°æ˜æ˜¾çš„æ¨¡ç³Šã€‚</p><p>æœ€åå‘ç°ï¼ŒæŠŠæŠ½å–çš„å›¾åƒæ ¼å¼ä»<code>.jpg</code>ä¿®æ”¹ä¸º<code>.png</code>ï¼Œç»“æœå°±æ˜¯é«˜æ¸…ä¸”æ— å—æ•ˆåº”çš„äº†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i /path/to/video.mp4 image-folder/%06d.png</span><br></pre></td></tr></table></figure><p>å¦å¤–PNGæ ¼å¼çš„å›¾åƒå­˜å‚¨å¤§å°è¦å¤§ä¸€äº›ï¼Œä½†ä¸ä¼šå¤ªå¤§ï¼Œè¿˜æ˜¯èƒ½æ¥å—çš„ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä½¿ç”¨&lt;a href=&quot;https://ffmpeg.org/&quot;&gt;ffmpeg&lt;/a&gt;å¯ä»¥æ–¹ä¾¿åœ°ä»è§†é¢‘ä¸­æŠ½å–å›¾åƒå¸§ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span cla</summary>
      
    
    
    
    
    <category term="å›¾åƒ" scheme="http://vra.github.io/tags/%E5%9B%BE%E5%83%8F/"/>
    
    <category term="ffmpeg" scheme="http://vra.github.io/tags/ffmpeg/"/>
    
  </entry>
  
  <entry>
    <title>åŸæ¥ git stash åº”è¯¥è¿™ä¹ˆç”¨</title>
    <link href="http://vra.github.io/2023/01/15/git-stash/"/>
    <id>http://vra.github.io/2023/01/15/git-stash/</id>
    <published>2023-01-15T05:19:57.000Z</published>
    <updated>2023-01-20T06:19:01.470Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>å‰æ®µæ—¶é—´çªç„¶å‘ç°ï¼Œæˆ‘ä¹‹å‰å¯¹<code>git stash</code>çš„ä½¿ç”¨éƒ½æ˜¯é”™è¯¯çš„ã€‚</p><p>å…·ä½“è¯´æ¥ï¼Œæˆ‘æ˜¯è¿™ä¹ˆä½¿ç”¨çš„ï¼šåœ¨è¿œç«¯æœ‰æ–°çš„æäº¤ï¼Œéœ€è¦<code>git pull</code>æ¥æ‹‰å–åˆå¹¶æ—¶ï¼Œå‘ç°æœ¬åœ°æœ‰ä¸€äº›æœªæäº¤çš„ä¿®æ”¹ï¼ŒåŠŸèƒ½ä¹Ÿæ²¡å®ç°ï¼Œä¸é€‚åˆåšä¸€æ¬¡commitã€‚è¿™æ—¶å€™æˆ‘æ‰§è¡Œ<code>git stash</code>éšè—æœ¬åœ°çš„ä¿®æ”¹ï¼Œç„¶åæ‰§è¡Œ<code>git pull</code>æ¥æ‹‰å–è¿œç«¯çš„æ›´æ–°ï¼Œåœ¨æœ€æ–°ä»£ç åŸºç¡€ä¸Š<strong>é‡æ–°å®ç°</strong>stashçš„é‚£äº›ä»£ç ä¸­çš„åŠŸèƒ½ã€‚</p><p>è¿™é‡Œçš„é—®é¢˜æ˜¯ï¼Œé‡æ–°å®ç°stashä»£ç ä¸­çš„é‚£ä¸€æ­¥ï¼Œå…¶å®å®Œå…¨å¯ä»¥ç”¨<code>git stash pop</code>æ¥æ›¿ä»£ï¼Œæ‰§è¡Œè¿™ä¸ªå‘½ä»¤ä¼šåœ¨æœ€æ–°ä»£ç åŸºç¡€ä¸Šä½œç”¨stashçš„ä»£ç ï¼Œä¸ç”¨å†é‡æ–°å®ç°ä¸€éäº†ï¼ˆä¸è¿‡è¿™æ—¶å¯èƒ½ä¼šæœ‰ä»£ç å†²çªéœ€è¦è§£å†³ï¼‰ã€‚æ‰€ä»¥æˆ‘ä¹‹å‰æ˜¯æŠŠ<code>git stash</code>å½“<code>git checkout -- .</code>æ¥ç”¨äº†ï¼Œä¹Ÿå°±æ˜¯æŠ›å¼ƒäº†æœ¬åœ°çš„ä»£ç æ›´æ–°ï¼Œæ˜¾ç„¶æ˜¯æœ‰é—®é¢˜çš„ã€‚</p><p>æ­£ç¡®æµç¨‹åŸºæœ¬ä¸Šæ˜¯è¿™æ ·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git stash <span class="comment"># æˆ–è€… git stash pushï¼Œæ•ˆæœä¸€æ ·</span></span><br><span class="line">git pull <span class="comment"># å¯èƒ½æœ‰å†²çªéœ€è¦æ‰‹åŠ¨åˆå¹¶</span></span><br><span class="line">git stash pop <span class="comment"># å¯èƒ½æœ‰å†²çªéœ€è¦æ‰‹åŠ¨åˆå¹¶</span></span><br></pre></td></tr></table></figure><p>ä¸‹é¢è®°å½•ä¸€ä¸‹ git stash æä¾›çš„åŠŸèƒ½å’Œä¸€äº›å‚æ•°ã€‚</p><span id="more"></span><h2 id="git-stash-å…·ä½“ç”¨æ³•"><a href="#git-stash-å…·ä½“ç”¨æ³•" class="headerlink" title="git stash å…·ä½“ç”¨æ³•"></a>git stash å…·ä½“ç”¨æ³•</h2><p><code>git stash</code>åˆ›å»ºä¸€ä¸ªæ–°çš„stashï¼Œæ•ˆæœä¸<code>git stash push</code> ä¸€æ ·ï¼Œæ•ˆæœå¦‚ä¸‹:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git stash</span><br><span class="line">Saved working directory and index state WIP on master: c6771a5 doc: fix error during pre-commiting</span><br></pre></td></tr></table></figure><p>å¢åŠ <code>-u</code>é€‰é¡¹å¯ä»¥å°†æœªtrackçš„æ–‡ä»¶ä¹Ÿéšè—èµ·æ¥ã€‚</p><p>ä½ å¯ä»¥åˆ›å»ºå¤šä¸ªstashï¼Œæœ€æ—©çš„stashè¡¨ç¤ºä¸º<code>stash@&#123;0&#125;</code>ï¼Œç„¶åæ˜¯<code>stash@&#123;1&#125;</code>ï¼Œä¾æ¬¡é€’åŠ ã€‚</p><p><code>git stash list</code> ä¼šåˆ—å‡ºæ‰€æœ‰çš„stashï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git stash list</span><br><span class="line">stash@&#123;0&#125;: WIP on master: c6771a5 doc: fix error during pre-commiting</span><br><span class="line">stash@&#123;1&#125;: WIP on master: c6771a5 doc: fix error during pre-commiting</span><br></pre></td></tr></table></figure><p><code>git stash show</code>å¯ä»¥æŸ¥çœ‹æœ€æ–°stashä¸­çš„ä¿®æ”¹ï¼ŒåŠ ä¸Šç¼–å·å¯ä»¥æŸ¥çœ‹ä¹‹å‰ç‰ˆæœ¬çš„ä¿®æ”¹ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git stash show stash@&#123;0&#125;</span><br><span class="line">version.txt | 1 +</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br></pre></td></tr></table></figure><p><code>git stash apply</code> å¯ä»¥åº”ç”¨æœ€æ–°çš„stashåˆ°å½“å‰çš„ä»£ç ä¸­ï¼ŒåŒæ ·çš„ï¼Œå¦‚æœåŠ ä¸Šç¼–å·åˆ™å¯ä»¥åº”ç”¨ä¹‹å‰ç‰ˆæœ¬çš„ä¿®æ”¹åˆ°å½“å‰ä»£ç ã€‚applyæ‰§è¡Œåè®°å¾—è°ƒç”¨<code>git stash drop</code> æ¥å»é™¤ä»¥åŠåº”ç”¨çš„stashã€‚<br><code>git stash pop</code>æ•ˆæœç­‰äº<code>git stash apply</code> + <code>git stash drop</code>ã€‚</p><p><code>git stash branch</code>ä¼šåŸºäºè€çš„æäº¤ä»£ç åˆ›å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒåŒæ—¶æŠŠæœ€æ–°çš„ä¿®æ”¹ä¹Ÿä½œç”¨è¿‡å»ï¼Œè¿™æ ·å¯¹äºæ–°çš„æäº¤å’Œè€æäº¤ä»£ç å˜åŒ–å¾ˆå¤§çš„åœºæ™¯æ¯”è¾ƒå¥½ï¼Œé¿å…åœ¨æ–°çš„æäº¤ä¸Šapply stashæ—¶ç”±äºå†²çªå¤ªå¤šé€ æˆçš„åˆå¹¶é—®é¢˜ã€‚</p><p><code>git stash clean</code> ä¼šæ¸…ç©ºæ‰€æœ‰çš„stashï¼Œ<strong>ä¸”æ²¡æœ‰ä»»ä½•æç¤º</strong>ï¼Œè¿™æ„å‘³ç€ä½ æ‰€æœ‰éšè—çš„ä»£ç éƒ½ä¼šè¢«åˆ é™¤ï¼Œæ‰§è¡Œæ­¤å‘½ä»¤å‰è¯·ä¸‰æ€ï¼</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;æ¦‚è¿°&quot;&gt;&lt;/a&gt;æ¦‚è¿°&lt;/h2&gt;&lt;p&gt;å‰æ®µæ—¶é—´çªç„¶å‘ç°ï¼Œæˆ‘ä¹‹å‰å¯¹&lt;code&gt;git stash&lt;/code&gt;çš„ä½¿ç”¨éƒ½æ˜¯é”™è¯¯çš„ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“è¯´æ¥ï¼Œæˆ‘æ˜¯è¿™ä¹ˆä½¿ç”¨çš„ï¼šåœ¨è¿œç«¯æœ‰æ–°çš„æäº¤ï¼Œéœ€è¦&lt;code&gt;git pull&lt;/code&gt;æ¥æ‹‰å–åˆå¹¶æ—¶ï¼Œå‘ç°æœ¬åœ°æœ‰ä¸€äº›æœªæäº¤çš„ä¿®æ”¹ï¼ŒåŠŸèƒ½ä¹Ÿæ²¡å®ç°ï¼Œä¸é€‚åˆåšä¸€æ¬¡commitã€‚è¿™æ—¶å€™æˆ‘æ‰§è¡Œ&lt;code&gt;git stash&lt;/code&gt;éšè—æœ¬åœ°çš„ä¿®æ”¹ï¼Œç„¶åæ‰§è¡Œ&lt;code&gt;git pull&lt;/code&gt;æ¥æ‹‰å–è¿œç«¯çš„æ›´æ–°ï¼Œåœ¨æœ€æ–°ä»£ç åŸºç¡€ä¸Š&lt;strong&gt;é‡æ–°å®ç°&lt;/strong&gt;stashçš„é‚£äº›ä»£ç ä¸­çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œçš„é—®é¢˜æ˜¯ï¼Œé‡æ–°å®ç°stashä»£ç ä¸­çš„é‚£ä¸€æ­¥ï¼Œå…¶å®å®Œå…¨å¯ä»¥ç”¨&lt;code&gt;git stash pop&lt;/code&gt;æ¥æ›¿ä»£ï¼Œæ‰§è¡Œè¿™ä¸ªå‘½ä»¤ä¼šåœ¨æœ€æ–°ä»£ç åŸºç¡€ä¸Šä½œç”¨stashçš„ä»£ç ï¼Œä¸ç”¨å†é‡æ–°å®ç°ä¸€éäº†ï¼ˆä¸è¿‡è¿™æ—¶å¯èƒ½ä¼šæœ‰ä»£ç å†²çªéœ€è¦è§£å†³ï¼‰ã€‚æ‰€ä»¥æˆ‘ä¹‹å‰æ˜¯æŠŠ&lt;code&gt;git stash&lt;/code&gt;å½“&lt;code&gt;git checkout -- .&lt;/code&gt;æ¥ç”¨äº†ï¼Œä¹Ÿå°±æ˜¯æŠ›å¼ƒäº†æœ¬åœ°çš„ä»£ç æ›´æ–°ï¼Œæ˜¾ç„¶æ˜¯æœ‰é—®é¢˜çš„ã€‚&lt;/p&gt;
&lt;p&gt;æ­£ç¡®æµç¨‹åŸºæœ¬ä¸Šæ˜¯è¿™æ ·ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git stash &lt;span class=&quot;comment&quot;&gt;# æˆ–è€… git stash pushï¼Œæ•ˆæœä¸€æ ·&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git pull &lt;span class=&quot;comment&quot;&gt;# å¯èƒ½æœ‰å†²çªéœ€è¦æ‰‹åŠ¨åˆå¹¶&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git stash pop &lt;span class=&quot;comment&quot;&gt;# å¯èƒ½æœ‰å†²çªéœ€è¦æ‰‹åŠ¨åˆå¹¶&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸‹é¢è®°å½•ä¸€ä¸‹ git stash æä¾›çš„åŠŸèƒ½å’Œä¸€äº›å‚æ•°ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="æ€»ç»“" scheme="http://vra.github.io/tags/%E6%80%BB%E7%BB%93/"/>
    
    <category term="Linux" scheme="http://vra.github.io/tags/Linux/"/>
    
    <category term="Git" scheme="http://vra.github.io/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>2022å¹´ç»ˆæ€»ç»“</title>
    <link href="http://vra.github.io/2022/12/31/summary-2022/"/>
    <id>http://vra.github.io/2022/12/31/summary-2022/</id>
    <published>2022-12-31T03:09:39.000Z</published>
    <updated>2023-01-02T16:59:23.374Z</updated>
    
    <content type="html"><![CDATA[<p>å¤šå¹´ä»¥åï¼Œæƒ³èµ·2022ï¼Œæˆ‘ä¼šå›å¿†èµ·å“ªä¸ªç”»é¢ï¼Ÿä¸ºäº†è§£ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å›æƒ³è¿‡å»çš„è¿™äº›å¹´ä»½ï¼Œ2021ï¼Œ2020ï¼Œâ€¦â€¦2005ï¼Œçœ‹èƒ½æƒ³åˆ°ä»€ä¹ˆã€‚é™¤äº†æœ‰äº›å¹´ä»½é‡Œï¼Œæˆ‘ç»“å©šï¼Œæ¯•ä¸šï¼Œæ‰€ä»¥æœ‰è®°å¿†æ·±åˆ»çš„äº‹ä»¶ï¼Œå¤§éƒ¨åˆ†å¹´ä»½æˆ‘ç”šè‡³æƒ³ä¸èµ·ä»»ä½•äº‹æƒ…ã€‚å¯¹äºä¸€ä¸ªæ¨¡ç³Šçš„æ•°å­—ï¼Œåœ¨å¤šå¹´ä»¥åï¼Œæˆ‘ä»¬ç¡®å®éš¾ä»¥å°†å®ƒå’Œè‡ªå·±ä¸€å¤©å¤©åº¦è¿‡çš„æ—¥å¸¸äº‹æƒ…å…³è”èµ·æ¥ã€‚è™½ç„¶2022å¹´å‘ç”Ÿäº†å¾ˆå¤šäº‹æƒ…ï¼Œä½†å¤§éƒ¨åˆ†è¿˜æ˜¯ä¼šè¢«é—å¿˜ï¼Œä½†æˆ‘è¿˜æ˜¯å°½é‡æƒ³ç”¨è¯¦ç»†çš„æ–‡å­—è®°å½•ä¸‹æ¥ï¼Œè¿™æ ·å½“ä»¥åæƒ³ä¼šçœ‹é‚£å¹´æˆ‘èº«ä¸Šå‘ç”Ÿäº†ä»€ä¹ˆçš„æ—¶å€™ï¼Œæˆ‘çŸ¥é“åªè¦åœ¨æµè§ˆå™¨é‡Œé¢è¾“å…¥<code>vra.github.io/2022/12/31/summary-2022</code>ï¼Œè¿™äº›æ—¶åˆ»éƒ½ä¼šæ¸…æ™°åœ°æµ®ç°åœ¨æˆ‘çœ¼å‰ã€‚</p><span id="more"></span><h2 id="ä»Šå¹´åšäº†ä»€ä¹ˆ"><a href="#ä»Šå¹´åšäº†ä»€ä¹ˆ" class="headerlink" title="ä»Šå¹´åšäº†ä»€ä¹ˆ"></a>ä»Šå¹´åšäº†ä»€ä¹ˆ</h2><p>ä»Šå¹´åœ¨æ¯”èµ›å’Œè®ºæ–‡ä¸Šï¼Œå’Œäº­æ«å‚åŠ äº†ä¸€ä¸ªDLGCå­¦æœ¯æ¯”èµ›ï¼Œæ‹¿åˆ°äº†ç¬¬ä¸€åï¼Œä¹Ÿå‘è¡¨äº†ä¸€ç¯‡å¯¹åº”çš„Workshopè®ºæ–‡ã€‚å»å¹´åˆä½œæŠ•ç¨¿çš„è®ºæ–‡ä»Šå¹´è¾—è½¬æŠ•ç¨¿äº†å‡ æ¬¡ï¼Œæœ€åæŠ•äº†æœŸåˆŠã€‚ä»Šå¹´ç»„å†…è¿˜ä¸¾åŠäº†ä¸€åœºECCVå­¦æœ¯æ¯”èµ›ï¼Œæˆ‘ä½œä¸ºä¸€ä¸ªèµ›é“çš„è´Ÿè´£äººï¼Œåœ¨åˆä½œæ–¹çš„æ”¯æŒä¸‹ï¼Œæ„å»ºäº†è®­ç»ƒå’Œæµ‹è¯•æ•°æ®ï¼Œæä¾›äº†Baselineï¼Œæ­å»ºäº†æµ‹è¯„æœåŠ¡ï¼Œå†™ä»‹ç»æ–‡ç« ï¼Œæ‹›å‹Ÿé€‰æ‰‹ï¼Œåœ¨Slackä¸Šå’Œåˆä½œçš„è€å¸ˆè‹±æ–‡æ²Ÿé€šï¼Œæˆé•¿äº†æŒºå¤šçš„ã€‚</p><p>åˆ°æ–°å›¢é˜Ÿåï¼Œåœ¨å¤©çŒ«Appä¸Šçº¿äº†ä¸€äº›åˆ›æ–°ç®—æ³•é©±åŠ¨çš„çš„åŠŸèƒ½ï¼Œä¹Ÿç®—æ˜¯åœ¨äº¿çº§ç”¨æˆ·çš„Appä¸Šå¼€å‘è¿‡äº§å“äº†ã€‚</p><p>åœ¨æŠ€æœ¯æ€»ç»“ä¸Šï¼Œä»Šå¹´æ€»å…±æ›´æ–°äº†å…±36ç¯‡æŠ€æœ¯åšå®¢ï¼Œç›¸æ¯”ä¹‹å‰å‡ å¹´è¿›æ­¥å·¨å¤§ã€‚è™½ç„¶æ²¡æœ‰å¤ªå¤šæœ‰äº®ç‚¹çš„æ–‡ç« ï¼Œä½†æ€»ç®—æ˜¯å¼€å§‹å½¢æˆæ¯”è¾ƒå¥½çš„æ›´æ–°ä¹ æƒ¯äº†ã€‚åœ¨å¤§æ¦‚10æœˆçš„ç”Ÿæ´»ï¼Œå‘ç°äº†ç¨‹åºå‘˜å¤§ç¥ Simon Willisonçš„<a href="https://simonwillison.net/">åšå®¢</a>ï¼Œæ”¶è·å¾ˆå¤šã€‚è®©æˆ‘æ”¶ç›Šçš„æ˜¯ä»–çš„TIL (Tody I Learned) æ¿å—ï¼Œå°±æ˜¯è®°å½•æ¯å¤©å­¦ä¹ åˆ°çš„æŠ€æœ¯ï¼Œå¼€å§‹è®°å½•ï¼Œç„¶åæ…¢æ…¢åœ°æé«˜ã€‚åŸºäºè¿™ä¸ªæ€è·¯ï¼Œä»Šå¹´å†™äº†è®¸å¤šå­¦ä¹ åˆ°çš„ç®€å•ä½†æœ‰ç”¨çš„å‘½ä»¤å’Œæ“ä½œï¼Œå¸Œæœ›ä»¥ååšæŒä¸‹å»ã€‚</p><h2 id="ä»Šå¹´çš„é—æ†¾"><a href="#ä»Šå¹´çš„é—æ†¾" class="headerlink" title="ä»Šå¹´çš„é—æ†¾"></a>ä»Šå¹´çš„é—æ†¾</h2><p>2022å¹´ä¹Ÿæ˜¯ä¸€ä¸ªå……æ»¡é—æ†¾çš„ä¸€å¹´ã€‚æ˜¥å¤©æ™‹å‡å¤±è´¥ï¼Œè™½ç„¶èº«å¤„å…¶ä¸­ï¼Œä½†é¢å¯¹å¤±è´¥çš„é‚£ç§éš¾å—æ„Ÿè§‰ï¼Œç›¸ä¿¡ä½ èƒ½æ‡‚ã€‚ç„¶åå°±æ˜¯ç»„ç»‡è°ƒæ•´ï¼ŒçŒä¸åŠé˜²é—´ï¼Œå¾ˆå¤šå°ä¼™ä¼´ç¦»å¼€äº†å›¢é˜Ÿï¼Œäººå¿ƒæƒ¶æƒ¶ã€‚åœ¨å…¬å¸çš„ä¸€é“é€šçŸ¥å‰ï¼Œæˆ‘ä»¬æ‰“å·¥è€…åªæœ‰é»˜é»˜æ¥å—ã€‚ç„¶åæ¢åˆ°æ–°çš„ç»„ï¼Œåšæ–°çš„äº‹æƒ…ï¼Œæ‰€å¹¸åšçš„ä¸œè¥¿å·®åˆ«ä¸å¤§ï¼Œèƒ½å¤Ÿæ¯”è¾ƒå¿«çš„é€‚åº”ã€‚</p><p>åœ¨å›æœ›å·¥ä½œè¿™äº”å¹´ï¼Œå‘ç°å·¥ä½œä¸­ï¼Œè™½ç„¶äº‹æƒ…å‹‰å¼ºèƒ½åšå¥½ï¼Œä½†è¿˜è¿œæ²¡åšåˆ°è®©è‡ªå·±æ»¡æ„ã€‚æ²¡æœ‰å‘è¡¨ä»€ä¹ˆå¥½çš„è®ºæ–‡ï¼Œæ¨¡å‹æ•ˆæœå·®å¼ºäººæ„ï¼Œåšçš„é¡¹ç›®ä¹Ÿå¹³å¹³åº¸åº¸ã€‚</p><p>è™½ç„¶ä¸æƒ³æ‰¿è®¤ï¼Œä½†åœ¨å³å°†åˆ°æ¥çš„2023å¹´ï¼Œæˆ‘è¦æ»¡30å‘¨å²äº†ã€‚åœ¨èƒ½çœ‹åˆ°è‡ªèº«çš„å„ç§é—®é¢˜ï¼Œå´æ²¡æœ‰å¥½çš„è§£å†³æ–¹æ³•çš„æ—¶å€™ï¼Œæˆ‘çŸ¥é“æˆ‘é‡åˆ°èŒä¸šç”Ÿæ¶¯çš„å±æœºäº†ã€‚é‚£ä¹ˆæˆ‘è‡ªå·±çš„æ ¸å¿ƒé—®é¢˜å‡ºåœ¨å“ªé‡Œï¼Ÿæ ¸å¿ƒçŸ›ç›¾æ˜¯ï¼šé•¿æœŸçš„ç›®æ ‡ä¸çŸ­æœŸçš„è¡ŒåŠ¨ä¹‹é—´æ²¡æœ‰åŒ¹é…ã€‚é•¿æœŸçš„ç›®æ ‡æ˜¯æ˜ç¡®çš„ï¼Œä½†å½“ç›®æ ‡è¢«åˆ†è§£åˆ°æ—¥å¸¸çš„å·¥ä½œä¸­æ—¶ï¼Œå¾ˆå¤šæ ¸å¿ƒé—®é¢˜æ²¡æœ‰è¢«è§£å†³ï¼Œè€Œæ˜¯å…¶ä»–ç´§æ€¥ä¸”å¿…é¡»ä½†é•¿è¿œæ¥çœ‹ä¸æ ¸å¿ƒçš„ä»»åŠ¡å ç”¨äº†ç»å¤§éƒ¨åˆ†çš„æ—¶é—´ï¼Œå¯¼è‡´åœ¨ä¸å ç”¨å®¶åº­å’Œä¸ªäººç”Ÿæ´»æ—¶é—´çš„æƒ…å†µä¸‹ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„æ—¶é—´æ¥åšæ ¸å¿ƒçš„å·¥ä½œã€‚</p><p>æ­£å¦‚å¤§è€æ¿è®²è¿‡çš„ï¼Œé€šè¿‡æ¢ç¯å¢ƒã€æ¢èµ›é“æ¥è§£å†³è‡ªå·±é‡åˆ°é—®é¢˜çš„æƒ³æ³•ï¼Œæ˜¯ä¸åˆ‡å®é™…çš„ã€‚æ ¹æœ¬é—®é¢˜ä¸è§£å†³ï¼Œåœ¨æ–°çš„èµ›é“ï¼Œæ–°çš„ç¯å¢ƒï¼Œå°±ç®—åˆšå¼€å§‹åšçš„å¾ˆé¡ºåˆ©ï¼Œåœ¨åé¢è¿˜æ˜¯ä¼šé‡åˆ°åŒæ ·çš„é—®é¢˜ï¼Œä¼šè¸©åŒæ ·çš„å‘ã€‚</p><p>2023å¹´ï¼Œå¸Œæœ›å¤šä¸€äº›æ¸…é†’çš„æ€è€ƒï¼Œå°‘ä¸€äº›æ¯å¤©åªå¿™ç€åšæ‰‹å¤´äº‹æƒ…çš„æ··æ²Œæ—¶åˆ»ã€‚</p><h2 id="å…³äºæŠ€æœ¯ç¤¾åŒº"><a href="#å…³äºæŠ€æœ¯ç¤¾åŒº" class="headerlink" title="å…³äºæŠ€æœ¯ç¤¾åŒº"></a>å…³äºæŠ€æœ¯ç¤¾åŒº</h2><p>ä»Šå¹´æ¥è§¦äº†Lobste.rsç¤¾åŒºï¼Œå‘ç°é‡Œé¢å¾ˆå¤šç¼–ç¨‹å¤§ä½¬å’Œå¾ˆå¤šé«˜è´¨é‡æ–‡ç« ï¼Œé«˜è´¨é‡è®¨è®ºã€‚è€Œä¸”æ›´ä¸ºéš¾å¾—çš„æ˜¯ï¼Œç¤¾åŒºæ°›å›´å¾ˆå¥½ï¼Œæ¯ä¸ªè®¨è®ºéƒ½æ˜¯éå¸¸ç†æ€§ï¼Œå°±äº‹è®ºäº‹ï¼Œè®©äººä¸ç¦æƒ³ï¼Œå›½å†…èƒ½å¦æœ‰è¿™æ ·çš„çº¯ç²¹çš„æŠ€æœ¯ç¤¾åŒºï¼Œå­¦ä¹ ï¼Œè®¨è®ºï¼Œç ”å‘æœ€æ–°çš„æŠ€æœ¯ã€‚ä½œä¸ºå°è¯•çš„ä¸€å°æ­¥ï¼Œæˆ‘ç”¨ä¸€ä¸ªgitä»“åº“è®°å½•äº†æ¯å‘¨æˆ‘é˜…è¯»çš„æŠ€æœ¯æ–‡ç« ï¼Œè‡³äºæ€ä¹ˆè¿›ä¸€æ­¥å¢åŠ è®¨è®ºï¼Œè¿˜æ²¡æœ‰æ¯”è¾ƒå¥½çš„æ€è·¯ã€‚</p><p>2023-01-03æ›´æ–°ï¼šåœ¨v2exä¸Šçœ‹åˆ°äº†å›½å†…çš„Lobste.rsç¤¾åŒº<a href="https://dto.pipecraft.net/">DTO</a>ï¼Œæ¬¢è¿åœ¨<a href="https://www.v2ex.com/t/905509">è¿™é‡Œ</a>æˆ–<a href="https://github.com/dev-topics-only/lobsters/issues/1">è¿™é‡Œ</a>å‘å¸–ç”³è¯·åŠ å…¥ï¼Œä¸ºæé«˜å›½å†…çš„æŠ€æœ¯æ°›å›´åšä¸€ä»½è´¡çŒ®!</p><h2 id="å…³äºAIå’ŒchatGPT"><a href="#å…³äºAIå’ŒchatGPT" class="headerlink" title="å…³äºAIå’ŒchatGPT"></a>å…³äºAIå’ŒchatGPT</h2><p>å»å¹´ä½“éªŒäº†ä¸€ä¸‹Copilotï¼Œå½“æ—¶çš„éœ‡æ’¼ç°åœ¨è¿˜æœ‰å°è±¡ï¼Œä½“éªŒå®Œåï¼Œæˆ‘ä¸ç¦æƒ³ï¼šç›¸æ¯”Copilotï¼Œæˆ‘ä»¬çœŸäººçš„ä¼˜åŠ¿åœ¨å“ªé‡Œï¼Œè¯¥å¦‚ä½•ä¸å®ƒå…±å­˜ï¼Ÿæˆ‘æ²¡ç­”æ¡ˆã€‚<br>ä»Šå¹´çš„chatGPTçš„çˆ†ç«ï¼Œè¿›ä¸€æ­¥åœ°è®©æˆ‘çœ‹åˆ°AIå·¥å…·å¯¹æˆ‘ä»¬å¼€å‘è€…çš„å·¨å¤§å½±å“ã€‚ç»è¿‡æ€è€ƒï¼Œæˆ‘è®¤ä¸ºè¿™äº›AIå·¥å…·å¯èƒ½ä¼šæ›¿ä»£æˆ‘ä»¬ç¨‹åºå‘˜çš„æŸäº›å·¥ä½œï¼Œä½†ä¸ä¼šæ›¿ä»£ç¨‹åºå‘˜è¿™ä¸ªè¡Œä¸šï¼Œåªæ˜¯ä¼šæ˜æ˜¾åœ°æ”¹å˜ç¨‹åºå‘˜çš„ç¼–ç¨‹è¡Œä¸ºï¼Œè€Œä¸”åˆ©ç”¨å¥½è¿™äº›å·¥å…·ï¼Œä¼šæ˜¯ç¨‹åºå‘˜çš„å¿…ä¿®è¯¾ã€‚</p><p>ä»ç ”ç©¶è€…çš„è§’åº¦ï¼ŒchatGPTå·²ç»å¯ä»¥å¾ˆå¥½åœ°ç†è§£å¤§éƒ¨åˆ†äººç±»è¯­è¨€ï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºNLPç ”ç©¶å·²ç»åˆ°äº†ä¸€ä¸ªé‡Œç¨‹ç¢‘çš„é˜¶æ®µï¼ŒçœŸæ­£æ™ºèƒ½çš„AIè¯­éŸ³åŠ©æ‰‹ä¸è¿œäº†ï¼Œæœªæ¥å‡ å¹´ä¹Ÿä¼šæœ‰æ›´å¤šçœŸæ­£çš„è¯­éŸ³åŠ©æ‰‹è¿›å…¥æ™®é€šäººçš„ç”Ÿæ´»ä¸­ã€‚</p><p>æœ‰ç‚¹æ„Ÿæ…¨ï¼Œæœ‰æ—¶å€™æŠ€æœ¯çš„å‘å±•å¾ˆæ…¢ï¼Œè®©äººçœ‹ä¸åˆ°å¸Œæœ›ï¼Œä½†æœ‰æ—¶å€™ï¼ŒæŠ€æœ¯åˆå‘å±•çš„å¤ªå¿«ï¼Œè®©äººè·Ÿä¸ä¸Šè„šæ­¥ã€‚ä½œä¸ºä¸€ä¸ªæ™®é€šäººæŠ€æœ¯äººï¼Œè¿˜æ˜¯è¦æ„Ÿè°¢é‚£äº›é¡¶å°–çš„ç ”ç©¶è€…ï¼Œè®©æˆ‘ä»¬åœ¨æœ‰ç”Ÿä¹‹å¹´èƒ½çœ‹åˆ°å¦‚æ­¤æ¿€åŠ¨äººå¿ƒçš„æŠ€æœ¯è¿›æ­¥ã€‚</p><h2 id="å…³äºç”Ÿæ´»"><a href="#å…³äºç”Ÿæ´»" class="headerlink" title="å…³äºç”Ÿæ´»"></a>å…³äºç”Ÿæ´»</h2><p>è¯´å®ŒæŠ€æœ¯ï¼Œè°ˆè°ˆç”Ÿæ´»å§ã€‚ä»Šå¹´6æœˆä»½æ¬äº†ä¸€æ¬¡å®¶ï¼Œä»å…¬å¸é™„è¿‘æ¬åˆ°äº†è€å©†ä¸Šç­çš„å¹¼å„¿å›­é™„è¿‘ï¼Œå¼€å§‹ååœ°é“ä¸Šä¸‹ç­ã€‚<br>åœ¨åœ°é“ä¸Šï¼Œè¦ä¹ˆåˆ·æŠ€æœ¯ç½‘ç«™ï¼Œè¦ä¹ˆåˆ·gifå’Œæç¬‘ç½‘ç«™ã€‚åœ¨åœ°é“19å·çº¿å¼€é€šåï¼Œå•ç¨‹æ—¶é—´ç¼©çŸ­åˆ°ä¸€ä¸ªå°æ—¶å†…ï¼Œæ—…ç¨‹æ²¡é‚£ä¹ˆæ¼«é•¿ï¼Œç«™ç€ä¹Ÿæ²¡é‚£ä¹ˆç´¯äº†ã€‚</p><p>å› ä¸ºç–«æƒ…å°æ§ï¼Œå¹³æ—¶æ²¡æ€ä¹ˆå‡ºå»ï¼Œå‘¨æœ«åŸºæœ¬èººå®¶é‡Œï¼Œå¶å°”å‘¨æœ«ä¸€ä¸ªäººå»çˆ¬å±±ï¼Œé€›åšç‰©é¦†ã€‚æœ‰æ—¶å€™å’Œè€å©†ä¸€èµ·å‡ºå»èµ°èµ°ï¼Œæœ‰æ—¶å€™æœ‰åŒå­¦æ¥æ­å·æ¥èšèšï¼Œå¤§éƒ¨åˆ†æ—¶å€™ï¼Œååœ°é“ï¼Œä¸Šç­ï¼Œååœ°é“ï¼Œä»çƒ­çš„è’¸å‘çš„å…­æœˆåˆ°æœ‰äº›å¯’å†·çš„è…Šæœˆã€‚</p><p>å°è±¡æœ€æ·±åˆ»çš„æ˜¯å¤å¤©ä»åœ°é“ç«™åˆ°å…¬å¸çš„é‚£æ®µè·¯ã€‚é‚£æ—¶å€™19å·çº¿è¿˜æ²¡å¼€é€šï¼Œåªèƒ½ä»5å·çº¿æ°¸ç¦åœ°é“ç«™å‡ºæ¥ï¼Œç„¶åéª‘å…±äº«å•è½¦å»å…¬å¸ã€‚æœ‰æ—¶å€™æ²¡æœ‰è½¦äº†ï¼Œå°±åªèƒ½æ­¥è¡Œè¿‘20åˆ†é’Ÿå»å…¬å¸ã€‚2022å¹´çš„å¤å¤©ç‰¹åˆ«çš„çƒ­ï¼Œä¸€å‡ºåœ°é“ï¼Œåˆšåˆ°æ‰¶æ¢¯ä¸Šï¼Œä¸€è‚¡çƒ­æµªå°±è¢­æ¥ï¼Œç„¶åå‡ºå»æ‰¾å•è½¦ï¼Œåä¸Šå»å±è‚¡éƒ½å¿«çƒ«ç†Ÿäº†ã€‚åœ¨è¿‡åå­—è·¯å£å‰ï¼Œæ‰¾ä¸€ç‰‡å°æ ‘è«èº²é¿çƒˆæ—¥ï¼Œä¸€åˆ°ç»¿ç¯ï¼Œä¸Šç­çš„äººéƒ½éª‘ç€è½¦è¿‡é©¬è·¯ï¼Œåœ¨ä¸‹ä¸€ä¸ªè·¯å£ç»§ç»­å¯»æ‰¾å°æ ‘è«ï¼Œåˆ°å…¬å¸å¤§éƒ¨åˆ†æ—¶å€™åèƒŒéƒ½å·²ç»æ¹¿é€äº†ã€‚</p><p>å¥½åœ¨9æœˆ22æ—¥ï¼Œæ­å·åœ°é“19å·çº¿å¼€é€šï¼Œå¼€é€šå½“å¤©çš„æ™šä¸Šï¼Œæˆ‘å°±å»ä½“éªŒäº†ï¼Œä»æ­¤å›å®¶å¿«äº†ä¸å°‘ï¼Œè€Œä¸”å†ä¹Ÿä¸ç”¨èµ°é‚£ä¹ˆè¿œçš„è·¯äº†ã€‚</p><p>å¹³å¸¸çš„æ—¥å­é‡Œï¼Œä¹Ÿæœ‰æƒŠå–œçš„æ—¶åˆ»ã€‚9æœˆ1æ—¥ï¼Œå¬åˆ°è€å©†æ€€å­•çš„æ¶ˆæ¯ï¼Œæˆ‘æ¿€åŠ¨åäº†ã€‚ç¦»å½“çˆ¸çˆ¸è¶Šæ¥è¶Šè¿‘äº†ï¼Œä¹Ÿæœ‰å¯¹äºè‡ªå·±èƒ½å¦åšä¸ªå¥½çˆ¸çˆ¸çš„éšå¿§ã€‚</p><p>ä»Šå¹´å’Œå°ä¼™ä¼´æ¯å¤©åƒé¥­æ—¶è®¨è®ºæœ€å¤šçš„è¯é¢˜å°±æ˜¯ç–«æƒ…ã€‚æ²¡æƒ³åˆ°ç»“å±€ç«Ÿç„¶æ˜¯è¿™æ ·ã€‚è¿™é‡Œä¹Ÿè¯´è¯´æˆ‘å¼€æ”¾ä¹‹åå˜ğŸ‘çš„ç»å†ã€‚12æœˆ22æ—¥æ˜¯å‘¨å››ï¼Œå†¬è‡³ï¼Œå—“å­å¼€å§‹æœ‰ç‚¹æ¶©çš„æ„Ÿè§‰ï¼Œç­‰åˆ°å‘¨äº”ä¸‹åˆï¼Œæµ‘èº«é…¸ç–¼ï¼Œå·®ç‚¹æ’‘ä¸åˆ°ä¸‹ç­ã€‚å…­ç‚¹ä¸‹ç­ï¼Œåˆ°å®¶åä¹ç‚¹å°±å¼€å§‹ç¡è§‰ï¼Œå‘¨å…­é†’æ¥æµ‘èº«ä¸ç–¼äº†ï¼Œåˆ°ä¸‹åˆğŸˆ¶åˆå¼€å§‹ç–¼ï¼Œå¤´åé¢ä¸€æŠ½ä¸€æŠ½åœ°ç–¼ã€‚å‘¨æ—¥æµ‹äº†ä¸€ä¸‹ï¼Œæœç„¶æ˜¯é˜³æ€§ã€‚è¿‡äº†å‡ å¤©ï¼Œæµ‘èº«ä¸ç–¼äº†ï¼Œä½†å—“å­è¿˜æœ‰äº›éš¾å—ã€‚</p><h2 id="é˜…è¯»çš„ä¹¦ç±"><a href="#é˜…è¯»çš„ä¹¦ç±" class="headerlink" title="é˜…è¯»çš„ä¹¦ç±"></a>é˜…è¯»çš„ä¹¦ç±</h2><p>ä»Šå¹´è¯»äº†æ¯”è¾ƒå¤šçš„å†å²æ–¹é¢çš„ä¹¦ï¼Œè®©æˆ‘ä¸€ç›´æ€è€ƒâ€æˆ‘ä»¬ä»å“ªæ¥â€çš„é—®é¢˜å¾—åˆ°äº†æ›´å®Œæ•´çš„ç†è§£ã€‚æœ€éš¾å¿˜çš„æ˜¯ç‹é¼é’§çš„å›å¿†å½•ç³»åˆ—ï¼Œâ€œæ’æŸ³å­¦è¯—â€ç« èŠ‚æ˜¯æˆ‘çœ‹è¿‡çš„å¯¹æ¸…æœ«æ°‘åˆä¹¡æ‘å£«ç»…æœ€å¥½çš„ä»‹ç»ã€‚ã€Šæå®—ä»å›å¿†å½•ã€‹å’Œã€Šèƒ¡é€‚å£è¿°è‡ªä¼ ã€‹ä¹Ÿè®©æˆ‘å¯¹å”å¾·åˆšè€æ•™æˆæ•¬ä½©ä¸å·²ã€‚ä¸‹é¢åˆ—å‡ºä¸€äº›åŸºæœ¬çœ‹å®Œä¸”æ¯”è¾ƒæ¨èçš„ä¹¦ï¼Œä¾›ä»¥åæŸ¥é˜…ã€‚</p><ul><li>ã€Šç‹é¼é’§å›å¿†å½•å››éƒ¨æ›²ã€‹</li><li>ã€Šæå®—ä»å›å¿†å½•ã€‹</li><li>ã€Šäº”æ›´ç›˜é“ã€‹</li><li>ã€Šä¾ç¨€è¯†å¾—æ•…ä¹¡ç—•ï¼šæ¼†å®¶å±±50å¹´æ‘å²ã€‹</li><li>ã€Šäººé—´æ­å·ã€‹</li><li>ã€Šçº¢æ˜Ÿç…§è€€ä¸­å›½ã€‹</li><li>ã€Šæ™šæ¸…æœ€ååå…«å¹´ã€‹</li><li>ã€Šå¯»è§…æ„ä¹‰ã€‹</li><li>ã€Šå°¼å®‰å¾·ç‰¹äººã€‹</li><li>ã€Šå‘¨æ©æ¥ä¼ ã€‹</li><li>ã€Šèƒ¡é€‚å£è¿°è‡ªä¼ ã€‹</li><li>ã€Šæˆ‘çš„ä¸ªå¤©ã€‹</li><li>ã€Šå·¦å®—æ£ åœ¨ç”˜è‚ƒã€‹</li></ul><h2 id="è§‚å½±"><a href="#è§‚å½±" class="headerlink" title="è§‚å½±"></a>è§‚å½±</h2><p>ä»Šå¹´è¿˜æ˜¯åœ¨å‘¨æœ«çœ‹äº†å¾ˆå¤šå½±è§†ä½œå“ï¼Œéš¾å¾—çš„æ˜¯æœ‰å¾ˆå¤šæ¯”è¾ƒæ„Ÿå…´è¶£çš„ç§‘å¹»å’Œèµ›åšæœ‹å…‹çš„å½±è§†ä½œå“å‡ºç°ï¼Œå¤§é¥±çœ¼ç¦ã€‚è¿™é‡ŒæŒ‰ç…§æˆ‘çš„å–œå¥½å¤§è‡´æ’åºåˆ—å‡ºæ¥ä¸€äº›æ¨èçš„å½±è§†ä½œå“ã€‚</p><ul><li>ã€Šä¸‡ç¥æ®¿ã€‹</li><li>ã€Šèµ›åšæœ‹å…‹ï¼šè¾¹ç¼˜è¡Œè€…ã€‹</li><li>ã€Šéšå…¥å°˜çƒŸã€‹</li><li>ã€Šå²å‰æ˜Ÿçƒã€‹</li><li>ã€Šè¾¹ç¼˜ä¸–ç•Œã€‹</li><li>ã€ŠæŒ‡ç¯ç‹åŠ›é‡ä¹‹æˆ’ã€‹</li><li>ã€Šç™½è²èŠ±åº¦å‡æ‘ã€‹</li><li>ã€Šç‹™å‡»æ‰‹ã€‹</li><li>ã€Šçˆ±ï¼Œæ­»äº¡å’Œæœºå™¨äººç¬¬ä¸‰å­£ã€‹</li><li>ã€Šç¬æ¯å…¨å®‡å®™ã€‹</li><li>ã€Šäººç”Ÿåˆ‡å‰²æœ¯ã€‹</li><li>ã€Šé»‘è¢çº å¯Ÿé˜Ÿã€‹</li><li>ã€Š1883ã€‹  </li><li>ã€Šåˆ©åˆƒå‡ºé˜2ã€‹</li><li>ã€Šæµäººç¬¬ä¸€å­£ã€‹</li><li>ã€Šå’Œå¹³ä½¿è€…ã€‹</li><li>ã€Šå¡”å°”è¨ä¹‹ç‹ã€‹</li><li>ã€Šä¸Šè½½ã€‹</li><li>ã€Šæ³•å…°è¥¿ç‰¹æ´¾ã€‹</li><li>ã€Šäºšå½“è®¡åˆ’ã€‹</li><li>ã€ŠæŸé’å“¥ã€‹</li><li>ã€Šåˆåˆ›ç©å®¶ã€‹</li><li>ã€Šé˜¶æ¢¯ä¹‹é—´ã€‹</li><li>ã€Šæ›¿èº«æ¼”å‘˜ã€‹</li><li>ã€Šå…‰ç¯ã€‹</li><li>ã€Šæ¬§æ¯”æ—ºã€‹</li><li>ã€Šä¸‰ä½“åŠ¨ç”»ã€‹</li><li>ã€Šæœˆå…‰éª‘å£«ã€‹</li><li>ã€Šè’é‡è¿·æ¡ˆã€‹</li><li>ã€Šé›·ç¥4ã€‹</li><li>ã€Šå¥‡å¼‚åšå£«2ã€‹</li><li>ã€Šæˆ‘æ˜¯æ ¼é²ç‰¹ã€‹</li></ul><h2 id="ç›¸èšä¸å‡ºæ¸¸"><a href="#ç›¸èšä¸å‡ºæ¸¸" class="headerlink" title="ç›¸èšä¸å‡ºæ¸¸"></a>ç›¸èšä¸å‡ºæ¸¸</h2><p>ä»Šå¹´ç–«æƒ…åå¤ï¼Œå‡ ä¹æ²¡æœ‰å‡ºæ­å·ï¼Œä¹Ÿæ²¡æœ‰å’Œæœ‹å‹å¤ªå¤šç›¸èšï¼ŒåŠªåŠ›çš„å›å¿†è¿™äº›éš¾å¾—çš„å‡ºè¡Œå’Œç›¸èšæ—¶åˆ»ï¼Œæƒ³èµ·æ¥è¿˜æ˜¯å¾ˆæ¸©æš–ã€‚</p><ul><li>1æœˆ28æ—¥ï¼Œå…ˆä»æ­å·åé£æœºåˆ°è¥¿å®‰ï¼Œç”±äºè¥¿å®‰åˆ°å¤©æ°´çš„èˆªç­å–æ¶ˆäº†ï¼Œæˆ‘åˆ°è¥¿å®‰ååé«˜é“åˆ°å¤©æ°´ï¼Œç„¶ååœ¨åœ¨å¤©æ°´å»åº„æµªï¼Œå¾…äº†ä¸¤å¤©åå’Œå½¤å½¤ä¸€èµ·å›æˆ‘å®¶è¿‡å¹´ã€‚åœ¨æ­£æœˆå¤§é›ªåˆéœçš„åˆå…­åè½¦å»æ­å·ï¼Œå…ˆè”ç³»å‡ºç§Ÿåˆ°å¿åŸï¼Œå’ŒäºŒå§äº‘äº®åƒäº†ç«é”…ï¼Œç„¶ååœ¨äºŒå§å®¶ä½äº†ä¸€æ™šï¼Œç¬¬äºŒå¤©ä¸€å¤§æ—©å‡ºå‘ï¼Œåæ­¦å±±å»å¤©æ°´çš„ç«è½¦ï¼Œç„¶åå»å¤©æ°´å—ç«™åå»æ­å·çš„é«˜é“ã€‚</li><li>åœ¨æ­¦å±±å»äº†å‰ç¨‹çš„é±¿é±¼æ‘Šä½ï¼Œå’Œä»–åŒ†åŒ†èŠäº†å‡ å¥ï¼Œæ™šä¸Šå»åº·æ™ºé›„å®¶ï¼Œä¹Ÿæ˜¯æ•°å¹´æ²¡è§äº†ã€‚</li><li>2æœˆä»½ï¼Œå»å¼ å‡¯å®¶é‡Œåäº†ä¼šï¼ŒèŠäº†èŠå„è‡ªå·¥ä½œçš„æƒ…å†µã€‚</li><li>3æœˆ5æ—¥ï¼Œæ¤ç‰©å›­æ˜¥æ¸¸ï¼Œçµå³°å±±ä¸‹æ¢…èŠ±ç››å¼€ï¼ŒèŠ±å›¢é”¦ç°‡ï¼Œæ¸¸äººå¦‚ç»‡ã€‚</li><li>4æœˆ9æ—¥ï¼Œå’Œå½¤å½¤å»é’å±±æ¹–ï¼Œä»åœ°é“ç«™å‡ºæ¥çš„æ¹–è¾¹å¼€é˜”å¤„ï¼Œä¸€ç›´èµ°åˆ°æ‰æ ‘æ—ï¼Œæ‰¾åˆ°ä¸€ä¸ªåœ°æ–¹é‡é¤ã€‚</li><li>4æœˆ17æ—¥ï¼Œä»äº”äº‘å±±ç‰ŒåŠå…¥å£çˆ¬å±±ï¼Œé‡æ¸¸çœŸè¿¹å¯ºï¼Œå†èµ°ä¸‡æ—èƒŒå±±ï¼Œåˆ°ä¸‰åˆ†å‰ï¼Œä»é¾™äº•æ‘ä¸‹å±±ï¼Œèµ°åäº†æ–¹å‘ï¼Œæœä¹æºªåå…«æ¶§å»äº†ï¼Œæ²¡å¤§è·¯äº†æ‰é‡æ–°èµ°å›æ¥æ‰“è½¦ã€‚</li><li>5æœˆ3æ—¥ï¼Œå»å‡¯æ—‹å®¶åšå®¢ï¼Œä»–ä»¬ä¿©çƒ­æƒ…åœ°æ‹›å¾…æˆ‘ä»¬ï¼Œåƒå®Œé¥­åç©äº†ä¸€ä¼šSwitch</li><li>6æœˆ3æ—¥ï¼Œ7å¹´åé‡æ¸¸ç»å…´ï¼Œååœ°é“ä¸¤ä¸ªå°æ—¶åˆ°é²è¿…æ•…å±…ç«™ï¼Œæ¸¸é²è¿…æ•…å±…ï¼Œç‹é˜³æ˜æ•…å±…ï¼Œä¸Šæ¬¡æ¥åƒçš„å¥½åƒé¥­åº—å·²ç»å…³é—¨äº†ã€‚</li><li>6æœˆ4æ—¥ï¼Œéª‘è¡Œæ­å·å¤åŸé—¨ï¼Œä»è¥¿æ¹–æ–‡åŒ–å¹¿åœºå‡ºå‘ï¼Œå…ˆåå»è‰®å±±é—¨ï¼Œåº†æ˜¥é—¨ï¼Œæ¸…æ³°é—¨ï¼Œæœ›æ±Ÿé—¨ï¼Œå€™æ½®é—¨è‡³å‡¤å±±æ°´æ½®é—¨ï¼Œè‡³æ­¤è¥¿æ¹–çš„å¤åŸé—¨ç®—æ˜¯éƒ½èµ°è¿‡ä¸€åœˆäº†ï¼Œè™½ç„¶åŸºæœ¬ä¸Šå‡ºäº†ä¸€ä¸ªå†™ç€åå­—çš„æ ‡å¿—ï¼Œæ²¡æœ‰åˆ«çš„ä»€ä¹ˆç•™å­˜äº†ã€‚</li><li>6æœˆ19æ—¥ï¼Œé«˜ä¸­åŒå­¦ä¸œå‡æ¢å·¥ä½œæ¥æ­å·äº†ï¼Œå’Œä»–åœ¨é’å±±æ¹–ç§‘æŠ€åŸé™„è¿‘åƒäº†é¥­ï¼Œè¿˜åƒåˆ°äº†ä»–ä»å®¶é‡Œå¸¦æ¥çš„å¥½åƒçš„æå­ã€‚</li><li>7æœˆ1æ—¥ï¼Œå°å›¢é˜Ÿå»äº†è¥¿æ¹–æ–‡ä½“ä¸­å¿ƒæ‰“ç¾½æ¯›çƒï¼Œæ”€å²©ï¼Œä¹‹åå»è¥¿æºªæ¹¿åœ°é‡Œé¢èšé¤ã€‚</li><li>7æœˆ9æ—¥ï¼Œå’Œå½¤å½¤å¤œæ¸¸æ–­æ¡¥ã€‚</li><li>7æœˆ14-7æœˆ17æ—¥ï¼Œå›¢é˜Ÿå»æˆéƒ½outingï¼Œè§äº†å°çˆ±ï¼Œå¤œæ¸¸é”¦æ±Ÿï¼›å›¢é˜Ÿå»äº†æœç”«è‰å ‚ï¼Œæ­¦ä¾¯ç¥ ï¼Œä¹å±±å¤§ä½›ï¼Œéƒ½æ±Ÿå °ï¼Œå¤§ç†ŠçŒ«åŸºåœ°</li><li>7æœˆ24æ—¥ï¼Œå¤œæ¸¸é’±å¡˜æ±Ÿï¼Œéª‘è‡ªè¡Œè½¦ä»è¿‘ä¹å ¡å¤§æ¡¥åˆ°æ–°å½­åŸ å¤§æ¡¥</li><li>8æœˆ5æ—¥ï¼Œå’Œæœ¬ç§‘å®¤å‹åˆ˜æ—¸å’Œä»–å¥³æœ‹å‹æ¨çˆè’™èšé¤</li><li>8æœˆ16æ—¥ï¼Œå’Œå½¤å½¤å»æ­å·å›½å®¶ç‰ˆæœ¬é¦†ï¼Œé‡Œé¢çš„ç§‘æŠ€å«é‡ã€æ–‡åŒ–å«é‡è¿œè¶…é¢„æœŸï¼Œå€¼å¾—å†å»ã€‚</li><li>8æœˆ28æ—¥ï¼Œå’Œé«˜ä¸­åŒå­¦ä¸œå‡ã€è‚å°é¹åœ¨ç«è½¦ä¸œç«™ä¸‡è±¡æ±‡èšé¤ï¼Œå’Œå°é¹æ¯•ä¸šåå°±æ²¡è§è¿‡ï¼Œå·²ç»11å¹´äº†ã€‚</li><li>8æœˆ29æ—¥ï¼Œç‹¬æ¸¸é’±ç‹ç¥ å’Œä¸‡æ¾ä¹¦é™¢ï¼Œé’±ç‹ç¥ çš„ä¸¹ä¹¦é“åˆ¸è®©äººå°è±¡æ·±åˆ»ï¼Œä¸‡æ¾ä¹¦é™¢å¹½æ·±é«˜è¿œï¼Œè§æ¹–äº­ä¸Šå¯è¿œçœºè¥¿æ¹–é›·å³°å¡”ã€‚</li><li>8æœˆ30æ—¥ï¼Œæ¸¸æ­å·åšç‰©é¦†ï¼Œæ­å·å­”åº™å’Œè¥¿æ¹–åšç‰©é¦†ã€‚</li><li>9æœˆ18æ—¥ï¼Œç‹¬è‡ªå»ä¸°æ”¶æ¹–ï¼Œç©ºæ— ä¸€äººçš„å…¬äº¤å’Œç©ºè¡è¡çš„è¿‡è¡—å¤©æ¡¥ï¼Œå’Œå……æ»¡å­©å­æ¬¢å£°ç¬‘è¯­çš„å…¬å›­å½¢æˆé²œæ˜çš„å¯¹æ¯”ã€‚</li><li>9æœˆ27æ—¥ï¼Œå’Œå°ä¼™ä¼´ä»¬ç»™å®ä¹ ç”Ÿä¹ƒæºé¥¯è¡Œï¼Œä»–è¦å»æ·±åœ³å®ä¹ äº†ã€‚ </li><li>10æœˆ4æ—¥ï¼Œå’Œå½¤å½¤å»äº†æ˜¥å¤©å»è¿‡çš„å—è‹•æºªï¼Œæ˜¥å»ç§‹æ¥ï¼Œé‡è‰ç–¯é•¿ï¼Œæ—§è·¯éš¾è¾¨ã€‚</li><li>10æœˆ15æ—¥ï¼Œä¸å½¤å½¤å»æ¤ç‰©å›­éœ²è¥ï¼Œå¾…äº†å¤§åŠå¤©ï¼Œæ¡‚èŠ±è™½æ—ºå­£å·²è¿‡ï¼Œä»ç•™æœ‰ä½™é¦™ã€‚</li><li>10æœˆ29æ—¥ï¼Œç‹¬è‡ªå»äº†é£æ¥å³°ã€çµéšå¯ºï¼ŒéŸ¬å…‰å¯ºï¼ŒåŒ—é«˜å³°ã€‚çµéšå¯ºå»ºç­‘é«˜å¤§é›„ä¼Ÿï¼Œé‡Œé¢é¦™å®¢ç¨ å¯†ï¼Œä»£è¡¨çš„æ˜¯å¯ºåº™é²œæ´»çš„ä¸€é¢ï¼Œè€ŒéŸ¬å…‰å¯ºéœ€è¦èµ°ä¸å°‘çš„å±±è·¯æ‰åˆ°ï¼Œé‡Œé¢äººä¸å¤šï¼Œéš¾å¾—æ¸…å‡€ï¼Œä½†ä¹Ÿéš¾ä»¥å¯»è§…ç™½å±…æ˜“ä¸éŸ¬å…‰å¤§å¸ˆè®ºé“çš„è¸ªè¿¹.</li><li>11æœˆ5æ—¥ï¼ŒéŸ¶è¨€å¸ˆå…„æ¥æ­å‚åŠ äº‘æ –å¤§ä¼šï¼Œå®éªŒå®¤éƒ¨åˆ†å°ä¼™ä¼´åœ¨æ»¨æ±Ÿæµ¦æ±Ÿèšé¤ã€‚</li><li>11æœˆ9æ—¥ï¼Œä¸‹åˆå°å›¢é˜Ÿå»çˆ¬è€å’Œå±±ï¼Œæ—¥è½åä¸‹å±±ï¼Œç©¿è¿‡æ¤ç‰©å›­ï¼Œæ²¡äººæ”¶é—¨ç¥¨ã€‚å†æ¬¡è·¯è¿‡æ¢…æ ‘åŒºç©ºæ— ä¸€äººï¼Œä¹‹åå»é’èŠåæ—çš„æ°‘å®¿ä½“éªŒå®¢å®¶èœï¼Œéš¾å¿˜çš„æ—¶åˆ».</li><li>11æœˆ27æ—¥ï¼Œä¸å½¤å½¤ä»å¸‚æ°‘ä¸­å¿ƒæ¼«æ¸¸åˆ°é’±å¡˜æ±Ÿè¾¹çš„åŸå¸‚é˜³å°ï¼Œè·¯è¿‡æ­å·æ ‡å¿—ä¹‹ä¸€çš„å¤§é‡‘çƒï¼Œåœ¨åŸå¸‚é˜³å°çœ‹å¯¹é¢å¥¥ä½“ä¸­å¿ƒé™„è¿‘çš„3Déœ“è™¹å¹¿å‘Šã€‚</li></ul><h2 id="2023å¹´çš„å±•æœ›"><a href="#2023å¹´çš„å±•æœ›" class="headerlink" title="2023å¹´çš„å±•æœ›"></a>2023å¹´çš„å±•æœ›</h2><p>è™½ç„¶æ–­æ–­ç»­ç»­å†™äº†ä¸€æ•´å¤©ï¼Œåœ¨å‡ºç§Ÿå±‹é‡Œï¼Œç”Ÿæ´»æ‚äº‹å’Œåˆ·æ‰‹æœºçš„å†²åŠ¨ä¸‹ï¼Œè¿˜æ˜¯é™ä¸ä¸‹å¿ƒï¼Œæ„Ÿè§‰è¿˜æœ‰å¾ˆå¤šæ€è€ƒå¾ˆå¤šæ–¹é¢æ²¡å†™åˆ°ï¼Œç•™å¾…ä»¥åå†è¡¥å……å§ã€‚</p><p>2023å¹´ï¼Œç»™è‡ªå·±å®šä¸€äº›å°çš„è¦æ±‚ï¼Œæ¿€åŠ±è‡ªå·±ï¼š</p><ul><li>é‡åˆ°é—®é¢˜å½»åº•ææ‡‚å†åœæ­¢ï¼Œä¸è¦æå‰é€‰æ‹©ç®€å•çš„è·¯å¾„æˆ–ä¼¼æ‡‚éæ‡‚ï¼Œèµ°hardä½†é•¿ä¹…æ¥çœ‹æ›´æ ¹æœ¬çš„è·¯å¾„</li><li>åšçœŸæ­£æœ‰å½±å“åŠ›çš„å·¥ä½œï¼Œåæ€ï¼šå¦‚æœåˆ«äººæ¥åšï¼Œä¼šåšæˆæ€ä¹ˆæ ·ï¼Œæˆ‘æ¯”åˆ«äººåšçš„å¥½åœ¨å“ªé‡Œï¼Ÿ</li><li>æé«˜å·¥ä½œæ•ˆç‡ï¼Œèšç„¦é•¿æœŸç›®æ ‡ï¼Œçªç ´å·¥ä½œä¸Šçš„ç“¶é¢ˆ</li><li>ä¸çœ‹å¾®åšçƒ­æœï¼Œä¸åˆ·çŸ­è§†é¢‘ï¼Œå¸è½½å¿«æ‰‹å’ŒæŠ–éŸ³ï¼Œç©ºé—²æ—¶é—´å¤šçœ‹ä¹¦</li><li>ä¿è¯æ¯å‘¨å†™ä¸€ç¯‡æŠ€æœ¯åšå®¢ï¼Œå°†é‡åˆ°çš„æŠ€æœ¯é—®é¢˜å’ŒæŠ€æœ¯æ€è€ƒè®°å½•ä¸‹æ¥ï¼Œé”»ç‚¼æ€è€ƒæ€»ç»“èƒ½åŠ›</li><li>æ¯å‘¨æ ¡å‡†ä¸€æ¬¡ç›®æ ‡ï¼Œç¡®è®¤æ˜¯ä¸æ˜¯åœ¨çŸ­æœŸä»»åŠ¡ä¸Šåç¦»äº†é•¿æœŸç›®æ ‡ï¼Œå¦‚æœå‡ºç°åå·®åŠæ—¶çº æ­£</li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨2022å¹´ï¼Œæ„Ÿè°¢èº«è¾¹çš„æ‰€æœ‰äººï¼Œä¸ç®¡æ˜¯é™ªåœ¨èº«è¾¹çš„è€å©†å’Œè‚šå­é‡Œçš„å­©å­ï¼Œè¿˜æ˜¯æ¯å¤©ä¸€èµ·å·¥ä½œï¼Œä¸€èµ·åƒé£Ÿå ‚çš„å¹²é¥­å°ä¼™ä¼´ï¼Œè¿˜æ˜¯æ¯å‘¨è§†é¢‘é‡Œè¿œæ–¹çš„å®¶äººï¼Œè¿˜æ˜¯å¶å°”åœ¨é’‰é’‰ä¸Šé—®å€™ä¸€ä¸‹çš„åŒå­¦åŒäº‹ï¼Œè¿˜æ˜¯èººåœ¨å¾®ä¿¡é€šè®¯å½•é‡Œé¢å‡ å¹´æ²¡è”ç³»çš„è€å‹ï¼Œä½ ä»¬æ„æˆäº†æˆ‘è¿™ä¸€å¹´çš„æ€å¿µå’Œç‰µç»Šï¼Œä¹Ÿæ„æˆäº†æˆ‘éš¾å¿˜çš„2022ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;å¤šå¹´ä»¥åï¼Œæƒ³èµ·2022ï¼Œæˆ‘ä¼šå›å¿†èµ·å“ªä¸ªç”»é¢ï¼Ÿä¸ºäº†è§£ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å›æƒ³è¿‡å»çš„è¿™äº›å¹´ä»½ï¼Œ2021ï¼Œ2020ï¼Œâ€¦â€¦2005ï¼Œçœ‹èƒ½æƒ³åˆ°ä»€ä¹ˆã€‚é™¤äº†æœ‰äº›å¹´ä»½é‡Œï¼Œæˆ‘ç»“å©šï¼Œæ¯•ä¸šï¼Œæ‰€ä»¥æœ‰è®°å¿†æ·±åˆ»çš„äº‹ä»¶ï¼Œå¤§éƒ¨åˆ†å¹´ä»½æˆ‘ç”šè‡³æƒ³ä¸èµ·ä»»ä½•äº‹æƒ…ã€‚å¯¹äºä¸€ä¸ªæ¨¡ç³Šçš„æ•°å­—ï¼Œåœ¨å¤šå¹´ä»¥åï¼Œæˆ‘ä»¬ç¡®å®éš¾ä»¥å°†å®ƒå’Œè‡ªå·±ä¸€å¤©å¤©åº¦è¿‡çš„æ—¥å¸¸äº‹æƒ…å…³è”èµ·æ¥ã€‚è™½ç„¶2022å¹´å‘ç”Ÿäº†å¾ˆå¤šäº‹æƒ…ï¼Œä½†å¤§éƒ¨åˆ†è¿˜æ˜¯ä¼šè¢«é—å¿˜ï¼Œä½†æˆ‘è¿˜æ˜¯å°½é‡æƒ³ç”¨è¯¦ç»†çš„æ–‡å­—è®°å½•ä¸‹æ¥ï¼Œè¿™æ ·å½“ä»¥åæƒ³ä¼šçœ‹é‚£å¹´æˆ‘èº«ä¸Šå‘ç”Ÿäº†ä»€ä¹ˆçš„æ—¶å€™ï¼Œæˆ‘çŸ¥é“åªè¦åœ¨æµè§ˆå™¨é‡Œé¢è¾“å…¥&lt;code&gt;vra.github.io/2022/12/31/summary-2022&lt;/code&gt;ï¼Œè¿™äº›æ—¶åˆ»éƒ½ä¼šæ¸…æ™°åœ°æµ®ç°åœ¨æˆ‘çœ¼å‰ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="å¹´ç»ˆæ€»ç»“" scheme="http://vra.github.io/tags/%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>git æ›´æ–°å†å²æäº¤</title>
    <link href="http://vra.github.io/2022/12/16/git-update-a-history-commit/"/>
    <id>http://vra.github.io/2022/12/16/git-update-a-history-commit/</id>
    <published>2022-12-16T01:01:45.000Z</published>
    <updated>2022-12-19T15:46:55.254Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>æœ‰æ—¶å€™æˆ‘ä»¬åœ¨git commitåæ‰å‘ç°ï¼Œä¹‹å‰çš„ä¸€äº›æäº¤æœ‰äº›é—®é¢˜ï¼Œæ¯”å¦‚æœ‰äº›ä»£ç å¿˜æäº¤äº†æˆ–è€…æœ‰ä¸€äº›typoéœ€è¦ä¿®æ”¹ã€‚å¦‚æœè¦ä¿®æ”¹çš„åœ°æ–¹æ˜¯éœ€è¦æ·»åŠ åˆ°æœ€åä¸€æ¬¡æäº¤ä¸Šçš„ï¼Œé‚£ä¹ˆå¯ä»¥å‚è€ƒæˆ‘çš„<a href="https://vra.github.io/2022/11/12/git-add-file-to-last-commit/">è¿™ç¯‡åšæ–‡</a>ä¿®æ”¹ï¼Œå¦‚æœæ˜¯åœ¨éæœ€åä¸€æ¬¡æäº¤ä¸Šçš„ï¼Œé‚£ä¹ˆå°±éœ€è¦ç”¨<code>git rebase</code>æ¥æ“ä½œã€‚è¿™é‡Œç®€å•è®°å½•ä¸€ä¸‹æ“ä½œçš„è¿‡ç¨‹ã€‚</p><p><strong>TL;DR</strong><br>æ“ä½œå‘½ä»¤ç®€è¦æ¥è¯´æ˜¯è¿™æ ·:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨git log æŸ¥çœ‹å†å²æäº¤ï¼Œå¾—åˆ°éœ€è¦ä¿®æ”¹çš„é‚£æ¬¡æäº¤çš„commit id</span></span><br><span class="line">git <span class="built_in">log</span></span><br><span class="line"><span class="comment"># æ‰§è¡Œrebaseå‘½ä»¤ï¼Œæ³¨æ„&lt;commit-id&gt;åé¢æœ‰ä¸€ä¸ª^ï¼Œè¡¨ç¤ºä¿®æ”¹åœ¨æ­¤æ¬¡æäº¤å‰</span></span><br><span class="line">git rebase -i <span class="string">&#x27;&lt;commmit-hash&gt;^&#x27;</span> <span class="comment"># å¦‚æœæ˜¯ä¿®æ”¹ç¬¬ä¸€æ¬¡æäº¤ï¼Œä½¿ç”¨ git rebase -i --root</span></span><br><span class="line"><span class="comment"># ä¿®æ”¹ä»£ç </span></span><br><span class="line">vim changed-file</span><br><span class="line"><span class="comment"># git add æ·»åŠ æ›´æ–°åçš„æ–‡ä»¶</span></span><br><span class="line">git add changed-file</span><br><span class="line"><span class="comment"># git commit æäº¤ï¼Œæ³¨æ„éœ€è¦ä½¿ç”¨åé¢ä¸‰ä¸ªé€‰é¡¹ï¼Œå¹¶ä¸”ä¸éœ€è¦åŠ commitä¿¡æ¯ï¼Œå› ä¸ºä¼šé‡‡ç”¨ä¹‹å‰çš„commitä¿¡æ¯</span></span><br><span class="line">git commit --all --amend --no-edit</span><br><span class="line"><span class="comment"># ä½¿ç”¨--continueæ¥å®Œæˆ git rebase</span></span><br><span class="line">git rebase --<span class="built_in">continue</span></span><br></pre></td></tr></table></figure><p>åé¢ä¼šä½¿ç”¨ä¸€ä¸ªå…·ä½“çš„ï¼ˆå‡ï¼‰ä¾‹å­æ¥æ¼”ç¤ºè¿™ä¸ªè¿‡ç¨‹ã€‚</p><span id="more"></span><h2 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><p>å‡è®¾æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªä»£ç ä»“åº“<code>my_project</code>ï¼Œå…ˆååˆ›å»ºå¹¶æäº¤äº†<code>README.md</code>å’Œ<code>main.py</code>æ–‡ä»¶ï¼Œä½†å‘ç°ç¬¬ä¸€æ¬¡çš„æäº¤é‡Œé¢æœ‰ä¸€ä¸ªtypoï¼Œä¾‹å¦‚æ¯”<code>math</code>æ‰“æˆäº†<code>meth</code>ï¼Œç°åœ¨æƒ³è¦ä¿®æ”¹ç¬¬ä¸€æ¬¡æäº¤ã€‚</p><p>é¦–å…ˆæ„é€ â€æ¡ˆå‘ç°åœºâ€:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mkdir my_project &amp;&amp; <span class="built_in">cd</span> my_project</span><br><span class="line">git init</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;This is my meth library&quot;</span> &gt;&gt; README.md</span><br><span class="line">git add README.md</span><br><span class="line">git commit -m <span class="string">&quot;doc: add readme&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;import numpy as np&quot;</span> &gt;&gt; main.py</span><br><span class="line">git add main.py</span><br><span class="line">git commit -m <span class="string">&quot;feat: create main.py&quot;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ä¸Šé¢çš„typo <code>meth</code>ã€‚</p><p>æˆ‘ä»¬å‘ç°äº†ä¸Šè¿°é—®é¢˜ï¼Œä½†ä¸æƒ³æ–°å»ºä¸€ä¸ªæäº¤æ¥ä¿®å¤ï¼Œå› ä¸ºç¡®å®ä¸ç®—æ˜¯æ–°åŠŸèƒ½ï¼Œé‚£ä¹ˆå°±ç”¨<code>git rebase</code>æ¥å®Œæˆå§ã€‚</p><p>git rebase æ˜¯ç”¨æ¥ä¿®æ”¹git commitçš„å‘½ä»¤ï¼Œæä¾›äº†éå¸¸å¤šçš„åŠŸèƒ½ã€‚è¿™é‡Œæˆ‘ä»¬ç”¨<code>git rebase -i</code>æ¥äº¤äº’å¼åœ°ä¿®æ”¹æŸæ¬¡commitã€‚</p><p>é¦–å…ˆç”¨ <code>git log</code>æŸ¥çœ‹commit IDï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span></span><br><span class="line"></span><br><span class="line">* 9bec788 - (HEAD -&gt; main) add sigmoid (31 minutes ago) &lt;xyz&gt;</span><br><span class="line">* ea833e9 - doc: add doc (31 minutes ago) &lt;xyz&gt;</span><br></pre></td></tr></table></figure><p>å‡å¦‚è¦ä¿®æ”¹ç¬¬äºŒæ¬¡æäº¤ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ç”¨<code>git rebase -i &#39;9bec788^</code>ï¼Œä½†æˆ‘ä»¬è¦ä¿®æ”¹çš„æ˜¯ç¬¬ä¸€æ¬¡æäº¤ï¼Œæ²¡æœ‰ä¹‹å‰çš„çŠ¶æ€ï¼Œæ‰€ä»¥è¦ç”¨ä¸‹é¢çš„å‘½ä»¤:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git rebase -i --root</span><br><span class="line">Successfully rebased and updated refs/heads/main.</span><br></pre></td></tr></table></figure><p>å‡ºæ¥çš„äº¤äº’å¼ç•Œé¢:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">pick ea833e9 doc: add doc</span><br><span class="line">pick 9bec788 add sigmoid</span><br><span class="line"></span><br><span class="line"><span class="comment"># Rebase 9bec788 onto 927493a (2 commands)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Commands:</span></span><br><span class="line"><span class="comment"># p, pick &lt;commit&gt; = use commit</span></span><br><span class="line"><span class="comment"># r, reword &lt;commit&gt; = use commit, but edit the commit message</span></span><br><span class="line"><span class="comment"># e, edit &lt;commit&gt; = use commit, but stop for amending</span></span><br><span class="line"><span class="comment"># s, squash &lt;commit&gt; = use commit, but meld into previous commit</span></span><br><span class="line"><span class="comment"># f, fixup [-C | -c] &lt;commit&gt; = like &quot;squash&quot; but keep only the previous</span></span><br><span class="line"><span class="comment">#                    commit&#x27;s log message, unless -C is used, in which case</span></span><br><span class="line"><span class="comment">#                    keep only this commit&#x27;s message; -c is same as -C but</span></span><br><span class="line"><span class="comment">#                    opens the editor</span></span><br><span class="line"><span class="comment"># x, exec &lt;command&gt; = run command (the rest of the line) using shell</span></span><br><span class="line"><span class="comment"># b, break = stop here (continue rebase later with &#x27;git rebase --continue&#x27;)</span></span><br><span class="line"><span class="comment"># d, drop &lt;commit&gt; = remove commit</span></span><br><span class="line"><span class="comment"># l, label &lt;label&gt; = label current HEAD with a name</span></span><br><span class="line"><span class="comment"># t, reset &lt;label&gt; = reset HEAD to a label</span></span><br><span class="line"><span class="comment"># m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]</span></span><br><span class="line"><span class="comment">#         create a merge commit using the original merge commit&#x27;s</span></span><br><span class="line"><span class="comment">#         message (or the oneline, if no original merge commit was</span></span><br><span class="line"><span class="comment">#         specified); use -c &lt;commit&gt; to reword the commit message</span></span><br><span class="line"><span class="comment"># u, update-ref &lt;ref&gt; = track a placeholder for the &lt;ref&gt; to be updated</span></span><br><span class="line"><span class="comment">#                       to this position in the new commits. The &lt;ref&gt; is</span></span><br><span class="line"><span class="comment">#                       updated at the end of the rebase</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># These lines can be re-ordered; they are executed from top to bottom.</span></span><br></pre></td></tr></table></figure><p>åº•ä¸‹æ³¨é‡Šä¸­ç»™å‡ºäº†rebaseæ”¯æŒçš„ä¸€äº›å‘½ä»¤å’Œå¯¹åº”çš„ç¼©å†™ï¼Œæˆ‘ä»¬å°†éœ€è¦ä¿®æ”¹çš„æäº¤å‰é¢çš„å‘½ä»¤ä¿®æ”¹ä¸º<code>edit</code>ï¼Œç„¶åä¿å­˜é€€å‡º:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">edit ea833e9 doc: add doc</span><br><span class="line">pick 9bec788 add sigmoid</span><br><span class="line"></span><br><span class="line"><span class="comment"># Rebase 9bec788 onto e3f4cea (2 commands)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Commands:</span></span><br><span class="line"><span class="comment"># p, pick &lt;commit&gt; = use commit</span></span><br><span class="line"><span class="comment"># r, reword &lt;commit&gt; = use commit, but edit the commit message</span></span><br><span class="line"><span class="comment"># e, edit &lt;commit&gt; = use commit, but stop for amending</span></span><br><span class="line"><span class="comment"># s, squash &lt;commit&gt; = use commit, but meld into previous commit</span></span><br><span class="line"><span class="comment"># f, fixup [-C | -c] &lt;commit&gt; = like &quot;squash&quot; but keep only the previous</span></span><br><span class="line"><span class="comment">#                    commit&#x27;s log message, unless -C is used, in which case</span></span><br><span class="line"><span class="comment">#                    keep only this commit&#x27;s message; -c is same as -C but</span></span><br><span class="line"><span class="comment">#                    opens the editor</span></span><br><span class="line"><span class="comment"># x, exec &lt;command&gt; = run command (the rest of the line) using shell</span></span><br><span class="line"><span class="comment"># b, break = stop here (continue rebase later with &#x27;git rebase --continue&#x27;)</span></span><br><span class="line"><span class="comment"># d, drop &lt;commit&gt; = remove commit</span></span><br><span class="line"><span class="comment"># l, label &lt;label&gt; = label current HEAD with a name</span></span><br><span class="line"><span class="comment"># t, reset &lt;label&gt; = reset HEAD to a label</span></span><br><span class="line"><span class="comment"># m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]</span></span><br><span class="line"><span class="comment">#         create a merge commit using the original merge commit&#x27;s</span></span><br><span class="line"><span class="comment">#         message (or the oneline, if no original merge commit was</span></span><br><span class="line"><span class="comment">#         specified); use -c &lt;commit&gt; to reword the commit message</span></span><br><span class="line"><span class="comment"># u, update-ref &lt;ref&gt; = track a placeholder for the &lt;ref&gt; to be updated</span></span><br><span class="line"><span class="comment">#                       to this position in the new commits. The &lt;ref&gt; is</span></span><br><span class="line"><span class="comment">#                       updated at the end of the rebase</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># These lines can be re-ordered; they are executed from top to bottom.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># If you remove a line here THAT COMMIT WILL BE LOST.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># However, if you remove everything, the rebase will be aborted.</span></span><br></pre></td></tr></table></figure><p>ä¿å­˜åè¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Stopped at ea833e9...  doc: add doc</span><br><span class="line">You can amend the commit now, with</span><br><span class="line"></span><br><span class="line">  git commit --amend</span><br><span class="line"></span><br><span class="line">Once you are satisfied with your changes, run</span><br><span class="line"></span><br><span class="line">  git rebase --<span class="built_in">continue</span></span><br></pre></td></tr></table></figure><p>ç”¨<code>git status</code> æŸ¥çœ‹ä»£ç çŠ¶æ€:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">interactive rebase <span class="keyword">in</span> progress; onto e3f4cea</span><br><span class="line">Last <span class="built_in">command</span> <span class="keyword">done</span> (1 <span class="built_in">command</span> <span class="keyword">done</span>):</span><br><span class="line">   edit ea833e9 doc: add doc</span><br><span class="line">Next <span class="built_in">command</span> to <span class="keyword">do</span> (1 remaining <span class="built_in">command</span>):</span><br><span class="line">   pick 9bec788 add sigmoid</span><br><span class="line">  (use <span class="string">&quot;git rebase --edit-todo&quot;</span> to view and edit)</span><br><span class="line">You are currently editing a commit <span class="keyword">while</span> rebasing branch <span class="string">&#x27;main&#x27;</span> on <span class="string">&#x27;e3f4cea&#x27;</span>.</span><br><span class="line">  (use <span class="string">&quot;git commit --amend&quot;</span> to amend the current commit)</span><br><span class="line">  (use <span class="string">&quot;git rebase --continue&quot;</span> once you are satisfied with your changes)</span><br><span class="line"></span><br><span class="line">nothing to commit, working tree clean</span><br></pre></td></tr></table></figure><p>git çš„æç¤ºä¿¡æ¯è¿˜æ˜¯å¾ˆä¸°å¯Œçš„ï¼ŒæŒ‰ç…§æç¤ºæ¥æ“ä½œä»£ç ï¼Œå°†<code>meth</code> ä¿®æ”¹ä¸º<code>math</code>ï¼Œå†<code>git add</code>, <code>git commit --all --amend --no-edit</code>å’Œ <code>git rebase --continue</code> æ¥ç»“æŸrebase:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git add README.md</span><br><span class="line"></span><br><span class="line">$ git commit --all --amend --no-edit</span><br><span class="line">[detached HEAD 3b83a85] doc: add doc</span><br><span class="line"> Date: Sat Dec 17 18:00:12 2022 +0800</span><br><span class="line"> 1 file changed, 3 insertions(+)</span><br><span class="line"> create mode 100644 README.md</span><br><span class="line"></span><br><span class="line">$ git rebase --<span class="built_in">continue</span></span><br><span class="line">Successfully rebased and updated refs/heads/main.</span><br></pre></td></tr></table></figure><p>ç„¶åç”¨<code>git log</code>æŸ¥çœ‹å‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°ä¿®æ”¹çš„é‚£æ¬¡æäº¤å’Œåç»­æäº¤çš„ç¼–å·éƒ½å·²ç»æ›´æ–°äº†ï¼Œæ„å‘³ç€è¿™æ˜¯å…¨æ–°çš„æäº¤ï¼Œè·Ÿä¹‹å‰çš„æäº¤æ²¡æœ‰å…³ç³»äº†ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;æ¦‚è¿°&quot;&gt;&lt;/a&gt;æ¦‚è¿°&lt;/h2&gt;&lt;p&gt;æœ‰æ—¶å€™æˆ‘ä»¬åœ¨git commitåæ‰å‘ç°ï¼Œä¹‹å‰çš„ä¸€äº›æäº¤æœ‰äº›é—®é¢˜ï¼Œæ¯”å¦‚æœ‰äº›ä»£ç å¿˜æäº¤äº†æˆ–è€…æœ‰ä¸€äº›typoéœ€è¦ä¿®æ”¹ã€‚å¦‚æœè¦ä¿®æ”¹çš„åœ°æ–¹æ˜¯éœ€è¦æ·»åŠ åˆ°æœ€åä¸€æ¬¡æäº¤ä¸Šçš„ï¼Œé‚£ä¹ˆå¯ä»¥å‚è€ƒæˆ‘çš„&lt;a href=&quot;https://vra.github.io/2022/11/12/git-add-file-to-last-commit/&quot;&gt;è¿™ç¯‡åšæ–‡&lt;/a&gt;ä¿®æ”¹ï¼Œå¦‚æœæ˜¯åœ¨éæœ€åä¸€æ¬¡æäº¤ä¸Šçš„ï¼Œé‚£ä¹ˆå°±éœ€è¦ç”¨&lt;code&gt;git rebase&lt;/code&gt;æ¥æ“ä½œã€‚è¿™é‡Œç®€å•è®°å½•ä¸€ä¸‹æ“ä½œçš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;TL;DR&lt;/strong&gt;&lt;br&gt;æ“ä½œå‘½ä»¤ç®€è¦æ¥è¯´æ˜¯è¿™æ ·:&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# ä½¿ç”¨git log æŸ¥çœ‹å†å²æäº¤ï¼Œå¾—åˆ°éœ€è¦ä¿®æ”¹çš„é‚£æ¬¡æäº¤çš„commit id&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git &lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# æ‰§è¡Œrebaseå‘½ä»¤ï¼Œæ³¨æ„&amp;lt;commit-id&amp;gt;åé¢æœ‰ä¸€ä¸ª^ï¼Œè¡¨ç¤ºä¿®æ”¹åœ¨æ­¤æ¬¡æäº¤å‰&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git rebase -i &lt;span class=&quot;string&quot;&gt;&amp;#x27;&amp;lt;commmit-hash&amp;gt;^&amp;#x27;&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;# å¦‚æœæ˜¯ä¿®æ”¹ç¬¬ä¸€æ¬¡æäº¤ï¼Œä½¿ç”¨ git rebase -i --root&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# ä¿®æ”¹ä»£ç &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vim changed-file&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# git add æ·»åŠ æ›´æ–°åçš„æ–‡ä»¶&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git add changed-file&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# git commit æäº¤ï¼Œæ³¨æ„éœ€è¦ä½¿ç”¨åé¢ä¸‰ä¸ªé€‰é¡¹ï¼Œå¹¶ä¸”ä¸éœ€è¦åŠ commitä¿¡æ¯ï¼Œå› ä¸ºä¼šé‡‡ç”¨ä¹‹å‰çš„commitä¿¡æ¯&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git commit --all --amend --no-edit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# ä½¿ç”¨--continueæ¥å®Œæˆ git rebase&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git rebase --&lt;span class=&quot;built_in&quot;&gt;continue&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åé¢ä¼šä½¿ç”¨ä¸€ä¸ªå…·ä½“çš„ï¼ˆå‡ï¼‰ä¾‹å­æ¥æ¼”ç¤ºè¿™ä¸ªè¿‡ç¨‹ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="æ€»ç»“" scheme="http://vra.github.io/tags/%E6%80%BB%E7%BB%93/"/>
    
    <category term="Linux" scheme="http://vra.github.io/tags/Linux/"/>
    
    <category term="Git" scheme="http://vra.github.io/tags/Git/"/>
    
  </entry>
  
</feed>
